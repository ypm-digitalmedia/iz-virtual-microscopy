/*
 Zoomify Image Viewer, version on line 26 below. Copyright Zoomify, Inc., 1999-2015. All rights reserved. You may
use this file on private and public websites, for personal and commercial purposes, with or without modifications, so long as this
notice is included. Redistribution via other means is not permitted without prior permission. Additional terms apply. For complete
license terms please see the Zoomify License Agreement in this product and on the Zoomify website at www.zoomify.com.
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
*/
(function(){(function(){return this}).call().Z={}})();Z.version="2.3.01 Pro";
Z.showImage=function(a,b,c){Z.showImage.done?(Z.Utils.declareGlobals(),Z.pageContainerID=a,Z.imagePath="undefined"!==typeof b&&null!==b?Z.Utils.stringRemoveTrailingSlashCharacters(b):null,"undefined"!==typeof c&&(Z.parameters=Z.Utils.parseParameters(c)),Z.initialize()):(Z.showImage.done=!0,Z.Utils.addCrossBrowserMethods(),Z.Utils.addCrossBrowserEvents(),Z.Utils.declareGlobals(),Z.pageContainerID=a,Z.setCallback=function(a,b){var c=Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",a,
null,"callbackFunction",b);-1==c&&(c=Z.callbacks.length);Z.callbacks[c]={callbackEvent:a,callbackFunction:b}},Z.clearCallback=function(a,b){var c=Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",a,null,"callbackFunction",b);-1!=c&&(Z.callbacks=Z.Utils.arraySplice(Z.callbacks,c,1))},Z.imagePath="undefined"!==typeof b&&null!==b?Z.Utils.stringRemoveTrailingSlashCharacters(b):null,"undefined"!==typeof c&&("string"===typeof c?(a=unescape(c),a=Z.Utils.stringUnescapeAmpersandCharacters(a),
Z.parameters=Z.Utils.parseParameters(a)):Z.parameters=Z.Utils.parseParameters(c)),"complete"!=document.readyState?(Z.Utils.addEventListener(document,"DOMContentLoaded",Z.initialize),Z.Utils.addEventListener(window,"load",Z.initialize)):Z.initialize())};
Z.initialize=function(){Z.Utils.removeEventListener(document,"DOMContentLoaded",Z.initialize);Z.Utils.removeEventListener(window,"load",Z.initialize);Z.Utils.detectBrowserFeatures();Z.Utils.setParameters(Z.parameters);Z.Viewer=new Z.ZoomifyImageViewer;Z.Utils.stringValidate(Z.copyrightPath)?Z.Utils.enforceCopyright():Z.Viewer.configureViewer();0<Z.debug&&Z.Utils.trace(Z.Utils.getResource("z445"),!1,!0)};
Z.ZoomifyImageViewer=function(){function a(a){if(a=Z.Utils.event(a)){var b=null;if(null!==Z.editing&&Z.Viewport.verifyEditsUnsaved())return b=Z.Utils.getResource("ALERT_UNSAVEDEDITSEXIST-BROWSER"),a.returnValue=b}}function b(a){function b(){Z.clearCallback("readyViewer",b);Z.viewportCurrent=Z.Viewport0;H.viewportSelect(Z.imageSetStart)}Z.imagePath="multiple";Z.tileSourceMultiple&&Z.Utils.validateImagePath(a[0].media);Z.setCallback("readyViewer",b);for(var c=0,d=a.length;c<d;c++){Z["Viewport"+c.toString()]=
new Z.ZoomifyViewport(c,a[c].media,Z.annotationFileShared?Z.imageSetAnnotationPath:a[c].annotationPath,Z.hotspotFileShared?Z.imageSetHotspotPath:a[c].hotspotPath);var e=c==Z.imageSetStart;e&&(Z.viewportCurrent=Z["Viewport"+c.toString()],H.viewportSelect(Z.imageSetStart));Z["Viewport"+c.toString()].setVisibility(e)}}function c(a,b){if("undefined"===typeof b||null===b)b="0";var c=document.getElementById("HotspotList"+b);c&&(c.style.visibility=a?"visible":"hidden")}function d(a,b){this.id=a.getAttribute("ID");
this.name=a.getAttribute("NAME");this.internalID=b;this.media=a.getAttribute("MEDIA");this.annotationPath=a.getAttribute("ANNOTATIONPATH");this.hotspotPath=a.getAttribute("HOTSPOTPATH")}function e(a,b,c,d){switch(a){case "0":d=a=-1E3;break;case "1":d=a=15;break;case "2":a=c-b-15+2;d=10;break;case "3":a=c-b-15;d=null!=toolbar?d-30:d-22.5;break;case "4":a=15;d=null!=toolbar?d-30:d-22.5;break;default:a=c-b,d=15}return new Z.Utils.Point(a,d)}function f(a){if(a=Z.Utils.event(a))if(a=Z.Utils.target(a),
"null"!=a.options[a.selectedIndex].value){var b=Z.Utils.stringValidate(Z.imageSetListTitle)&&"none"!=Z.imageSetListTitle?1:0;H.viewportSelect(a.selectedIndex-b)}}function h(){document.getElementsByTagName("body")?document.getElementsByTagName("body")[0].onorientationchange=m:window.setTimeout(h,100)}function m(a){!Z.interactivityOff&&Z.fullView&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),Z.Toolbar&&Z.annotations&&
(2==Z.annotationPanelVisible||3==Z.annotationPanelVisible)&&Z.Toolbar.setVisibilityAnnotationPanel(!1),Z.Viewport&&(Z.Viewport.toggleFullViewMode(!1),Z.Viewport.toggleFullViewMode(!0)),Z.Toolbar&&Z.annotations&&(2==Z.annotationPanelVisible||3==Z.annotationPanelVisible)&&Z.Toolbar.setVisibilityAnnotationPanel(!0),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0),Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!0))}function D(a){if(!Z.interactivityOff&&Z.keys&&"INPUT"!=
document.activeElement.tagName&&"TEXTAREA"!=document.activeElement.tagName&&(a=Z.Utils.event(a),18==a.keyCode||a.altKey||(Z.viewportCurrent.zoomAndPanAllStop(!0,!0),Z.maskingSelection&&Z.viewportCurrent.clearLabelMask()),a)){var b=a.type,c=a.keyCode;if("keydown"==b){Z.keyIsDown=!0;switch(c){case 90:Z.viewportCurrent.zoom("out");break;case 17:Z.viewportCurrent.zoom("out");break;case 65:Z.viewportCurrent.zoom("in");break;case 16:Z.viewportCurrent.zoom("in");break;case 37:Z.animation&&Z.viewportCurrent.getZoom()==
Z.minZ?Z.imageSet&&H.viewportPrior():Z.viewportCurrent.pan("left");break;case 38:Z.animation&&Z.viewportCurrent.getZoom()==Z.minZ?Z.imageSet&&H.viewportNext():Z.viewportCurrent.pan("up");break;case 40:Z.animation&&Z.viewportCurrent.getZoom()==Z.minZ?Z.imageSet&&H.viewportPrior():Z.viewportCurrent.pan("down");break;case 39:Z.animation&&Z.viewportCurrent.getZoom()==Z.minZ?Z.imageSet&&H.viewportNext():Z.viewportCurrent.pan("right");break;case 27:Z.fullView?Z.viewportCurrent.toggleFullViewMode(!1):Z.viewportCurrent.reset();
break;case 190:Z.rotationVisible&&Z.viewportCurrent.rotateClockwise();break;case 188:Z.rotationVisible&&Z.viewportCurrent.rotateCounterwise();break;case 33:Z.imageSet&&H.viewportNext();break;case 34:Z.imageSet&&H.viewportPrior()}!Z.imageSet||33!=c&&34!=c||(a.preventDefault?a.preventDefault():a.returnValue=!1)}else"keyup"==b&&(Z.keyIsDown=!1,90==c||17==c||65==c||16==c?Z.viewportCurrent.zoom("stop"):37==c||39==c?Z.viewportCurrent.pan("horizontalStop"):38==c||40==c?Z.viewportCurrent.pan("verticalStop"):
!Z.imageSet||33!=c&&34!=c||(Z.imageSet&&Z.viewportCurrent.updateView(!0),a.preventDefault?a.preventDefault():a.returnValue=!1))}}function E(a){a=Z.Utils.event(a);var b=a.type;if(a&&b){var c=Z.Utils.isRightMouseButton(a),d=a.altKey;if(!("mouseover"!=b&&"mouseout"!=b&&Z.interactivityOff||"mousedown"==b&&(Z.interactivityOff||Z.coordinatesVisible&&d)||c)){Z.touchSupport&&!Z.clickZoomAndPanBlock&&"touchmove"!=b&&"gesturechange"!=b&&a.preventDefault();switch(b){case "mouseover":Z.fullView||"TEXTAREA"==
document.activeElement.tagName||Z.Viewer.initializeViewerKeyDefaultListeners(!0);break;case "mouseout":Z.Viewer.initializeViewerKeyDefaultListeners(!1)}var d=Z.Utils.event(a),e=d.type;if(d&&e){var f;a=Z.Utils.target(d);c=Z.Utils.relatedTarget(d);"resize"!=e&&(f=Z.Utils.getMousePosition(d));"DOMMouseScroll"==e&&(e="mousewheel");switch(e){case "mouseover":d=Z.Utils.nodeIsInViewer(a);e=Z.Utils.nodeIsInViewer(c);d&&e||(Z.viewportCurrent&&Z.viewportCurrent.showLists(!0),Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&
Z.Toolbar.show(!0),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0),Z.RulerDisplay&&1<Z.rulerVisible&&Z.Ruler.setVisibility(!0),Z.Toolbar&&Z.annotations&&(2==Z.annotationPanelVisible||3==Z.annotationPanelVisible)&&Z.Toolbar.setVisibilityAnnotationPanel(!0),Z.mouseOutDownPoint=null);break;case "mouseout":d=Z.Utils.nodeIsInViewer(a);e=Z.Utils.nodeIsInViewer(c);d&&e||"[object HTMLSelectElement]"==a||"[object HTMLOptionElement]"==a||"[object HTMLSelectElement]"==c||"[object HTMLOptionElement]"==
c||(Z.mouseIsDown?Z.mouseOutDownPoint=new Z.Utils.Point(f.x,f.y):(Z.viewportCurrent&&Z.viewportCurrent.showLists(!1),Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),Z.RulerDisplay&&1<Z.rulerVisible&&Z.Ruler.setVisibility(!1),Z.Toolbar&&Z.annotations&&(2==Z.annotationPanelVisible||3==Z.annotationPanelVisible)&&Z.Toolbar.setVisibilityAnnotationPanel(!1)));break;case "resize":K||(K=window.setTimeout(y,T));break;case "mousewheel":f=
Math.max(-1,Math.min(1,d.wheelDelta||-d.detail)),Z.viewportCurrent.mouseWheelHandler(f)}}if("mousedown"==b||"mousemove"==b)return!1}}}function y(a){K&&(window.clearTimeout(K),K=null,A())}function A(){var a=Z.Utils.getContainerSize(Z.pageContainer,Z.ViewerDisplay),b=Z.viewportCurrent.calculateZoomForResize(Z.viewportCurrent.getZoom(),Z.viewerW,Z.viewerH,a.x,a.y);H.resizeViewer(a.x,a.y,b)}var H=this,U=[];Z.ViewerDisplay=Z.Utils.createContainerElement("div","ViewerDisplay","inline-block","relative",
"hidden","100%","100%","0px","0px","none","0px","transparent none","0px","0px","normal","pointer");Z.pageContainer=document.getElementById(Z.pageContainerID);Z.Utils.getElementStyle(Z.pageContainer);Z.ViewerDisplay.style["-webkit-touch-callout"]="none";Z.ViewerDisplay.style["-moz-user-select"]="none";Z.ViewerDisplay.style["-khtml-user-select"]="none";Z.ViewerDisplay.style["-webkit-user-select"]="none";Z.ViewerDisplay.style["-ms-user-select"]="none";Z.ViewerDisplay.style["-o-user-select"]="none";Z.ViewerDisplay.style["user-select"]=
"none";var q=Z.Utils.getContainerSize(Z.pageContainer,Z.ViewerDisplay);Z.viewerW=q.x;Z.viewerH=q.y;Z.pageContainer.innerHTML="";Z.pageContainer.appendChild(Z.ViewerDisplay);Z.autoResize=!1!==Z.autoResize&&Z.Utils.isElementFluid(Z.pageContainer);var T=parseInt(Z.Utils.getResource("DEFAULT_AUTORESIZESKIPDURATION"),10),K;Z.mouseWheelCompleteDuration=parseInt(Z.Utils.getResource("z165"),10);if(Z.imageSet)var u=[],J=[];this.configureViewer=function(){function a(){Z.clearCallback(c,a);H.initializeViewerKeyEventListeners(!0);
Z.Utils.addEventListener(Z.ViewerDisplay,"mouseover",E);Z.Utils.addEventListener(Z.ViewerDisplay,"mouseout",E);Z.Utils.addEventListener(Z.ViewerDisplay,"mousemove",Z.Utils.preventDefault);Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",E);Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",Z.Utils.preventDefault);h();Z.autoResize&&Z.Utils.addEventListener(window,"resize",E);H.configureComponents(Z.viewportCurrent)}function b(){Z.clearCallback("readyViewer",b);Z.Utils.getMessage()!=Z.Utils.getResource("ALERT_LOADINGIMAGESET")&&
Z.Utils.getMessage()!=Z.Utils.getResource("ALERT_LOADINGANNOTATIONS")||Z.Utils.hideMessage();Z.imageSet&&z619Delayed()}var c=Z.imageSet?"initializedViewer":"initializedViewport";Z.setCallback(c,a);Z.setCallback("readyViewer",b);if(Z.imageSet){Z.Utils.showMessage(Z.Utils.getResource("ALERT_LOADINGIMAGESET"),!1,null,"center");var d,e=new Z.NetConnector;".xml"!=Z.imageSetPath.toLowerCase().substring(Z.imageSetPath.length-4,Z.imageSetPath.length)&&(Z.imageSetPath=Z.imageSetPath+"/"+Z.Utils.getResource("DEFAULT_IMAGESETXMLFILE"));
d=Z.Utils.cacheProofPath(Z.imageSetPath);e.loadXML(d)}else Z.Viewport=new Z.ZoomifyViewport,Z.viewportCurrent=Z.Viewport};this.configureComponents=function(a){0<Z.toolbarVisible&&!Z.Toolbar&&(Z.Toolbar=new Z.ZoomifyToolbar(a));0<Z.navigatorVisible&&!Z.Navigator&&(Z.Navigator=new Z.ZoomifyNavigator(a),Z.Navigator&&Z.Navigator.z682());0<Z.rulerVisible&&!Z.Ruler&&(Z.Ruler=new Z.ZoomifyRuler(a))};this.getVersion=function(){return Z.version};this.setSizeAndPosition=function(a,b,c,d,e){Z.viewerW=a;Z.viewerH=
b;Z.ViewerDisplay.style.width=a+"px";Z.ViewerDisplay.style.height=b+"px";Z.Viewport&&Z.Viewport.getStatus("initialized")&&Z.Viewport.setSizeAndPosition(a,b,c,d);b=1==Z.toolbarPosition?b-Z.toolbarH:0;Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&(Z.Toolbar.setSizeAndPosition(a,null,null,b),Z.toolbarAutoShowHide&&Z.Toolbar.show(!0));Z.NavigatorDisplay&&Z.Navigator.getInitialized()&&(Z.Navigator.setSizeAndPosition(null,null,c,d,Z.navigatorFit),1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0));e&&
Z.Viewport.updateView(!0)};this.getImagePath=function(){return H.getImage()};this.getImage=function(){return Z.imagePath};this.setImagePath=function(a,b){"undefined"!==typeof b&&Z.Utils.stringValidate(b)&&(Z.imageProperties=b);H.setImage(a)};this.setImage=function(a,b,c){if(Z.Viewport&&(Z.Viewport.getStatus("initialized")||c)){Z.Viewport.zoomAndPanAllStop(!0);var d=!0;null!==Z.editing&&(d=!0,null!==Z.editing&&Z.Viewport.verifyEditsUnsaved()&&(d=confirm(Z.Utils.getResource("ALERT_UNSAVEDEDITSEXIST-CUSTOM"))));
d&&(Z.maskingSelection&&H.clearLabelMask(),Z.Utils.clearImageParameters(),Z.imagePath=Z.Utils.stringRemoveTrailingSlashCharacters(a),Z.Utils.validateImagePath(),Z.Viewport.setImagePath(Z.imagePath),"undefined"!==typeof b&&(Z.parameters=Z.Utils.parseParameters(b)),c&&Z.Utils.setParameters(Z.parameters),"unconverted"==Z.tileSource?Z.Viewport.loadUnconvertedImage(a):Z.imageProperties?(a=Z.Utils.xmlConvertTextToDoc(Z.imageProperties),Z.Viewport.z602(a)):(a=new Z.NetConnector,Z.Viewport.loadImageProperties(Z.imagePath,
a)))}};this.setImageWithFade=function(a,b,c){Z.Viewport&&(Z.Viewport.getStatus("initialized")||c)&&(Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler("out",a,b,c)},50))};this.setTourPath=function(a,b){Z.Viewport&&Z.Viewport.getStatus("initialized")&&Z.Viewport.setHotspotPath(a,b)};this.setHotspotPath=function(a,b){Z.Viewport&&Z.Viewport.getStatus("initialized")&&Z.Viewport.setHotspotPath(a,b)};this.setAnnotationPath=function(a,b){Z.Viewport&&Z.Viewport.getStatus("initialized")&&
Z.Viewport.setAnnotationPath(a,b)};this.initializePageExitEventHandler=function(){Z.Utils.addEventListener(window,"beforeunload",a)};this.getStatus=function(a){a=Z.Utils.arrayIndexOfObjectValue(U,"state",a);return-1==a?!1:U[a].status};this.setStatus=function(a,b){var c=!1,d=Z.Utils.arrayIndexOfObjectValue(U,"state",a);-1==d?(c=b,U[U.length]={state:a,status:b}):(!U[d].status&&b&&(c=!0),U[d].status=b);c&&(Z.Utils.validateCallback(a+"Viewer"),H.validateViewerReady(a))};this.validateViewerStatus=function(a){var b=
!0;if(Z.imageSet)for(var c=0,d=Z.imageSetLength;c<d;c++)if(!Z["Viewport"+c.toString()].getStatus(a)){b=!1;break}b&&H.setStatus(a,!0)};this.validateViewerReady=function(a){a=Z.Viewport&&Z.Viewport.getStatus("initialized")&&("unconverted"==Z.tileSource||Z.Viewport.getStatus("precacheLoaded")&&Z.Viewport.getStatus("backfillLoaded")&&Z.Viewport.getStatus("backfillDrawn"))&&Z.Viewport.getStatus("displayLoaded")&&Z.Viewport.getStatus("displayDrawn");var b=!Z.hotspots||Z.Viewport.getStatus("hotspotsLoaded"),
c=!Z.annotations||Z.Viewport.getStatus("annotationsLoaded")&&Z.Viewport.getStatus("annotationPanelInitialized"),d=0==Z.ToolbarVisible||Z.Toolbar&&Z.Toolbar.getInitialized(),e=!Z.NavigatorVisible||Z.Navigator&&Z.Navigator.getInitialized(),f=!Z.RulerVisible||Z.Ruler&&Z.Ruler.getInitialized(),h=!Z.imageSet||Z.Viewer&&Z.Viewer.getStatus("initialized")&&("unconverted"==Z.tileSource||Z.Viewer.getStatus("precacheLoaded")&&Z.Viewer.getStatus("backfillLoaded")&&Z.Viewer.getStatus("backfillDrawn"))&&Z.Viewer.getStatus("displayLoaded")&&
Z.Viewer.getStatus("displayDrawn"),u=!Z.imageSet||!Z.hotspots||Z.Viewer&&Z.Viewer.getStatus("hotspotsLoaded"),m=!Z.imageSet||!Z.annotations||Z.Viewer&&Z.Viewer.getStatus("annotationsLoaded")&&Z.Viewer.getStatus("annotationPanelInitialized");(a=a&&b&&c&&d&&e&&f&&h&&u&&m)&&Z.Viewer.setStatus("ready",!0);return a};this.parseImageSetXML=function(a,c){Z.Utils.arrayClear(u);Z.Utils.arrayClear(J);Z.imageSetListPosition=Z.Utils.getResource("DEFAULT_IMAGESETLISTPOSITION");var h=Z.Utils.getResource("DEFAULT_IMAGESETLISTSOURCE");
Z.imageSetListTitle=Z.Utils.getResource("UI_IMAGESETLISTTITLE");Z.imageSetStart=parseInt(Z.Utils.getResource("UI_IMAGESETSTART"),10);Z.imageSetLoop="1"==Z.Utils.getResource("UI_IMAGESETLOOP");Z.sliderImageSetVisible="1"==Z.Utils.getResource("UI_IMAGESETSLIDER");Z.animationAxis=Z.Utils.getResource("DEFAULT_ANIMATIONAXIS");Z.animator=Z.Utils.getResource("DEFAULT_ANIMATOR");var m=a.getElementsByTagName("SETUP")[0];if(m){var q=m.getAttribute("CHOICELIST");Z.Utils.stringValidate(q)&&(Z.imageSetListPosition=
q);q=m.getAttribute("LISTSOURCE");Z.Utils.stringValidate(q)&&(h=q);q=m.getAttribute("LISTTITLE");Z.Utils.stringValidate(q)&&(Z.imageSetListTitle=q);q=m.getAttribute("HOTSPOTPATH");Z.Utils.stringValidate(q)&&(Z.imageSetHotspotPath=q,Z.hotspotFileShared=!0);q=m.getAttribute("ANNOTATIONPATH");Z.Utils.stringValidate(q)&&(Z.imageSetAnnotationPath=q,Z.annotationFileShared=!0);q=m.getAttribute("START");Z.Utils.stringValidate(q)&&(Z.imageSetStart=parseInt(q,10)-1);q=m.getAttribute("LOOP");Z.Utils.stringValidate(q)&&
(Z.imageSetLoop="1"==q);q=m.getAttribute("SLIDER");Z.Utils.stringValidate(q)&&(Z.sliderImageSetVisible="1"==q);q=m.getAttribute("AXIS");Z.Utils.stringValidate(q)&&(Z.animationAxis=q);m=m.getAttribute("ANIMATOR");Z.Utils.stringValidate(m)&&(Z.animator=m)}for(var m=a.getElementsByTagName("animation"==c?"IMAGE":"SLIDE"),q=0,y=m.length;q<y;q++){var p=new d(m[q],q);u[u.length]=p;var D="NAME"==h?p.name:p.media.substring(p.media.lastIndexOf("/")+1,p.media.length);J[J.length]={text:D,value:p.internalID}}Z.imageSetLength=
u.length;p=Z.imageSetListPosition;h=Z.imageSetListTitle;m=J;q="0"==p?"hidden":"visible";y=parseInt(Z.Utils.getResource("DEFAULT_IMAGESETLISTWIDTH"),10);p=e(p,y,Z.viewerW,Z.viewerH);"undefined"===typeof imageSetList||null===imageSetList?(imageSetList=new Z.Utils.createSelectElement("imageSetList",h,m,y,p.x,p.y,null,q,f,"change"),Z.ViewerDisplay.appendChild(imageSetList),h=Z.Utils.stringValidate(Z.imageSetListTitle)&&"none"!=Z.imageSetListTitle?1:0,imageSetList.selectedIndex=h):Z.Utils.arrayClear(m);
h=parseInt(Z.Utils.getResource("z230"),10);imageSetList.style.zIndex=(h+4).toString();b(u)};z619Delayed=function(){for(var a=0,b=Z.imageSetLength;a<b;a++){var c=Z["Viewport"+a.toString()];c.getStatus("backfillPrecached")||c.z619(!0)}};this.viewportChange=function(a){"stop"!=a?("forward"==a?Z.Viewer.viewportNext():Z.Viewer.viewportPrior(),Z.animation&&(Z.viewportChangeTimeout=window.setTimeout(function(){Z.Viewer.viewportChange(a)},10))):Z.viewportChangeTimeout&&(window.clearTimeout(Z.viewportChangeTimeout),
Z.viewportChangeTimeout=null)};this.viewportPrior=function(a){a="undefined"===typeof a||null===a?0:Math.round(a);var b=Z.imageSetLength-1;a=Z.viewportCurrentID-(1-a);0>a&&(Z.imageSetLoop?(a<-b&&(a=-(-a%b)),0>a&&(a+=b+1)):a=0);H.viewportSelect(a)};this.viewportNext=function(a){a="undefined"===typeof a||null===a?0:Math.round(a);var b=Z.imageSetLength-1;a=Z.viewportCurrentID+(1+a);a>b&&(a=Z.imageSetLoop?a%(b+1):b);H.viewportSelect(a)};this.viewportSelect=function(a,b){var d=Z.mouseIsDown||Z.buttonIsDown||
Z.keyIsDown,e=null===Z.Viewport;if("undefined"===typeof a||null===a)a=0;a=Math.abs(a);var f=a.toString(),h=Z["Viewport"+f],m=h==Z.viewportCurrent;"undefined"===typeof h||m&&!e&&d||(d=Z.viewportCurrentID.toString(),e=Z.viewportCurrent,Z.viewportCurrent=h,Z.viewportCurrentID=a,Z.viewportCurrent.setVisibility(!0),Z.Viewport=Z.viewportCurrent,m||e.setVisibility(!1),Z.viewportCurrent&&Z.viewportCurrent.getStatus("initialized")&&(Z.viewportCurrent.getViewW()!=Z.viewerW||Z.viewportCurrent.getViewH()!=Z.viewerH?
Z.viewportCurrent.syncViewportResize(Z.imageX,Z.imageY,Z.imageZ,Z.imageR):Z.viewportCurrent.updateView(!0),e&&(Z.hotspotFileShared||Z.annotationFileShared)&&(h=e.getHotspots())&&Z.viewportCurrent.setHotspots(h),Z.Navigator&&Z.Navigator.getInitialized()&&0<Z.navigatorVisible&&Z.Navigator.setViewport(Z.viewportCurrent),Z.Toolbar&&Z.Toolbar.getInitialized()&&0<Z.toolbarVisible&&("undefined"!==typeof b&&null!==b&&b||Z.Toolbar.syncSliderToViewportImageSet(Z.viewportCurrentID),Z.Toolbar.setViewport(Z.viewportCurrent)),
Z.hotspots&&(c(!1,d),c(!0,f)),imageSetList&&(imageSetList.blur(),f=Z.Utils.stringValidate(Z.imageSetListTitle)&&"none"!=Z.imageSetListTitle?1:0,imageSetList.selectedIndex=Z.viewportCurrentID+f)))};this.setVisibilityHotspotChoiceList=function(a,b){c(a,b)};this.sizeAndPositionImageSetList=function(){var a=parseInt(Z.Utils.getResource("z65"),10)+2,a=e(Z.imageSetListPosition,a,Z.viewerW,Z.viewerH);imageSetList.style.left=a.x+"px";imageSetList.style.top=a.y+"px"};this.initializeViewerKeyEventListeners=
function(a){a?(Z.Utils.addEventListener(document,"keydown",D),Z.Utils.addEventListener(document,"keyup",D)):(Z.Utils.removeEventListener(document,"keydown",D),Z.Utils.removeEventListener(document,"keyup",D))};this.initializeViewerKeyDefaultListeners=function(a){a?(Z.Utils.addEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.addEventListener(document,"keyup",Z.Utils.preventDefault)):(Z.Utils.removeEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.removeEventListener(document,
"keyup",Z.Utils.preventDefault))};this.autoResizeViewer=function(){A()};this.resizeViewer=function(a,b,c){H.setSizeAndPosition(a,b,0,0,!1);Z.viewportCurrent.resizeViewport(Z.imageX,Z.imageY,c,Z.imageR)};this.z586=function(a){Z.mouseWheelIsDown=!1;Z.mouseWheelCompleteTimer&&(window.clearTimeout(Z.mouseWheelCompleteTimer),Z.mouseWheelCompleteTimer=null,Z.zooming="stop",Z.viewportCurrent.updateView(!0))}};
Z.ZoomifyViewport=function(a,b,c,d){function e(v){v=Z.Utils.getResource("z209");".xml"!=Z.slidePath.toLowerCase().substring(Z.slidePath.length-4,Z.slidePath.length)&&(Z.slidePath=Z.slidePath+"/"+v);XMLPath=Z.Utils.cacheProofPath(Z.slidePath);"undefined"!==typeof XMLPath&&Z.Utils.stringValidate(XMLPath)&&(v=new Z.NetConnector,v.loadXML(XMLPath))}function f(v,a,b,x,c,d,wa,e,g,l,r){E();Z.imageW=v;Z.imageH=a;Z.imageCenterX=Z.imageW/2;Z.imageCenterY=Z.imageH/2;Oc=c;Ja=b;Oa=x;U();y(aa,W,te,ud);k.validateXYZDefaults();
eb>ue?($a=ja(mb,Z.initialZ),ba&&Da.scale($a,$a)):Da=ib=ba=null;Rb=ja(Ka,Z.initialZ);Zb=oa=ja(ea,Z.initialZ);if(Z.useCanvas)try{Ea.scale(oa,oa)}catch(f){Z.Utils.showMessage(Z.Utils.getResource("ERROR_SCALINGCANVASFORUNCONVERTEDIMAGE")),console.log("In function initializeViewportContinue scaling canvas:  "+f)}ya&&bf();Z.screensaver&&(Z.Utils.validateCallback("screensaverStarting"),Z.Utils.functionCallWithDelay(function(){k.tourStart()},750));R&&(k.setDrawingColor("buttonColor0"+La,!0),ve(La));Z.virtualPointerVisible&&
k.showVirtualPointer();"unconverted"!=Z.tileSource&&k.z619();Pc(Z.initialX,Z.initialY,Z.initialZ,Z.initialR,null,!0);Z.coordinatesVisible&&k.setCoordinatesDisplayVisibility(!0);Z.initialFullPage&&k.toggleFullViewMode(!0);Z.Utils.addEventListener(ha,"mousedown",ua);Z.Utils.addEventListener(ha,"mousemove",Z.Utils.preventDefault);Z.Utils.addEventListener(ha,"touchstart",ua);Z.Utils.addEventListener(ha,"touchmove",ua);Z.Utils.addEventListener(ha,"touchend",ua);Z.Utils.addEventListener(ha,"touchcancel",
ua);Z.Utils.addEventListener(ha,"gesturestart",ua);Z.Utils.addEventListener(ha,"gesturechange",ua);Z.Utils.addEventListener(ha,"gestureend",ua);Z.Utils.addEventListener(pa,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(qa,"contextmenu",Z.Utils.preventDefault);ya&&Z.Utils.addEventListener(ya,"contextmenu",Z.Utils.preventDefault);R&&Z.Utils.addEventListener(R,"contextmenu",Z.Utils.preventDefault);k.setStatus("initialized",!0);k.syncViewportRelated();Z.slideshow&&(v=Z.Utils.stringValidate(Z.slideListTitle)&&
"none"!=Z.slideListTitle?1:0,"undefined"!==typeof nb&&(nb.selectedIndex=v),Xd&&!Z.slideshowPlaying?k.slideshowStart():Z.slideshowPlaying&&k.nextSlide());"multiple"==Z.imagePath&&(v=Z.hotspots?"hotspotsLoadedViewer":Z.annotations?"annotationsLoadedViewer":null,null!==v&&Z.setCallback(v,function(){window.setTimeout(function(){Z.viewportCurrent.z623()},1500)}))}function h(v,a,b,x,c,d,wa,e,g,l,r){k.setStatus("initialized",!1);vd=wd=0;"undefined"!==typeof ab&&Z.Utils.arrayClear(ab);"undefined"!==typeof Ra&&
Z.Utils.arrayClear(Ra);"undefined"!==typeof lc&&Z.Utils.arrayClear(lc);"undefined"!==typeof mc&&Z.Utils.arrayClear(mc);"undefined"!==typeof za&&Z.Utils.arrayClear(za);"undefined"!==typeof fb&&Z.Utils.arrayClear(fb);"undefined"!==typeof $b&&Z.Utils.arrayClear($b);"undefined"!==typeof nc&&Z.Utils.arrayClear(nc);"undefined"!==typeof ac&&Z.Utils.arrayClear(ac);"undefined"!==typeof xb&&Z.Utils.arrayClear(xb);"undefined"!==typeof bc&&Z.Utils.arrayClear(bc);"undefined"!==typeof oc&&Z.Utils.arrayClear(oc);
"undefined"!==typeof Sa&&Z.Utils.arrayClear(Sa);"undefined"!==typeof yb&&Z.Utils.arrayClear(yb);"undefined"!==typeof Hb&&Z.Utils.arrayClear(Hb);ya&&("undefined"!==typeof cf&&Z.Utils.arrayClear(cf),"undefined"!==typeof df&&Z.Utils.arrayClear(df));R&&("undefined"!==typeof t&&Z.Utils.arrayClear(t),"undefined"!==typeof Ib&&Z.Utils.arrayClear(Ib),null!=fa?(fa.parentNode.removeChild(fa),fa=null,"undefined"!==typeof Jb&&Z.Utils.arrayClear(Jb)):(null!=Kb&&(Kb.parentNode.removeChild(Kb),Kb=null,"undefined"!==
typeof ob&&Z.Utils.arrayClear(ob)),null!=pc&&(pc.parentNode.removeChild(pc),pc=null,"undefined"!==typeof pb&&Z.Utils.arrayClear(pb),"undefined"!==typeof Sb&&Z.Utils.arrayClear(Sb)),null!=Yd&&(Yd.parentNode.removeChild(Yd),Yd=null,"undefined"!==typeof xd&&Z.Utils.arrayClear(xd),"undefined"!==typeof ef&&Z.Utils.arrayClear(ef))));ba&&Z.Utils.clearDisplay(ba);pa&&Z.Utils.clearDisplay(pa);qa&&Z.Utils.clearDisplay(qa);bb&&Z.Utils.clearDisplay(bb);ya&&Z.Utils.clearDisplay(ya);Lb&&Z.Utils.clearDisplay(Lb);
R&&(Z.Utils.clearDisplay(R),R=null);Ma&&Z.Utils.clearDisplay(Ma);Aa&&Z.Utils.clearDisplay(Aa);Z.imageW=v;Z.imageH=a;Z.imageCenterX=Z.imageW/2;Z.imageCenterY=Z.imageH/2;Oc=c;Ja=b;Oa=x;U();Z.Utils.setParameters(Z.parameters);D();E();k.validateXYZDefaults();eb>ue?($a=ja(mb,Z.initialZ),Da.restore(),Da.scale($a,$a)):ba=ib=Da=null;Rb=ja(Ka,Z.initialZ);Zb=oa=ja(ea,Z.initialZ);Z.useCanvas&&(Ea.restore(),Ea.scale(oa,oa));ya&&bf();R&&(k.setDrawingColor("buttonColor0"+La,!0),ve(La));Z.virtualPointerVisible&&
k.showVirtualPointer();"unconverted"!=Z.tileSource&&k.z619();k.setSizeAndPosition(aa,W,te,ud);Pc(Z.initialX,Z.initialY,Z.initialZ,Z.initialR,null,!0);k.setStatus("initialized",!0);Z.Navigator&&0<Z.navigatorVisible&&Z.Navigator.setImage(Z.imagePath);Z.slideshowPlaying&&k.nextSlide()}function m(){eb=1;Ka=ea=0;Ha=!1;"undefined"!==typeof gb&&Z.Utils.arrayClear(gb);"undefined"!==typeof qb&&Z.Utils.arrayClear(qb);"undefined"!==typeof Ta&&Z.Utils.arrayClear(Ta);"undefined"!==typeof rb&&Z.Utils.arrayClear(rb);
"undefined"!==typeof sb&&Z.Utils.arrayClear(sb);"undefined"!==typeof Qc&&Z.Utils.arrayClear(Qc);"undefined"!==typeof tierTileOffsetsCount&&Z.Utils.arrayClear(tierTileOffsetsCount);"undefined"!==typeof tierTileOffsetChunks&&Z.Utils.arrayClear(tierTileOffsetChunks);"undefined"!==typeof tierTileOffsetLast&&Z.Utils.arrayClear(tierTileOffsetLast);"undefined"!==typeof Ac&&Z.Utils.arrayClear(Ac);"undefined"!==typeof tierTileByteCountsCount&&Z.Utils.arrayClear(tierTileByteCountsCount);"undefined"!==typeof tierTileByteCountChunks&&
Z.Utils.arrayClear(tierTileByteCountChunks);"undefined"!==typeof tierTileByteCountLast&&Z.Utils.arrayClear(tierTileByteCountLast)}function D(v){if("undefined"===typeof v||null===v)v=0;v=v.toString();Z.useCanvas&&!ba&&(qc=Z.Utils.createContainerElement("canvas","oversizeDisplay"+v,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Z.ViewerDisplay.appendChild(qc),ba=qc,ib=ba.style);ha||(cb=Z.Utils.createContainerElement("div","viewportContainer"+
v,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Z.ViewerDisplay.appendChild(cb),ha=cb,F=ha.style);pa||(Rc=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportBackfillDisplay"+v,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),cb.appendChild(Rc),pa=Rc,ga=pa.style);qa||(ed=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportDisplay"+v,"inline-block",
"absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),cb.appendChild(ed),qa=ed,Fa=qa.style);Z.useCanvas&&!bb&&(fd=Z.Utils.createContainerElement("canvas","transitionCanvas","none","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),cb.appendChild(fd),bb=fd,cc=bb.style);Z.Utils.stringValidate(Z.watermarkPath)&&!ya&&(Sc=Z.Utils.createContainerElement("div","watermarkDisplay","inline-block","absolute","visible",
"1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),cb.appendChild(Sc),ya=Sc,rc=ya.style);Z.maskVisible&&(Z.hotspots||Z.annotations)&&!Lb&&(we=Z.Utils.createContainerElement("canvas","maskCanvas","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),cb.appendChild(we),Lb=we,Mb=Lb.style,Mb.display="none");if(Z.measureVisible||Z.tour&&!Z.screensaver||Z.hotspots||Z.annotations)(Z.annotations||Z.measureVisible)&&Z.useCanvas&&
!Ma&&(xe=Z.Utils.createContainerElement("canvas","drawingDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),cb.appendChild(xe),Ma=xe,Tb=Ma.style,null!==Z.editMode||Z.measureVisible&&!Aa)&&(ye=Z.Utils.createContainerElement("canvas","editingDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),cb.appendChild(ye),Aa=ye,Ub=Aa.style),R||(Tc=Z.Utils.createContainerElement("div",
"hotspotDisplay","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),cb.appendChild(Tc),R=Tc,dc=R.style,Z.Utils.addEventListener(Tc,"mousedown",Z.Utils.preventDefault));Z.useCanvas||(pa.innerHTML="",qa.innerHTML="");ya&&(ya.innerHTML="");R&&(R.innerHTML="")}function E(){ba&&(Da=ba.getContext("2d"));Nb=pa.getContext("2d");Ea=qa.getContext("2d");ec=bb.getContext("2d");Ma&&(Zd=Ma.getContext("2d"));Aa&&(Na=Aa.getContext("2d"))}function y(v,
a,b,x){if("undefined"===typeof b||null===b)b=0;if("undefined"===typeof x||null===x)x=0;Z.viewerW=aa=v;Z.viewerH=W=a;ma=aa*ff;na=W*ff;v=Z.imageSet?Qf:"unconverted"==Z.tileSource&&Z.browser==Z.browsers.FIREFOX?Rf:Sf;a=Z.constrainPanStrict?Z.imageW:2*Z.imageW;var c=Z.constrainPanStrict?Z.imageH:2*Z.imageH;ma>v&&(ma=v);na>v&&(na=v);ma>a&&(ma=a);na>c&&(na=c);ma<aa&&(ma=aa);na<W&&(na=W);zb=Z.Utils.roundToFixed(ma/2,4);Ab=Z.Utils.roundToFixed(na/2,4);Ua=Z.Utils.roundToFixed(-((ma-aa)/2)+b,4);Z.Utils.roundToFixed((ma-
aa)/2+b,4);Va=Z.Utils.roundToFixed(-((na-W)/2)+x,4);Z.Utils.roundToFixed((na-W)/2+x,4);ba&&(ba.width=aa,ba.height=W,ib.width=aa+"px",ib.height=W+"px",ib.left="0px",ib.top="0px");ha.width=ma;ha.height=na;F.width=ma+"px";F.height=na+"px";F.left=Ua+"px";F.top=Va+"px";qa.width=ma;qa.height=na;Fa.width=ma+"px";Fa.height=na+"px";ya&&(ya.width=ma,ya.height=na,rc.width=ma+"px",rc.height=na+"px");Lb&&(Lb.width=ma,Lb.height=na,Mb.width=ma+"px",Mb.height=na+"px");R&&(R.width=ma,R.height=na,dc.width=ma+"px",
dc.height=na+"px",ze&&(b=parseInt(Z.Utils.getResource("z133"),10),b=gf($d,b,aa,W),Ae.left=b.x+"px",Ae.top=b.y+"px"));Ma&&(Ma.width=ma,Ma.height=na,Tb.width=ma+"px",Tb.height=na+"px");Aa&&(Aa.width=ma,Aa.height=na,Ub.width=ma+"px",Ub.height=na+"px");Z.imageSet&&Z.Viewer.sizeAndPositionImageSetList();if(Z.useCanvas){ba&&(Da.translate(aa/2,W/2),Da.save());try{Ea.translate(zb,Ab)}catch(d){Z.Utils.showMessage(Z.Utils.getResource("ERROR_TRANSLATINGCANVASFORUNCONVERTEDIMAGE")),console.log("In function setSizeAndPosition translating canvas:  "+
d)}Ea.save();Lb&&(Be.translate(zb,Ab),Be.save());Ma&&(Zd.translate(zb,Ab),Zd.save());Aa&&(Na.translate(zb,Ab),Na.save())}}function A(v,a,b){if("ZoomifyImageFile"==Z.tileSource){b=parseFloat(Z.Utils.getResource("z125"));var x=parseFloat(Z.Utils.getResource("z124"));a.loadByteRange(v,b,x,"header")}else"ZoomifyImageFolder"==Z.tileSource&&(v=Z.Utils.cacheProofPath(v+"/ImageProperties.xml"),a.loadXML(v,b))}function H(v,a){m();if("undefined"===typeof k.getStatus)window.setTimeout(function(){H(v,a)},100);
else{var b=null,x=null,c=null,d=null,wa=null,e=null;"ZoomifyImageFolder"==Z.tileSource&&(b=parseInt(v.documentElement.getAttribute("WIDTH"),10),x=parseInt(v.documentElement.getAttribute("HEIGHT"),10),wa=parseInt(v.documentElement.getAttribute("NUMTILES"),10),parseInt(v.documentElement.getAttribute("NUMIMAGES"),10),e=parseInt(v.documentElement.getAttribute("VERSION"),10),c=d=parseInt(v.documentElement.getAttribute("TILESIZE"),10));null!==Z.tileW&&(c=Z.tileW);null!==Z.tileH&&(d=Z.tileH);if("ZoomifyImageFolder"==
Z.tileSource||"ImageServer"==Z.tileSource){if(null===c||isNaN(c))c=Ja;if(null===d||isNaN(d))d=Oa;if(null===wa||isNaN(wa))wa=1}!isNaN(b)&&0<b&&!isNaN(x)&&0<x&&!isNaN(c)&&0<c&&!isNaN(d)&&0<d&&0<wa?k.getStatus("initialized")?h(b,x,c,d,wa,e,null,null,null,null,null,a):f(b,x,c,d,wa,e,null,null,null,null,null,a):"ZoomifyImageFolder"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z252")):Z.Utils.showMessage(Z.Utils.getResource("z250"))}}function U(){if("unconverted"==Z.tileSource)gb[0]=Z.imageW,
qb[0]=Z.imageH,Ta[0]=1,rb[0]=1,eb=sb[0]=1;else if("ZoomifyImageFile"==Z.tileSource)for(var v=eb-1;0<=v;v--)Ta[v]=Math.ceil(gb[v]/Ja),rb[v]=Math.ceil(qb[v]/Oa),sb[v]=Ta[v]*rb[v];else{for(var v=Z.imageW,a=Z.imageH;v>Ja||a>Oa;)v/=2,a/=2,eb++;for(var v=Z.imageW,a=Z.imageH,b=0,x=eb-1;0<=x;x--)gb[x]=v,qb[x]=a,Ta[x]=Math.ceil(gb[x]/Ja),rb[x]=Math.ceil(qb[x]/Oa),sb[x]=Ta[x]*rb[x],v/=2,a/=2,b+=sb[x];if(b!=Oc&&("ZoomifyImageFolder"==Z.tileSource||"ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)){gb=
[];qb=[];Ta=[];rb=[];eb=1;v=Z.imageW;a=Z.imageH;for(b=2;v>Ja||a>Oa;)v=Math.floor(Z.imageW/b),a=Math.floor(Z.imageH/b),b*=2,v%2&&v++,a%2&&a++,eb++;v=Z.imageW;a=Z.imageH;b=2;tileCounter=0;for(x=eb-1;0<=x;x--)Ta[x]=Math.floor(v/Ja),v%Ja&&Ta[x]++,rb[x]=Math.floor(a/Oa),a%Oa&&rb[x]++,sb[x]=Ta[x]*rb[x],tileCounter+=sb[x],gb[x]=v,qb[x]=a,v=Math.floor(Z.imageW/b),a=Math.floor(Z.imageH/b),b*=2,v%2&&v++,a%2&&a++;v=tileCounter;v!=Oc&&Z.Utils.showMessage(Z.Utils.getResource("z254"))}}}function q(v,a){for(var b=
Ta[v]-1,x=rb[v]-1,c=0;c<=b;c++)for(var d=0;d<=x;d++)a[a.length]=v+"-"+c+"-"+d}function T(v){if(v){v=k.z542(Ka);Z.Utils.arrayClear(Ra);Z.Utils.arrayClear(lc);a=v.l;for(b=v.r;a<=b;a++)for(x=v.t,c=v.b;x<=c;x++)d=Ka+"-"+a+"-"+x,lc[lc.length]=d,Ra[Ra.length]=d;ra(Ra,X,"simple","image-backfill")}else{Z.Utils.arrayClear(mc);Z.Utils.arrayClear(nc);Z.Utils.arrayClear(ac);Z.Utils.arrayClear(za);v=k.z542();for(var a=v.l,b=v.r;a<=b;a++)for(var x=v.t,c=v.b;x<=c;x++){var d=ea+"-"+a+"-"+x;mc[mc.length]=d;za[za.length]=
d}if(k.getStatus("initialized")&&0<ab.length&&(ea==ae||ea==be||ea==yd))for(a=0,b=ab.length;a<b;a++)(x=ab[a])&&x.t==ea&&x.c>=v.l&&x.c<=v.r&&x.r>=v.t&&x.r<=v.b&&(ac[ac.length]=x.name,nc[nc.length]=x,c=Z.Utils.arrayIndexOf(za,x.name),-1!=c&&(za=Z.Utils.arraySplice(za,c,1)));a=0;for(b=fb.length;a<b;a++)(x=fb[a])&&x.t==ea&&x.c>=v.l&&x.c<=v.r&&x.r>=v.t&&x.r<=v.b&&(c=Z.Utils.arrayIndexOf(ac,x.name),-1==c&&(ac[ac.length]=x.name,nc[nc.length]=x),x=Z.Utils.arrayIndexOf(za,x.name),-1!=x&&(za=Z.Utils.arraySplice(za,
x,1)));if(0!=vd){a=0;for(b=xb.length;a<b;a++)x=xb[a],x.alpha=1;Z.Utils.arrayClear(xb);Z.Utils.arrayClear(bc)}wd=za.length;k.traceDebugValues("tilesToDisplay",null,mc.length,mc);k.traceDebugValues("tilesInCache",null,ac.length,ac);k.traceDebugValues("tilesToLoad",null,za.length,za)}}function K(v,a,b,x,c,d){c||Z.Utils.clearDisplay(v);if("canvasCopy"==x)Z.Utils.clearDisplay(qa),Ea.restore(),Ea.save(),Ea.scale(1,1),Ea.drawImage(bb,-zb,-Ab),Ea.restore(),Ea.save(),Ea.scale(oa,oa);else{c=k.z542(a);d=[];
if(null===b)for(var wa=0,e=nc.length;wa<e;wa++)d[wa]=nc[wa];else if(0<b.length)for(wa=0,e=b.length;wa<e;wa++){var g=b[wa];g&&g.t==a&&(a==Ka&&!Ha||g.c>=c.l&&g.c<=c.r&&g.r>=c.t&&g.r<=c.b)&&(d[d.length]=b[wa])}if(0<d.length)if(k.traceDebugValues("z622-"+v.id,null,null,d),"centerOut"==x)for(wa=Math.floor(d.length/2),e=d.length;wa<e;wa++)L(v,a,d[wa]),d.length-wa-1!=wa&&L(v,a,d[d.length-wa-1]);else for(wa=0,e=d.length;wa<e;wa++)L(v,a,d[wa]);else k.traceDebugValues("No cached tiles in view");k.traceDebugValues("blankLine")}}
function u(v,a){var b=k.z542();syncTransitionCanvas();for(var x=0,c=a.length;x<c;x++){var d=a[x];d&&d.t==v&&(v==Ka||d.c>=b.l&&d.c<=b.r&&d.r>=b.t&&d.r<=b.b)&&L(bb,v,d)}}function J(v){jb=null;jb=new Image;jb.onload=B;jb.onerror=G;jb.src=v}function B(){if("undefined"!==typeof jb){var v=Z.Utils.createContainerElement("div","testImageContainer","inline-block","absolute","hidden",aa+"px",W+"px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);v.appendChild(jb);v.removeChild(jb);
var v=null,v=jb.width,a=jb.height;k.setStatus("displayLoaded",!0);k.setStatus("displayDrawn",!0);0!=v&&0!=a?f(v,a,v,a,null,null,null,null,null,null,null):window.setTimeout(function(){B()},100)}else window.setTimeout(function(){B()},100)}function G(){Z.Utils.showMessage(Z.Utils.getResource("ERROR_UNCONVERTEDIMAGEPATHINVALID"))}function ra(v,a,b,x){var c="undefined"!==typeof x&&null!==x?"-"+x:"";if(0<v.length){k.traceDebugValues("z577"+c,null,null,v);c=(new Date).getTime();if("centerOut"==b&&4<v.length){var d=
[],e=0,g=0,l=0,r=0;for(b=0;b<v.length;b++){var f=v[b];f&&(f=new sa(f,x),d[d.length]=f,0==b?(e=g=f.c,l=r=f.r):(f.c<e?e=f.c:f.c>g&&(g=f.c),f.r<l?l=f.r:f.r>r&&(r=f.r)))}v=e+(g-e)/2;x=l+(r-l)/2;for(b=0;b<d.length;b++)d[b].r-=x,d[b].c-=v;d.sort(function(a,v){return a.r*a.r+a.c*a.c-(v.r*v.r+v.c*v.c)});for(b=0;b<d.length;b++)d[b].r+=x,d[b].c+=v,C(d[b],c,a)}else for(b=0,d=v.length;b<d;b++)if(f=v[b])f=new sa(f,x),C(f,c,a);k.traceDebugValues("blankLine")}else k.traceDebugValues("z577"+c,"No new tiles requested")}
function sa(a,b){this.name=a;var n=new ta(a);this.t=n.t;this.c=n.c;this.r=n.r;this.x=Math.floor(this.c*Ja);this.y=Math.floor(this.r*Oa);this.image=null;this.alpha=0;this.url=k.formatTilePath(this.t,this.c,this.r,b);this.style=this.elmt=this.loadTime=null}function ta(a){this.t=parseInt(a.substring(0,a.indexOf("-")),10);this.c=parseInt(a.substring(a.indexOf("-")+1,a.lastIndexOf("-")),10);this.r=parseInt(a.substring(a.lastIndexOf("-")+1),10)}function ia(a,b,n){n=b+n*Ta[a];b=8*n+Qc[a];n=Math.floor(n/
Ob);var x=n*Ob,x=x+Ob>sb[a]?8*(sb[a]-x):zd;this.chunkStart=Qc[a]+n*zd;this.chunkEnd=this.chunkStart+x;this.offsetStartInChunk=b-this.chunkStart;this.chunkID=a.toString()+"-"+n.toString()}function p(a,b,n){n=b+n*Ta[a];b=4*n+Ac[a];n=Math.floor(n/Ob);var x=n*Ob,x=x+Ob>sb[a]?4*(sb[a]-x):gd;this.chunkStart=Ac[a]+n*gd;this.chunkEnd=this.chunkStart+x;this.bcStartInChunk=b-this.chunkStart;this.chunkID=a.toString()+"-"+n.toString()}function xa(a,b){for(var n=0,x=Sa.length;n<x;n++){var c=Sa[n].split(",");c[0]==
a&&c[5]==b&&(void 0!==c[4]&&"image-display"==c[4]?yb[yb.length]=c[1]+"-"+c[2]+"-"+c[3]:"image-backfill"==c[4]&&(Hb[Hb.length]=c[1]+"-"+c[2]+"-"+c[3]),Sa=Z.Utils.arraySplice(Sa,n,1),n--,x--)}0<yb.length&&(yb.sort(),yb=Z.Utils.arrayUnique(yb),k.traceDebugValues("z637",yb),n=S,Za(yb,n,"simple","image-display"));0<Hb.length&&(Hb.sort(),Hb=Z.Utils.arrayUnique(Hb),n=X,Za(Hb,n,"simple","image-backfill"))}function Za(a,b,n,x){n=(new Date).getTime();for(var c=0,d=a.length;c<d;c++){var e=null;if(e=a[c])if(a=
Z.Utils.arraySplice(a,c,1),c--,d--,index=Z.Utils.arrayIndexOfObjectValue(oc,"name",e),-1!=index?(e=oc[index],oc=Z.Utils.arraySplice(oc,index,1),e.url=k.formatTilePath(e.t,e.c,e.r,x)):e=new sa(e,x),null!=e&&-1==e.url.indexOf("NaN"))k.traceDebugValues("z577Retry",e.name+"  "+e.url),C(e,n,b);else if(-1==e.url.indexOf("NaN")){var g=parseInt(Z.Utils.getResource("z268MEDIUM"),10);Z.Utils.showMessage(Z.Utils.getResource("z280-ZIF")+e.name+".jpg",!1,g,"center",!1)}}}function C(a,b,n){var c=a.name;if("z647"==
a.url.substr(0,8)){fc(a);b=a.name;n=Z.Utils.arrayIndexOf(za,b);-1!=n&&(za=Z.Utils.arraySplice(za,n,1));if("ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)n=Z.Utils.arrayIndexOf(yb,b),-1!=n&&(yb=Z.Utils.arraySplice(yb,n,1));xb[xb.length]=a;bc[bc.length]=b}else if("offsetLoading"==a.url)-1==Z.Utils.arrayIndexOfObjectValue(oc,"name",c)&&(oc[oc.length]=a),k.traceDebugValues("z581DelayForOffset",c);else if("offsetLoading"!=a.url){var d;n==S?d="image-display":n==X&&(d="image-backfill");
var va=a.t==ae&&hf||a.t==be&&jf||a.t==yd&&kf;"image-display"==d&&va||(a.loadTime=b,k.traceDebugValues("z581-"+d,c),Tf.loadImage(a.url,Z.Utils.createCallback(null,n,a),d,a))}}function S(a,b){if(a&&b){a.image=b;var n=a.name,c=Z.Utils.arrayIndexOf(za,n);if(-1!=c){za=Z.Utils.arraySplice(za,c,1);fc(a);-1==Z.Utils.arrayIndexOf(bc,n)&&(bc[bc.length]=n,xb[xb.length]=a);ce||(ce=window.setInterval(Ba,50));vd=za.length;if(0==vd){Z.useCanvas&&0<Vb&&(Ce?(u(ea,fb),K(qa,ea,fb,"canvasCopy",!1,"4. Updating view: all new tiles loaded"),
window.setTimeout(function(){Z.Utils.clearDisplay(bb)},200),Ce=!1):K(qa,ea,fb,"centerOut",!1,"4. Updating view: all new tiles loaded"));for(;$b.length>Vb&&fb.length>Vb;)$b=Z.Utils.arraySplice($b,0,1),fb=Z.Utils.arraySplice(fb,0,1);wd=0}k.traceDebugValues("onTileLoad",a.name,a.loadTime);k.updateProgress(wd,vd)}de==ee+Bc&&k.setStatus("displayLoaded",!0)}else"undefined"!==typeof b&&null!==b||console.log(Z.Utils.getResource("z280")+a.name+".jpg")}function X(a,b){if(a&&b){a.image=b;var n=a.name;ab[ab.length]=
a;var c=Z.Utils.arrayIndexOf(Ra,n);-1!=c&&(Ra=Z.Utils.arraySplice(Ra,c,1));if("ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)n=Z.Utils.arrayIndexOf(Hb,n),-1!=n&&(Hb=Z.Utils.arraySplice(Hb,n,1));a.alpha=1;a.t==Ka&&L(pa,Ka,a);k.traceDebugValues("onTileBackfillPrecache",a.name);lf==De&&k.setStatus("precacheLoaded",!0);k.traceDebugValues("z599",a.name);Ee<=0+Fe&&k.setStatus("backfillLoaded",!0);a.t==ea&&S(a,b)}else if("undefined"===typeof b||null===b)Z.mobileDevice?console.log(Z.Utils.getResource("z280")+
a.name+".jpg"):Z.Utils.showMessage(Z.Utils.getResource("z280")+a.name+".jpg")}function Ba(a){for(var b=a=0,n=xb.length;b<n;b++){var c=xb[b];c.t==ea?(0!=Ge&&1>c.alpha+Ge?c.alpha+=Ge:(c.alpha=1,a++),L(qa,ea,c),a>=n&&(window.clearInterval(ce),ce=null,b=n)):(xb=Z.Utils.arraySplice(xb,b,1),bc=Z.Utils.arraySplice(bc,b,1),c=Z.Utils.arrayIndexOf(za,c.name),-1!=c&&(za=Z.Utils.arraySplice(za,c,1)),n--)}}function L(a,b,n){if("z647"!=n.url.substr(0,8)&&0!=n.image.width&&0!=n.image.height){var c=n.x,d=n.y;b=Y(b,
1);$a=ja(mb,k.getZoom());var va=8<$a;Z.useCanvas?(a==qa||a==bb||a==pa&&Ha?(c-=Z.imageX*b,d-=Z.imageY*b):a==ba&&(Ha||va)&&(va=k.calculateCurrentCenterCoordinates(),c-=va.x*b,d-=va.y*b),b=a.getContext("2d"),Z.alphaSupported&&1>n.alpha&&"transitionCanvas"!=a.id&&-1==a.id.indexOf("oversizeDisplay")&&(b.globalAlpha=n.alpha),b.drawImage(n.image,c,d),Z.alphaSupported&&1>n.alpha&&"transitionCanvas"!=a.id&&"oversizeDisplay"!=a.id&&(b.globalAlpha=1),2==Z.debug&&I(a,n.name,c,d,oa)):(a==qa?(c-=Z.imageX*b-zb/
oa,d-=Z.imageY*b-Ab/oa,b=oa):b=Rb,n.elmt||(n.elmt=Z.Utils.createContainerElement("img"),n.elmt.onmousedown=Z.Utils.preventDefault,Z.Utils.addEventListener(n.elmt,"contextmenu",Z.Utils.preventDefault),n.elmt.src=n.url,n.style=n.elmt.style,n.style.position="absolute",Z.Utils.renderQuality(n,Z.renderQuality),Z.cssTransformsSupported&&(n.style[Z.cssTransformProperty+"Origin"]="0px 0px")),n.elmt.parentNode!=a&&a.appendChild(n.elmt),va=n.style,va.display="none",Z.cssTransformsSupported?va[Z.cssTransformProperty]=
["matrix(",(n.image.width/n.elmt.width*b).toFixed(8),",0,0,",(n.image.height/n.elmt.height*b).toFixed(8),",",(c*b).toFixed(8),Z.cssTransformNoUnits?",":"px,",(d*b).toFixed(8),Z.cssTransformNoUnits?")":"px)"].join(""):(va.width=n.image.width*b+"px",va.height=n.image.height*b+"px",va.left=c*b+"px",va.top=d*b+"px"),va.display="inline-block",Z.Utils.setOpacity(n,n.alpha),2==Z.debug&&I(a,n.name,c,d,b));a==qa?(k.traceDebugValues("z507",n.name),de==Ad&&k.setStatus("displayDrawn",!0)):(k.traceDebugValues("displayBackfillTile",
n.name),Ee<=He&&k.setStatus("backfillDrawn",!0))}}function I(a,b,n,c,d){if(Z.useCanvas){var va=parseInt(Z.Utils.getResource("z129"),10),e=parseInt(Z.Utils.getResource("z160"),10),g=parseInt(Z.Utils.getResource("z151"),10),va=Math.round(va*d),e=2*(va<e?e:va>g?g:va);a=a.getContext("2d");a.font=e+"px verdana";a.textAlign="left";a.textBaseline="top";e=Ja*d/2;d=Oa*d/2;a.fillStyle="#FFFFFF";a.fillText(b,n+e,c+d);a.fillStyle="#000000";a.fillText(b,n+e+1,c+d+1)}else{var va=parseInt(Z.Utils.getResource("z129"),
10),e=parseInt(Z.Utils.getResource("z160"),10),g=parseInt(Z.Utils.getResource("z151"),10),va=Math.round(va*d),f=2*(va<e?e:va>g?g:va),e=parseInt(Z.Utils.getResource("z130"),10)*d,g=Z.Utils.createContainerElement("div","tileNameTextBox","inline-block","absolute","hidden","auto","auto","1px","1px","none","0px","transparent none","0px",e+"px","nowrap"),va=document.createTextNode(b);g.appendChild(va);a.appendChild(g);Z.Utils.setTextNodeStyle(va,"white","verdana",f+"px","none","normal","normal","normal",
"normal","1em","center","none");var l=Z.Utils.createContainerElement("div","tileNameTextBox2","inline-block","absolute","hidden","auto","auto","1px","1px","none","0px","transparent none","0px",e+"px","nowrap"),r=document.createTextNode(b);l.appendChild(r);a.appendChild(l);Z.Utils.setTextNodeStyle(r,"black","verdana",f+"px","none","normal","normal","normal","normal","1em","center","none");e=parseFloat(g.style.padding);a=parseFloat(Z.Utils.getElementStyleProperty(g,"width"));isNaN(a)&&(a=parseFloat(Z.Utils.getResource("z115")),
a=parseFloat(g.style.fontSize)/a,a=Math.round(parseFloat(b.length*a)));b=Ja*d/2;f=Oa*d/2;g.style.left=n*d+(b-a/2-e)+"px";g.style.top=c*d+f+"px";l.style.left=1+n*d+(b-a/2-e)+"px";l.style.top=1+c*d+f+"px";Z.Utils.addEventListener(g,"contextmenu",Z.Utils.preventDefault);Z.Utils.disableTextInteraction(va);Z.Utils.addEventListener(l,"contextmenu",Z.Utils.preventDefault);Z.Utils.disableTextInteraction(r)}}function O(a,b){var n=Y(b,1),c=Math.floor(a.l*n/Ja),d=Math.floor(a.r*n/Ja),e=Math.floor(a.t*n/Oa),
n=Math.floor(a.b*n/Oa);0>c&&(c=0);d>Ta[b]-1&&(d=Ta[b]-1);0>e&&(e=0);n>rb[b]-1&&(n=rb[b]-1);this.l=c;this.r=d;this.t=e;this.b=n}function V(a,b,n,c,d,e,g){this.l=a+n/g;this.r=a+c/g;this.t=b+d/g;this.b=b+e/g}function M(a,b){var n=a-Z.Utils.getElementPosition(Z.ViewerDisplay).x,c=b-Z.Utils.getElementPosition(Z.ViewerDisplay).y;return new Z.Utils.Point(n,c)}function ka(a,b,n,c){if("undefined"===typeof n||null===n)n=Z.imageZ;if("undefined"===typeof c||null===c)c=Z.imageR;0>c&&(c+=360);var d=parseFloat(F.left)+
zb,e=parseFloat(F.top)+Ab;a-=d;b-=e;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(a,b,c),a=viewportClickPt.x,b=viewportClickPt.y);return new Z.Utils.Point(Z.imageX+a/n,Z.imageY+b/n)}function da(a,b,n,c){if("undefined"===typeof n||null===n)n=Z.imageZ;if("undefined"===typeof c||null===c)c=Z.imageR;0>c&&(c+=360);a=(Z.imageX-a)*n;b=(Z.imageY-b)*n;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(a,b,-c),a=viewportClickPt.x,b=viewportClickPt.y);return new Z.Utils.Point(Ua+a,Va+b)}function Y(a,b){return gb[a]/
Z.imageW*b}function ja(a,b){return b/(gb[a]/Z.imageW)}function la(a,b,n,c,d){if(Z.constrainPan){c=Math.round(c);var e=a,g=b;n="undefined"!==typeof n&&null!==n?n:Z.imageZ;c="undefined"!==typeof c&&null!==c?c:Z.imageR;0>c&&(c+=360);var f=Z.Utils.getDisplayPositionRotated(F,c),l=Z.imageW,r=Z.imageH,k=aa,h=W,m=Math.round(l*n),p=Math.round(r*n);if("container"==d){var q=n,u=c;if("undefined"===typeof q||null===q)q=Z.imageZ;if("undefined"===typeof u||null===u)u=Z.imageR;0>u&&(u+=360);a=(Ua-a)/q;b=(Va-b)/
q;var P,t;switch(u){case 0:P=Z.imageX+a;t=Z.imageY+b;break;case 90:P=Z.imageX+b;t=Z.imageY-a;break;case 180:P=Z.imageX-a;t=Z.imageY-b;break;case 270:P=Z.imageX-b,t=Z.imageY+a}b=new Z.Utils.Point(P,t);a=b.x;b=b.y}u=Z.constrainPanStrict?0:k/2/n;t=Z.constrainPanStrict?0:h/2/n;P=(k+f.y)/2/n-u;u=l-(k+f.y)/2/n+u;q=(h+f.x)/2/n-t;f=r-(h+f.x)/2/n+t;a=(0==c||180==c)&&m>k||(90==c||270==c)&&m>h||!Z.constrainPanStrict?a<=P?P:a>=u?u:a:l/2;b=(0==c||180==c)&&p>h||(90==c||270==c)&&p>k||!Z.constrainPanStrict?b<=q?
q:b>=f?f:b:r/2;if("container"==d){var w;d=n;n=c;if("undefined"===typeof d||null===d)d=Z.imageZ;if("undefined"===typeof n||null===n)n=Z.imageR;0>n&&(n+=360);var B;switch(n){case 0:w=a-Z.imageX;B=b-Z.imageY;break;case 90:w=Z.imageY-b;B=a-Z.imageX;break;case 180:w=Z.imageX-a;B=Z.imageY-b;break;case 270:w=b-Z.imageY,B=Z.imageX-a}w=new Z.Utils.Point(Ua-w*d,Va-B*d);a=w.x;b=w.y}a==e&&b==g||Z.Utils.validateCallback("panConstrained")}return new Z.Utils.Point(a,b)}function Bb(a){a>Z.maxZ?(a=Z.maxZ,Z.Utils.validateCallback("zoomConstrainedMax")):
a<Z.minZ&&(a=Z.minZ,Z.Utils.validateCallback("zoomConstrainedMin"));return a}function g(a){a=90*Math.round(Math.abs(a)/90)*Z.Utils.getSign(a);-360>=a?a+=360:360<=a&&(a-=360);return a}function fc(a){if(0<Vb){var b=Z.Utils.arrayIndexOf($b,a.name);-1!=b&&($b=Z.Utils.arraySplice($b,b,1),fb=Z.Utils.arraySplice(fb,b,1));$b[$b.length]=a.name;fb[fb.length]=a}}function r(){window.clearTimeout(hd);hd=null;Uc=((new Date).getTime()-tilesTimeStart)/1E3;var a=fe*Uc,a=Cc&&Bc<a,b=Cc&&Bc>=Bd;if(2==Z.debug||3==Z.debug)Z.Utils.trace("View validation-time elapsed: "+
Uc),0<Cc&&(a?Z.Utils.trace("Loading delay - re-calling updateView"):b?Z.Utils.trace("Display delay - re-calling updateView"):Z.Utils.trace("Progress slow, resetting timer")),Z.Utils.trace(""),Z.traces.scrollTop=Z.traces.scrollHeight,Z.Utils.traceTileSpeed(Uc,fe);0<Cc?ge<Uf?a||b?(ge+=1,k.updateView(!0)):hd=window.setTimeout(r,mf):console.log(Z.Utils.getResource("ERROR_VALIDATEVIEW")):(ge=0,Z.Utils.validateCallback("viewUpdateComplete"),Z.Utils.validateCallback("viewUpdateCompleteGetLabelIDs"))}function l(){Z.Utils.showMessage(Z.Utils.getResource("z291")+
this.url,!0)}function P(a){if((a=Z.Utils.event(a))&&Q){Z.Utils.removeEventListener(Q,"mousedown",P);Z.Utils.addEventListener(Z.ViewerDisplay,"mousemove",he);Z.Utils.addEventListener(Z.ViewerDisplay,"mouseup",nf);var b=Z.Utils.getMousePosition(a);Wa=new Z.Utils.Point(b.x,b.y);a=M(a.clientX,a.clientY);var b=Z.Utils.getPageScroll(),b=new Z.Utils.Point(a.x-Ua+b.x,a.y-Va+b.y),n=new Z.Utils.Point(parseFloat(Q.style.left),parseFloat(Q.style.top));a=b.x-n.x;b=b.y-n.y;Q.mouseXPrior=Wa.x;Q.mouseYPrior=Wa.y;
Q.mouseXOffset=a;Q.mouseYOffset=b}}function he(a){if((a=Z.Utils.event(a))&&Q){a=Z.Utils.getMousePosition(a);hb=new Z.Utils.Point(a.x,a.y);var b=hb.x-Q.mouseXPrior,n=hb.y-Q.mouseYPrior;Q.mouseXPrior=hb.x;Q.mouseYPrior=hb.y;a=Q.style;b=parseFloat(a.left)+b;n=parseFloat(a.top)+n;a.left=b+"px";a.top=n+"px"}}function nf(a){if((a=Z.Utils.event(a))&&Q){a=Z.Utils.getMousePosition(a);a=Z.mouseOutDownPoint?Z.mouseOutDownPoint:new Z.Utils.Point(a.x,a.y);Z.Utils.removeEventListener(Z.ViewerDisplay,"mousemove",
he);Z.Utils.removeEventListener(Z.ViewerDisplay,"mouseup",nf);Z.Utils.addEventListener(Q,"mousedown",P);var b=a.x-Q.mouseXPrior,n=a.y-Q.mouseYPrior;a=Q.style;b=parseFloat(a.left)+b;n=parseFloat(a.top)+n;a.left=b+"px";a.top=n+"px"}}function Vf(a){if(a=Z.Utils.event(a))if(a.preventDefault(),!Z.interactivityOff&&Q&&(a=Z.Utils.getFirstTouch(a)))a=new Z.Utils.Point(a.pageX,a.pageY),Wa=new Z.Utils.Point(a.x,a.y),Q.mouseXPrior=a.x,Q.mouseYPrior=a.y}function Wf(a){if(a=Z.Utils.event(a)){a.preventDefault();
if(Z.interactivityOff||!Z.mousePan)return;if(Q&&(a=Z.Utils.getFirstTouch(a))){a=new Z.Utils.Point(a.pageX,a.pageY);var b=Q.style,n=parseFloat(b.left),c=parseFloat(b.top);b.left=n+(a.x-Q.mouseXPrior)+"px";b.top=c+(a.y-Q.mouseYPrior)+"px";Q.mouseXPrior=a.x;Q.mouseYPrior=a.y}}return!1}function Xf(a){if(a=Z.Utils.event(a))if(a.preventDefault(),!Z.interactivityOff&&Q&&(a=Z.Utils.getFirstTouch(a))){a=new Z.Utils.Point(a.pageX,a.pageY);a=new Z.Utils.Point(a.x,a.y);var b=a.x-Q.mouseXPrior,n=a.y-Q.mouseYPrior;
a=Q.style;b=parseFloat(a.left)+b;n=parseFloat(a.top)+n;a.left=b+"px";a.top=n+"px"}}function Yf(a){if(a=Z.Utils.event(a))if(a.preventDefault(),!Z.interactivityOff&&Q&&(a=Z.Utils.getFirstTouch(a))){a=new Z.Utils.Point(a.pageX,a.pageY);a=new Z.Utils.Point(a.x,a.y);var b=a.x-Q.mouseXPrior,n=a.y-Q.mouseYPrior;a=Q.style;b=parseFloat(a.left)+b;n=parseFloat(a.top)+n;a.left=b+"px";a.top=n+"px"}}function bf(){Dc=new Image;of=parseFloat(Z.Utils.getResource("z234"));Dc.url=Z.watermarkPath;Dc.onload=pf;Dc.onerror=
Zf;Dc.src=Z.watermarkPath}function pf(){if(ya)for(var a=parseFloat(Z.Utils.getResource("z235")),b=parseFloat(Z.Utils.getResource("z237")),n=parseFloat(Z.Utils.getResource("z236")),c=k.getZoom(),d=(Z.imageW*c-ya.width)/2,e=(Z.imageH*c-ya.height)/2,g=(Z.imageW/2-Z.imageX)*c,f=(Z.imageH/2-Z.imageY)*c,l=c<a?a:c,b=Math.round(Z.imageW/b),n=Math.round(Z.imageH/n),a=k.z541(),r=Dc.width*l,l=Dc.height*l,h=0,m=0,u=1;u<=b;u++)for(var q=1;q<=n;q++){var p=Math.round(Z.imageW/(b+1)*u),P=Math.round(Z.imageH/(n+1)*
q);if(p>a.l&&p<a.r&&P>a.t&&P<a.b){var t=Math.round(p*c-r/2-d+g),w=Math.round(P*c-l/2-e+f);if(4E3<Z.imageW){P=m+100;if(t<h+100&&w<P)continue;h=t;m=w}var P=r,p=l,B=w,w=Dc.cloneNode(!1);Z.Utils.setOpacity(w,of);w.width=P;w.height=p;P=Z.Utils.createContainerElement("div","wiC","inline-block","absolute","hidden",P+"px",p+"px",t+"px",B+"px","none","0px","transparent none","0px","0px","normal");P.appendChild(w);ya.appendChild(P);Z.Utils.addEventListener(w,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(w,
"mousedown",Z.Utils.preventDefault)}}}function Zf(){Z.Utils.showMessage(Z.Utils.getResource("z292")+this.url)}function $f(a,b,n,c){var d,e,g=a.z/100;c=(c?1:b.currentZ)/g;c=c<b.constrainedScaleMin?b.constrainedScaleMin:c>b.constrainedScaleMax?b.constrainedScaleMax:c;"text"==a.mediaType?(b=new Cb,g=a.z/100,hCaption=ie(a,b),R.appendChild(hCaption),b=new qf(hCaption,g,!0),R.removeChild(hCaption),d=b.w,e=b.h):"icon"==a.mediaType?(d=a.iW,e=a.iH):"polygon"==a.mediaType&&(b=Z.Utils.polygonDimensions(a.polygonPts,
n),d=b.x,e=b.y);d=a.xScale/100*d*c;e=a.yScale/100*e*c;this.w=d;this.h=e}function ve(a){if(Z.Utils.stringValidate(tb))if(Z.simplePath)dataPath=tb;else{if(".xml"!=tb.toLowerCase().substring(tb.length-4,tb.length)){var b=Z.tour?Z.Utils.getResource("z227"):Z.Utils.getResource("z135");tb=tb+"/"+b}dataPath=Z.Utils.cacheProofPath(tb)}"undefined"!==typeof dataPath&&Z.Utils.stringValidate(dataPath)&&(vpIDTemp=Z.imageSet?a:null,a=new Z.NetConnector,-1!=dataPath.toLowerCase().indexOf(".xml")&&a.loadXML(dataPath,
vpIDTemp))}function rf(a,b){var n=Z.Utils.arrayIndexOfObjectValue(Ib,"media",a.media);if(-1!=n){var c=new Image;c.src=a.media;var d=c.width,c=c.height;Ib[n].element&&(a.image=Ib[n].element.cloneNode(!1));a.iW=d;a.iH=c;b&&(n=new Cb,Ec(a,n))}else Ib[Ib.length]={media:a.media,element:null},n=(new Date).getTime(),d=a.media,ag.loadImage(d,Z.Utils.createCallback(null,bg,d,n),"hotspot")}function cg(a){var b;b=a.getAttribute("ID");this.id=""!=b?b:Wb("labelExternal");b=a.getAttribute("INTERNALID");this.internalID=
isNaN(parseInt(b))?fa?Wb("hotspot"):Wb("label"):b;this.poiID=a.getAttribute("POIID");b=a.getAttribute("NAME");this.name=""!=b?b:this.id;this.mediaType=a.getAttribute("MEDIATYPE");this.media=a.getAttribute("MEDIA");this.iH=this.iW=this.image=null;b=parseFloat(a.getAttribute("X"));this.x=isNaN(b)?0:b;b=parseFloat(a.getAttribute("Y"));this.y=isNaN(b)?0:b;b=parseFloat(a.getAttribute("ZOOM"));this.z=isNaN(b)?-1:b;b=parseFloat(a.getAttribute("XSCALE"));this.xScale=isNaN(b)?100:b;b=parseFloat(a.getAttribute("YSCALE"));
this.yScale=isNaN(b)?100:b;this.clickURL=a.getAttribute("CLICKURL");this.urlTarget=a.getAttribute("URLTARGET");b=a.getAttribute("ROLLOVER");this.rollover="1"==b||"true"==b;this.caption=a.getAttribute("CAPTION");this.comment=a.getAttribute("COMMENT");this.tooltip=a.getAttribute("TOOLTIP");this.user=a.getAttribute("USER");this.date=a.getAttribute("DATE");this.textColor=a.getAttribute("TEXTCOLOR");this.backColor=a.getAttribute("BACKCOLOR");this.lineColor=a.getAttribute("LINECOLOR");this.fillColor=a.getAttribute("FILLCOLOR");
b=a.getAttribute("TEXTVISIBLE");this.textVisible="false"!=b&&"0"!=b&&Z.captionTextVisible;b=a.getAttribute("BACKVISIBLE");this.backVisible="false"!=b&&"0"!=b&&Z.captionBackVisible;b=a.getAttribute("LINEVISIBLE");this.lineVisible="false"!=b&&"0"!=b&&Z.polygonLineVisible;b=a.getAttribute("FILLVISIBLE");this.fillVisible="false"!=b&&"0"!=b&&Z.polygonFillVisible;b=a.getAttribute("CAPTIONPOSITION");this.captionPosition=Z.Utils.stringValidate(b)?b:"8";b=a.getAttribute("SAVED");this.saved=null===b?!0:b;this.visibility=
!0;b=a.getElementsByTagName("CAPTION");0<b.length&&(this.captionHTML=unescape(Z.Utils.xmlConvertDocToText(b[0])));b=a.getElementsByTagName("TOOLTIP");0<b.length&&(this.tooltipHTML=unescape(Z.Utils.xmlConvertDocToText(b[0])));if(("freehand"==a.getAttribute("MEDIA")||"rectangle"==a.getAttribute("MEDIA")||"polygon"==a.getAttribute("MEDIA")||"measure"==a.getAttribute("MEDIA"))&&0<a.getElementsByTagName("POLYGON").length){b=a.getElementsByTagName("POLYGON")[0];this.polyClosed="0"!=b.getAttribute("CLOSED");
b=b.getElementsByTagName("POINT");for(var n=[],c=0,d=b.length;c<d;c++){var e=parseFloat(b[c].getAttribute("X")),e=isNaN(e)?0:e,g=parseFloat(b[c].getAttribute("Y")),g=isNaN(g)?0:g;n[n.length]={x:e,y:g}}this.polygonPts=n}this.audio=a.getAttribute("AUDIO");Z.Utils.stringValidate(this.audio)&&(Z.audioContent=!0);b=parseFloat(a.getAttribute("SHOWFOR"));this.showFor=isNaN(b)?0:b;this.transition=a.getAttribute("TRANSITION");b=parseFloat(a.getAttribute("CHANGEFOR"));this.changeFor=isNaN(b)?0:b;b=parseFloat(a.getAttribute("ROTATION"));
this.rotation=isNaN(b)?0:b;this.category=a.getAttribute("CATEGORY");this.zIndex=t.length.toString()}function bg(a,b,n){if(a&&b&&n){b=new Cb;for(var c=0,d=t.length;c<d;c++){var e=t[c];if(e.media==a){var g=Z.Utils.arrayIndexOfObjectValue(Ib,"media",a);-1!=g?Ib[g].element=n:Ib[Ib.length]={media:a,element:n};e.image=n.cloneNode(!1);e.iW=n.width;e.iH=n.height;Ec(e,b)}}}else Z.Utils.showMessage(Z.Utils.getResource("z248"))}function Xb(){R&&k.getStatus("initialized")&&(Z.Utils.clearDisplay(R),Ma&&Z.Utils.clearDisplay(Ma),
Aa&&Z.Utils.clearDisplay(Aa),"inline-block"==dc.display&&w())}function w(){for(var a=new Cb,b=0,n=t.length;b<n;b++)Ec(t[b],a);0==R.childNodes.length&&(a=Z.Utils.createContainerElement("div","hotspotImmortal","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),R.appendChild(a))}function Ec(a,b){if(0<Cd.length){var n=Z.Utils.arrayIndexOf(Cd,a.id);if(-1==n)return}else if(0<Dd.length&&(n=Z.Utils.arrayIndexOf(Dd,a.internalID),-1==n))return;
"polygon"==a.media&&(!Z.hotspotsDrawOnlyInView||a.x+Fc>b.box.l&&a.x-Fc<b.box.r&&a.y+Fc>b.box.t&&a.y-Fc<b.box.b)&&Vc(a);(!Z.hotspotsDrawOnlyInView||a.x>b.box.l&&a.x<b.box.r&&a.y>b.box.t&&a.y<b.box.b)&&sf(a,b,null,Z.mouseIsDown&&0==a.rollover)}function sf(a,b,n,c){-1!=Z.Utils.arrayIndexOfObjectValue(t,"internalID",a.internalID)&&tf(a.internalID);Z.useCanvas&&"polygon"==a.media&&a.polygonPts&&(n=Z.Utils.polygonDimensions(a.polygonPts,n),a.iW=n.x,a.iH=n.y);n=!Z.Utils.stringValidate(a.media);var d=!Z.Utils.stringValidate(a.caption)&&
!Z.Utils.stringValidate(a.captionHTML)&&"measure"!=a.mediaType,e=null===a.iW||null===a.iH,g="polygon"!=a.media;if(!(n&&d&&e&&g)){e=b.currentZ/("polygon"!=a.media?a.z/100:1);"polygon"!=a.media&&(0<b.constrainedScaleMin&&e<b.constrainedScaleMin&&(e=b.constrainedScaleMin),0<b.constrainedScaleMax&&e>b.constrainedScaleMax&&(e=b.constrainedScaleMax));n=a.xScale/100*e*a.iW;var e=a.yScale/100*e*a.iH,f;"placeholder"!=a.media&&a.image&&(f=a.image,f.align="top",f.width=n,f.height=e);var l=Math.round(a.x*b.currentZ-
n/2-b.displayOffsetL+b.imageOffsetL),r=Math.round(a.y*b.currentZ-e/2-b.displayOffsetT+b.imageOffsetT),h=g=null;d||(Z.captionBoxes||"measure"==a.mediaType?g=ie(a,b):(h=ie(a,b,!0,!0),g=ie(a,b,!0,!1)));b=Z.Utils.createContainerElement("div","hCloak","inline-block","absolute","visible");l=Z.Utils.createContainerElement("div","hot"+a.internalID.toString(),"inline-block","absolute","visible",n+"px",e+"px",l+"px",r+"px","none","0px","transparent none","0px","0px","normal");"TOOLTIP"==uf?l.title=Z.Utils.stringValidate(a.tooltip)?
a.tooltip:"":"COMMENT"==uf&&(l.title=Z.Utils.stringValidate(a.comment)?a.comment:"");if(!Z.labelClickSelect&&Z.Utils.stringValidate(a.clickURL)){if(null!==Z.editMode)Z.Utils.addEventListener(b,"mousedown",Ie),Z.Utils.addEventListener(b,"touchstart",Wc);else if("function"==a.clickURL)Z.Utils.addEventListener(l,"mousedown",gc),Z.Utils.addEventListener(l,"touchstart",gc);else{if(f){var m=document.createElement("a");m.setAttribute("href",a.clickURL);m.setAttribute("target",a.urlTarget);m.setAttribute("outline",
"none");m.appendChild(f);f.style.cursor="help";f.style.border="none"}if(g){var u=document.createElement("a");u.setAttribute("href",a.clickURL);u.setAttribute("target",a.urlTarget);u.setAttribute("outline","none");h&&(u.appendChild(h),h.style.cursor="help");u.appendChild(g);g.style.cursor="help"}b.style.border="none"}null===Z.editMode&&(Z.clickZoom||Z.clickPan)&&(Z.Utils.addEventListener(b,"mousedown",Je),Z.Utils.addEventListener(b,"touchstart",Xc))}!Z.labelClickSelect&&Z.Utils.stringValidate(a.clickURL)&&
null===Z.editMode&&"function"!=a.clickURL?(m&&b.appendChild(m),u&&b.appendChild(u)):(f&&b.appendChild(f),h&&b.appendChild(h),g&&b.appendChild(g));l.appendChild(b);R.appendChild(l);l.zIndex=a.zIndex;d||!Z.captionBoxes&&"measure"!=a.mediaType||!(u=a.backColor.toString())||(f=Z.Utils.hexToRGB(u).r,m=Z.Utils.hexToRGB(u).g,u=Z.Utils.hexToRGB(u).b,g.style.backgroundColor="rgba("+f+","+m+","+u+","+dg+")");a.rollover&&(b.rollover=a.rollover);l.internalID=a.internalID;c||k.setHotspotVisibility(l,!a.rollover&&
a.visibility);h&&vf(a,h,n,e,!0);vf(a,g,n,e);a.rollover&&(Z.Utils.addEventListener(l,"mouseover",jd),Z.Utils.addEventListener(l,"mouseout",je));Z.Utils.addEventListener(l,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(l,"contextmenu",Z.Utils.preventDefault)}}function Cb(a){R&&(this.box=k.z541(a),this.currentZ=k.getZoom(),this.constrainedScale=this.currentZ<Ed?Ed:this.currentZ>Fd?Fd:this.currentZ,this.constrainedScaleMax=Fd,this.constrainedScaleMin=Ed,this.displayOffsetL=(Z.imageW*this.currentZ-
R.width)/2,this.displayOffsetT=(Z.imageH*this.currentZ-R.height)/2,this.imageOffsetL=(Z.imageW/2-Z.imageX)*this.currentZ,this.imageOffsetT=(Z.imageH/2-Z.imageY)*this.currentZ)}function Yc(a){if("undefined"===typeof a||null===a)a=document.getElementById("progressTextBox");var b=null;-1!=a.id.indexOf("hot")&&-1==a.id.indexOf("hotspotDisplay")?b=a:a.parentNode&&-1!=a.parentNode.id.indexOf("hot")&&-1==a.parentNode.id.indexOf("hotspotDisplay")?b=a.parentNode:a.parentNode.parentNode&&-1!=a.parentNode.parentNode.id.indexOf("hot")&&
-1==a.parentNode.parentNode.id.indexOf("hotspotDisplay")?b=a.parentNode.parentNode:a.parentNode.parentNode.parentNode&&-1!=a.parentNode.parentNode.parentNode.id.indexOf("hot")&&-1==a.parentNode.parentNode.parentNode.id.indexOf("hotspotDisplay")&&(b=a.parentNode.parentNode.parentNode);return b}function ie(a,b,n,c){var d=b.currentZ/(a.z/100);0<b.constrainedScaleMin&&d<b.constrainedScaleMin&&(d=b.constrainedScaleMin);0<b.constrainedScaleMax&&d>b.constrainedScaleMax&&(d=b.constrainedScaleMax);b=Math.round(eg*
d);b="text"==a.mediaType?b:b<wf?wf:b>xf?xf:b;var d=fg*d,e=d<yf?yf:d>zf?zf:d,g,d=Z.Utils.stringValidate(a.textColor)?a.textColor:Ke;"undefined"!==typeof n&&null!==n&&n?(n="0px",g="transparent none"):a.backVisible?(n="1px",g=a.backColor):(n="1px",g=Z.Utils.stringValidate(a.backColor)?a.backColor:gg);"undefined"!==typeof c&&null!==c&&c&&(d=a.backColor);a.textVisible||(d="transparent none");Z.captionBoxes&&Z.captionsColorsDefault&&"measure"!=a.mediaType&&(d=a.backColor,g=a.textColor);d==g&&("#ffffff"==
d?g="#000000":"#000000"==d&&(g="#ffffff"));c=Z.Utils.createContainerElement("div","captionTextBox","inline-block","absolute","hidden","auto","auto","1px","1px","solid",n,g,"0px",e+"px","pre");"undefined"!==typeof a.captionHTML&&Z.Utils.stringValidate(a.captionHTML)?(c.innerHTML=a.captionHTML,Z.Utils.setHTMLTextDefaultCaptionStyle(c,a.captionHTML,d,"verdana",b+"px","none","normal","normal","normal","normal","1em","center","none")):"transparent none"!=d&&"undefined"!==typeof a.caption&&Z.Utils.stringValidate(a.caption)?
(a=document.createTextNode(a.caption),c.appendChild(a),Z.Utils.setTextNodeStyle(a,d,"verdana",b+"px","none","normal","normal","normal","normal","1em","center","none"),Z.Utils.disableTextInteraction(a)):"measure"==a.mediaType&&(b=new Z.Utils.Point(a.x,a.y),Af(a,b));Z.Utils.addEventListener(c,"contextmenu",Z.Utils.preventDefault);return c}function vf(a,b,n,c,d){if(b){var e,g=a.captionPosition;e=Z.imageR;var f,l,r=b.style;a=N==a.internalID&&"polygon"==a.media&&("addLabel"==Z.editing||"editLabel"==Z.editing||
null===Z.editMode&&"measure"==Z.labelMode)?40:0;var k=parseFloat(r.padding);f=e;g=parseInt(g,10);0>f&&(f+=360);switch(g){case 1:g=0==f?g:90==f?7:180==f?9:270==f?3:5;break;case 2:g=0==f?g:90==f?4:180==f?8:270==f?6:5;break;case 3:g=0==f?g:90==f?1:180==f?7:270==f?9:5;break;case 4:g=0==f?g:90==f?8:180==f?6:270==f?2:5;break;case 6:g=0==f?g:90==f?2:180==f?4:270==f?8:5;break;case 7:g=0==f?g:90==f?9:180==f?3:270==f?1:5;break;case 8:g=0==f?g:90==f?6:180==f?2:270==f?4:5;break;case 9:g=0==f?g:90==f?3:180==f?
1:270==f?7:5}g=g.toString();g=parseInt(g,10);0>e&&(e+=360);var h=new qf(b);f=(n-h.w)/2-k;l=(c-h.h)/2-k;Z.Utils.rotateElement(r,-e);n=n/2+h.w/2+k+a;c=c/2+h.h+k+a;if(90==e||270==e)e=n,n=c,c=e;switch(g){case 1:f-=n;l-=c;break;case 2:l-=c;break;case 3:f+=n;l-=c;break;case 4:f-=n;break;case 6:f+=n;break;case 7:f-=n;l+=c;break;case 8:l+=c;break;case 9:f+=n,l+=c}if(e=new Z.Utils.Point(f,l))d=d?1:0,b.style.left=e.x+d+"px",b.style.top=e.y+d+"px"}}function qf(a,b,c){if("undefined"===typeof b||null===b)b=1;
var d=a.style,e=k.getZoom(),g=parseFloat(Z.Utils.getElementStyleProperty(a,"width"));isNaN(g)&&(g=parseFloat(Z.Utils.getResource("z115")),g=parseFloat(d.fontSize)/g,g=Math.round(parseFloat(a.firstChild.length*g)));a=parseInt(Z.Utils.getResource("z129"),10);parseFloat(d.fontSize);var d=2*parseFloat(Z.Utils.getResource("z160")),f=2*parseFloat(Z.Utils.getResource("z151"));b=1.7*a*e/b;c&&(b<d?b=d:b>f&&(b=f));this.w=g;this.h=b}function Af(a,b){var c=a.polyClosed,d=a.polygonPts.slice(0),e=d.length,g="",
f=0,l="",r="pixels"==Z.units?0:4,k="um"!=Z.units?Z.units:"\u03bcm";0==e?(g=hg,f=Z.Utils.polygonPerimeter(d,c,b,r),captionText=g+f.toString()+"  "+k):0<e&&!c?(g=ig,f=Z.Utils.polygonPerimeter(d,c,b,r),captionText=g+f.toString()+"  "+k):(g=jg,f=Z.Utils.polygonPerimeter(d,c,b,r),l=kg,captionText=g+f.toString()+"  "+k,g=lg,f=Z.Utils.polygonArea(d,c,b,r),captionText+="\n"+g+f.toString()+"  "+k+l);a.caption=captionText;ke&&ke.firstChild&&ke.firstChild.value&&(ke.firstChild.value=Ca.caption)}function mg(a,
b,c,d){if("undefined"===typeof d||null===d)d=La;d=d.toString();var e="0"==a||Z.imageSet?"hidden":"visible",g=parseInt(Z.Utils.getResource("z133"),10),f=parseInt(Z.Utils.getResource("DEFAULT_IMAGESETLISTWIDTH"),10),g=Z.imageSet?f:g,f=gf(a,g,aa,W);"undefined"===typeof fa||null===fa?(Z["HotspotList"+d]=new Z.Utils.createSelectElement("HotspotList"+d,b,c,g,f.x,f.y,null,e,Gc,"mousedown"),ze=fa=Z["HotspotList"+d],Ae=ze.style,"0"!=a&&Z.ViewerDisplay.appendChild(fa),Z.tour&&(Hc=0),a=Z.Utils.stringValidate(Z.hotspotListTitle)&&
"none"!=Z.hotspotListTitle?1:0,fa.selectedIndex=a):Z.Utils.arrayClear(c)}function tf(a){a=document.getElementById("hot"+a);null!==a&&a.parentNode.removeChild(a)}function gf(a,b,c,d){var e=Z.imageSet?13:25;switch(a){case "0":d=a=0;break;case "1":d=a=e;break;case "2":a=c-b-e;d=Z.imageSet?32:20;break;case "3":a=c-b-e;d=null!=toolbar?d-2*e:d-1.5*e;break;case "4":a=e;d=null!=toolbar?d-2*e:d-1.5*e;break;default:a=c-b,d=e}return new Z.Utils.Point(a,d)}function ng(a){var b=a.getAttribute("MEDIATYPE"),c=a.getAttribute("MEDIA");
if("symbol"==b){switch(c){case "circle":c=Qa+"/circle.png";break;case "square":c=Qa+"/square.png";break;case "triangle":c=Qa+"/triangle.png";break;case "arrowDown":c=Qa+"/arrowDown.png";break;case "arrowDownLeft":c=Qa+"/arrowDownLeft.png";break;case "arrowLeft":c=Qa+"/arrowLeft.png";break;case "arrowUpLeft":c=Qa+"/arrowUpLeft.png";break;case "arrowUp":c=Qa+"/arrowUp.png";break;case "arrowUpRight":c=Qa+"/arrowUpRight.png";break;case "arrowRight":c=Qa+"/arrowRight.png";break;case "arrowDownRight":c=
Qa+"/arrowDownRight.png";break;case "lineHorizontal":c=Qa+"/lineHorizontal.png";break;case "lineVertical":c=Qa+"/lineVertical.png";break;default:c=Qa+"/noSubstitutePlaceholder.png"}a.setAttribute("MEDIATYPE","icon");a.setAttribute("MEDIA",c);Le=!0}return a}function Bf(a,b){var c,d;switch(b){case "hotspot":c=fa?Wb("hotspot"):Wb("label");d=Z.Utils.stringValidate(Z.labelMode)?Z.labelMode:"";Z.Utils.stringValidate(a.getAttribute("ID"))||a.setAttribute("ID",c);var e=fa?Z.Utils.getResource("z34"):Z.Utils.getResource("z37");
Z.Utils.stringValidate(a.getAttribute("NAME"))||a.setAttribute("NAME",e+c+": "+d);d=fa?Z.Utils.getResource("z33"):Z.Utils.getResource("z35");Z.Utils.stringValidate(a.getAttribute("CAPTION"))||"freehand"==Z.editMode||Z.tourPath||Z.Utils.stringValidate(a.getAttribute("MEDIA"))||Z.Utils.stringValidate(a.getAttribute("MEDIA")&&"polygon"==a.getAttribute("MEDIA"))||a.setAttribute("CAPTION",d+c);a.setAttribute("NAME",Z.Utils.xmlUnescapeMinimal(unescape(a.getAttribute("NAME"))));a.setAttribute("CAPTION",
Z.Utils.xmlUnescapeMinimal(unescape(a.getAttribute("CAPTION"))));Z.Utils.stringValidate(a.getAttribute("X"))||a.setAttribute("X",Z.imageX.toString());Z.Utils.stringValidate(a.getAttribute("Y"))||a.setAttribute("Y",Z.imageY.toString());Z.Utils.stringValidate(a.getAttribute("ZOOM"))||a.setAttribute("ZOOM",(100*Z.imageZ).toString());!Z.Utils.stringValidate(a.getAttribute("CLICKURL"))&&Z.Utils.stringValidate(a.getAttribute("URL"))&&a.setAttribute("CLICKURL",a.getAttribute("URL"));isNaN(parseInt(a.getAttribute("INTERNALID"),
10))&&a.setAttribute("INTERNALID",c);d=a.getAttribute("MEDIATYPE");Z.Utils.stringValidate(a.getAttribute("TEXTCOLOR"))&&Z.Utils.stringValidate(a.getAttribute("BACKCOLOR"))&&(Z.captionsColorsDefault=!1);(Z.captionBoxes||"measure"==d)&&Z.captionsColorsDefault&&(a.setAttribute("TEXTCOLOR",Z.Utils.getResource("z25")),a.setAttribute("BACKCOLOR",Z.Utils.getResource("z22")));break;case "poi":c=Wb("poi");Z.Utils.stringValidate(a.getAttribute("ID"))||a.setAttribute("ID",c);Z.Utils.stringValidate(a.getAttribute("NAME"))||
a.setAttribute("NAME",Z.Utils.getResource("z43")+c);Z.Utils.stringValidate(a.getAttribute("X"))||a.setAttribute("X",Z.imageX.toString());Z.Utils.stringValidate(a.getAttribute("Y"))||a.setAttribute("Y",Z.imageY.toString());Z.Utils.stringValidate(a.getAttribute("ZOOM"))||a.setAttribute("ZOOM",(100*Z.imageZ).toString());isNaN(parseInt(a.getAttribute("INTERNALID"),10))&&a.setAttribute("INTERNALID",c);break;case "label":c=Wb("label"),d=Z.Utils.stringValidate(Z.labelMode)?Z.labelMode:"",Z.Utils.stringValidate(a.getAttribute("ID"))||
a.setAttribute("ID",c),Z.Utils.stringValidate(a.getAttribute("NAME"))||a.setAttribute("NAME",Z.Utils.getResource("z37")+c+": "+d),d=a.getAttribute("MEDIATYPE"),e=a.getAttribute("MEDIA"),Z.Utils.stringValidate(e)||"text"==d||(a.setAttribute("MEDIA",Qa+"/"+Z.Utils.getResource("z57")),a.setAttribute("MEDIATYPE",Z.Utils.getResource("z57TYPE"))),Z.Utils.stringValidate(a.getAttribute("TEXTCOLOR"))&&Z.Utils.stringValidate(a.getAttribute("BACKCOLOR"))&&(Z.captionsColorsDefault=!1),(Z.captionBoxes||"measure"==
d)&&Z.captionsColorsDefault&&(a.setAttribute("TEXTCOLOR",Z.Utils.getResource("z25")),a.setAttribute("BACKCOLOR",Z.Utils.getResource("z22"))),Z.Utils.stringValidate(a.getAttribute("CAPTION"))||a.setAttribute("CAPTION",Z.Utils.getResource("z35")+c),!Z.Utils.stringValidate(a.getAttribute("CLICKURL"))&&Z.Utils.stringValidate(a.getAttribute("URL"))&&a.setAttribute("CLICKURL",a.getAttribute("URL")),Z.Utils.stringValidate(a.getAttribute("X"))||a.setAttribute("X",Z.imageX.toString()),Z.Utils.stringValidate(a.getAttribute("Y"))||
a.setAttribute("Y",Z.imageY.toString()),Z.Utils.stringValidate(a.getAttribute("ZOOM"))||a.setAttribute("ZOOM",(100*Z.imageZ).toString()),isNaN(parseInt(a.getAttribute("INTERNALID"),10))&&a.setAttribute("INTERNALID",c),isNaN(parseInt(a.getAttribute("POIID"),10))&&a.setAttribute("POIID",Kb.options[Kb.selectedIndex].value)}return a}function le(a,b){var c=0,d="",e="";if("none"!=Z.annotationSort){switch(Z.annotationSort){case "id":d=a.value.toLowerCase();e=b.value.toLowerCase();break;case "name":d=a.text.toLowerCase(),
e=b.text.toLowerCase()}d<e?c=-1:d>e&&(c=1)}return c}function Wb(a){var b=0,c=[];switch(a){case "slide":if(db){a=0;for(var d=db.length;a<d;a++)c[c.length]=parseInt(db[a].internalID,10)}break;case "hotspot":if(t)for(a=0,d=t.length;a<d;a++)c[c.length]=parseInt(t[a].internalID,10);break;case "poi":if(ob)for(a=0,d=ob.length;a<d;a++)c[c.length]=parseInt(ob[a].value,10);break;case "label":if(pb)for(a=0,d=pb.length;a<d;a++)c[c.length]=parseInt(pb[a].value,10);break;case "labelExternal":if(t)for(a=0,d=t.length;a<
d;a++)c[c.length]=parseInt(t[a].id,10);break;case "note":if(xd)for(a=0,d=xd.length;a<d;a++)c[c.length]=parseInt(xd[a].value,10)}0<c.length&&(c=Z.Utils.arraySortNumericAscending(c),b=c[c.length-1]+1);return b.toString()}function jd(a){if(a=Z.Utils.event(a)){var b=Z.Utils.target(a);a=Z.Utils.relatedTarget(a);var c=Yc(b);null===c||null===a||"captionTextBox"==a.id&&-1!=b.id.indexOf("hot")&&-1==b.id.indexOf("hotspotDisplay")||"captionTextBox"==b.id&&-1!=a.id.indexOf("hot")&&-1==a.id.indexOf("hotspotDisplay")||
k.setHotspotVisibility(c,!0)}}function Je(a){if(a=Z.Utils.event(a))Z.clickZoomAndPanBlock=!0}function je(a){if(a=Z.Utils.event(a)){var b=Z.Utils.target(a);a=Z.Utils.relatedTarget(a);var c=Yc(b);null===c||null===a||"captionTextBox"==a.id&&-1!=b.id.indexOf("hot")&&-1==b.id.indexOf("hotspotDisplay")||"captionTextBox"==b.id&&-1!=a.id.indexOf("hot")&&-1==a.id.indexOf("hotspotDisplay")||k.setHotspotVisibility(c,!1)}}function Xc(a){if(a=Z.Utils.event(a))Z.clickZoomAndPanBlock=!0}function Ie(a){(a=Z.Utils.event(a))&&
!a.altKey&&(a=Z.Utils.target(a),a=Yc(a),a=a.id.substring(3,a.id.length),Z.Utils.arrayIndexOfObjectValue(t,"internalID",a),a=Z.Utils.getResource("z3"),Z.Utils.showMessage(a,!0,null,"center",!0))}function Wc(a){(a=Z.Utils.event(a))&&!a.altKey&&(a=Z.Utils.target(a),a=Yc(a),a=a.id.substring(3,a.id.length),Z.Utils.arrayIndexOfObjectValue(t,"internalID",a),a=Z.Utils.getResource("z3"),Z.Utils.showMessage(a,!0,null,"center",!0))}function gc(){var a=Z.Viewport.z538(this),a=a.id.substring(3,a.id.length),a=
Z.Utils.arrayIndexOfObjectValue(t,"internalID",a);-1!=a&&(a=unescape(t[a].urlTarget),a=new Function(a),window.setTimeout(a,200))}function Gc(a){Z.Utils.removeEventListener(fa,"mousedown",Gc);if(!Z.hotspotListTitle||!Z.Utils.stringValidate(Z.hotspotListTitle)||"none"==Z.hotspotListTitle)if(a=Z.Utils.getResource("UI_LISTMOUSEDOWNTEXT"),fa.options[0].text!=a){var b=document.createElement("option");b.text=a;b.value=null;fa.add(b,0)}fa.selectedIndex=0;Z.Utils.addEventListener(fa,"change",kd)}function kd(a){if(a=
Z.Utils.event(a))Z.tourPlaying&&k.tourStop(),a=Z.Utils.target(a),a=a.options[a.selectedIndex].value,isNaN(parseInt(a),10)||(a=Z.Utils.arrayIndexOfObjectValue(t,"internalID",a),-1!=a&&(a=t[a],Z.Utils.playAudio(Gd,a.audio),k.zoomAndPanToView(a.x,a.y,a.z/100,a.rotation))),Z.Utils.removeEventListener(fa,"change",kd),window.setTimeout(function(){Z.Utils.addEventListener(fa,"mousedown",Gc)},10)}function Zc(a,b,c){ob.sort(le);Z.Utils.updateSelectElement(Kb,ob,a);"undefined"===typeof a||null===a?(0==Kb.options.length&&
(a=Z.Utils.getResource("z27"),a=Z.Utils.arrayToArrayOfStrings(["0",a,"center","center","-1","0"]),a=Z.Utils.xmlConvertTextToDoc('<POI ID="'+a[0]+'" NAME="'+a[1]+'" X="'+a[2]+'" Y="'+a[3]+'" ZOOM="'+a[4]+'" INTERNALID="'+a[5]+'" ></POI>').getElementsByTagName("POI")[0],a=Bf(a,"poi"),c=Z.Utils.arrayIndexOfObjectValue(ob,"value",a.getAttribute("INTERNALID")),-1==c&&(c=ob.length),ob[c]={text:a.getAttribute("NAME"),value:a.getAttribute("INTERNALID"),id:a.getAttribute("ID"),x:a.getAttribute("X"),y:a.getAttribute("Y"),
z:a.getAttribute("ZOOM"),user:a.getAttribute("USER"),date:a.getAttribute("DATE")}),a="0"):(c=Z.Utils.arrayIndexOfObjectValue(ob,"value",a),-1!=c&&(a=ob[c].value));var d=La.toString();c=Z.Utils.arrayIndexOfObjectValue(ob,"value",a);(d=document.getElementById("poiNameTextElement"+d))&&-1!=c&&(d.value=ob[c].text);ld(a,b)}function ld(a,b){pb.sort(le);if("markup"==Z.editMode)Sb=Z.Utils.arrayClone("labels",pb,Sb);else{for(var c=pb,d=[],e=0,g=c.length;e<g;e++)c[e].poiID==a&&(d[d.length]=c[e]);Sb=d}Z.Utils.updateSelectElement(pc,
Sb,b);if("undefined"===typeof b||null===b)b=0<pc.options.length?pc.options[0].value:null;e=La.toString();N=b;Ia=Hd=null;Ga=!0;var f=Z.Utils.arrayIndexOfObjectValue(t,"internalID",N);Ca=-1!=f?t[f]:null;og&&(c=document.getElementById("commentTextElement"+e))&&(c.value="",null!==Ca&&(d=Ca.comment,null!==d&&Z.Utils.stringValidate(d)&&(c.value=d)));if(null!==Z.editMode){if(c=document.getElementById("labelNameTextElement"+e))c.value=null!==Ca?Ca.name:"";if(c=document.getElementById("captionTextElement"+
e))c.value="",null!==Ca&&(d=Ca.captionHTML,"undefined"!==typeof d&&Z.Utils.stringValidate(d)?c.value=d:c.value=Ca.caption);if("markup"!=Z.editMode){var l=document.getElementById("labelIconList"+e),g=document.getElementById("tooltipTextElement"+e),d=document.getElementById("clickURLTextElement"+e),r=document.getElementById("labelCaptionPositionList"+e),c=document.getElementById("labelTargetList"+e),e=document.getElementById("checkboxRollover"+e);if(l&&g&&d&&r&&c&&e&&(l.selectedIndex=0,g.value="",d.value=
"",r.selectedIndex=0,c.selectedIndex=0,e.checked=!1,null!==Ca)){if("icon"==Ca.mediaType){var f=Ca.media,k=f.lastIndexOf("/")+1,h=f.lastIndexOf(".");-1!=k&&-1!=h&&(f=f.substring(k,h).toLowerCase(),f=Z.Utils.arrayIndexOfObjectValueSubstring(l,"value",f,null,!0),-1!=f&&(l.selectedIndex=f))}l=Ca.captionPosition;Z.Utils.stringValidate(l)&&(f=Z.Utils.arrayIndexOfObjectValue(r,"value",l),-1!=f&&(r.selectedIndex=f));r=Ca.tooltipHTML;"undefined"!==typeof r&&Z.Utils.stringValidate(r)?g.value=r:g.value=Ca.tooltip;
g=Ca.clickURL;Z.Utils.stringValidate(g)&&(d.value=g);d=Ca.urlTarget;Z.Utils.stringValidate(d)&&(f=Z.Utils.arrayIndexOfObjectValue(c,"value",d),-1!=f&&(c.selectedIndex=f));e.checked=1==Ca.rollover}}}N!=pg&&Z.Viewer.getStatus("ready")&&Z.Utils.validateCallback("currentLabelChangedGetID");sc?ub():Xb()}function Vc(a,b,c,d,e,g,f){if(Z.useCanvas&&("polygon"==a.media||d)){if(a.visibility||a.rollover||c){c=a.internalID;if("undefined"!==typeof a.polygonPts&&null!==a.polygonPts&&0<a.polygonPts.length||d){f=
d?Be:"view"!=Z.labelMode&&c===N||e?e?sCtx:Na:Zd;f.save();f.translate((a.x-(g?Z.imageW/2:Z.imageX))*Z.imageZ,(a.y-(g?Z.imageH/2:Z.imageY))*Z.imageZ);var l=oa/Zb,r=k.getZoom(),h=(a.xScale+a.yScale)/2/100,u=a.xScale/100/l*r,l=a.yScale/100/l*r;1!=u&&1!=l&&f.scale(u,l);d?f.lineWidth=1E-6:"freehand"==a.mediaType?f.lineWidth=qg/r:(f.lineWidth=a.lineVisible?Cf/r/h:0,f.fillStyle=a.fillColor);f.strokeStyle=a.lineColor;u=a.x;l=a.y;f.beginPath();if(a.polygonPts){var m=a.polygonPts.slice(0);"measure"!=Z.labelMode||
a.polyClosed||Ga||"undefined"===typeof b||null===b||(m[m.length]={x:b.x,y:b.y});var p=m[0].x-u,q=m[0].y-l;f.moveTo(p,q);for(var P=1,t=m.length;P<t;P++){var w=m[P].x-u,B=m[P].y-l;f.lineTo(w,B)}"freehand"!=a.mediaType&&(a.polyClosed||Z.mouseIsDown&&0==Ia)&&(a.polyClosed&&(f.lineTo(p,q),f.closePath()),d||!a.fillVisible||!a.polyClosed&&c==N||(f.globalAlpha=rg,f.fill()),f.globalAlpha=1)}else P=100/a.z*a.iW,t=100/a.z*a.iH,u=0,l=-1==a.media.indexOf("triangle")?0:.23*a.iH,P=Math.max(P,t)/2*1.2,f.arc(u,l,
P,0,2*Math.PI);f.stroke();if(!d&&(null===Z.editMode&&"measure"==Z.labelMode||"addLabel"==Z.editing||"editLabel"==Z.editing)&&("rectangle"==Z.labelMode&&4==m.length||"polygon"==Z.labelMode||"measure"==Z.labelMode)&&a.internalID==N&&"undefined"!==typeof a&&null!==a&&"freehand"!=a.mediaType)for(r=1/r/h,P=0,t=m.length;P<t;P++)w=m[P].x-u,B=m[P].y-l,tc(w,B,!Ga&&0==P,r);f.restore()}e?(d=new Cb,drawCaptionOnCanvas(a,d,b,null,null,!0,g)):!Z.mouseIsDown||d&&"polygon"!=a.media||null===c||"undefined"===typeof b||
sc||uc(c,b,e,g)}e&&validateDrawLabelCount()}else Df||(Z.Utils.showMessage(Z.Utils.getResource("z9")),Df=!0)}function tc(a,b,c,d){var e=me*d;Na.lineWidth=sg*d;Na.strokeStyle=Ef;Na.fillStyle=c?tg:ug;Na.beginPath();Na.arc(a,b,e,0,2*Math.PI,!1);Na.closePath();Na.globalAlpha=.5;Na.fill();Na.globalAlpha=1;Na.stroke()}function md(a,b,c){Z.Utils.clearDisplay(Aa);var d=Z.Utils.arrayIndexOfObjectValue(t,"internalID",N);if(-1!=d){d=t[d];Vc(d);var e=k.getZoom(),g=d.polygonPts;if(g){var f=g[g.length-1],g=(f.x-
Z.imageX)*e,e=(f.y-Z.imageY)*e;d.polyClosed||(Na.lineWidth=Cf,Na.strokeStyle=lineStrokeColor,Na.beginPath(),Na.moveTo(g,e),Na.lineTo(a,b),Na.closePath(),Na.stroke())}"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||null===N||uc(N,c)}}function ub(a){Ma&&Z.Utils.clearDisplay(Ma);Aa&&Z.Utils.clearDisplay(Aa);if("inline-block"==dc.display)for(var b=new Cb,c=0,d=t.length;c<d;c++){var e=t[c];if("polygon"==e.media&&e.visibility&&(a||"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||
"undefined"===typeof N||null===N||N!==c)){var g=e.x,f=e.y;(!Z.hotspotsDrawOnlyInView||g+Fc>b.box.l&&g-Fc<b.box.r&&f+Fc>b.box.t&&f-Fc<b.box.b)&&Vc(e,null,a)}}}function Ic(a,b,c){Jc=!0;Z.Utils.clearDisplay(Aa);a=Z.Utils.arrayIndexOfObjectValue(t,"internalID",a);-1!=a&&(a=t[a],a.polygonPts[b]=c,Vc(a,c))}function kb(a,b,c){var d=(a=Z.Utils.event(a))?Z.Utils.isRightMouseButton(a):null,e=a?a.altKey:null;if("undefined"===typeof N||null===N)Kc(null,!0,b);else{var g=Z.Utils.arrayIndexOfObjectValue(t,"internalID",
N);-1!=g&&(g=t[g],Hd=g.polygonPts,g=g.polyClosed,null===Hd?(Kc(N,!0,b),uc(N,b)):(Ia=$c(a,b),g?null===Ia&&Kc(null,!0,b):null===Ia?e||d||c?(Kc(N,!1,b),Id(N,!1)):Kc(N,!1,b):0==Ia&&2<Hd.length&&!Ga&&Id(N,!0)))}(!e||"measure"==Z.labelMode&&null!==N)&&uc(N,b)}function Kc(a,b,c){var d,e=!1,g=!1;"undefined"!==typeof a&&null!==a&&(null!==Z.editing&&"addLabel"!=Z.editing||!Ga||"polygon"!=Z.labelMode&&"measure"!=Z.labelMode)?(a=Z.Utils.arrayIndexOfObjectValue(t,"internalID",a),-1!=a&&(d=t[a],a=d.polygonPts?
d.polygonPts:[],a[a.length]={x:c.x,y:c.y},d.polyClosed=!1,d.polygonPts=a,d.saved=!1)):(null===Z.editMode&&"measure"==Z.labelMode&&0<t.length&&k.deleteAllMeasureHotspots(),d="freehand"==Z.labelMode||"rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode?Z.labelMode:null,e=[],e[0]={x:c.x,y:c.y},g="undefined"!==typeof Kb&&0<Kb.options.length?g=Kb.options[Kb.selectedIndex].value:1,a=(100*k.getZoom()).toString(),k.createHotspotFromParameters(null,null,d,"polygon",null,c.x.toString(),
c.y.toString(),a,null,null,null,null,null,null,null,Ke,null,lineStrokeColor,null,null,null,null,null,"8","0",null,g,null,null,"0",e),d=t[t.length-1],N=d.internalID,e=d,g=d.poiID,Z.measureVisible&&null===Z.editMode||(a=Z.Utils.arrayIndexOfObjectValue(pb,"value",N),-1!=a?(pb[a]={text:e.name,value:N,poiID:g},a=Z.Utils.arrayIndexOfObjectValue(Sb,"value",N),-1!=a&&(Sb[a]={text:e.name,value:N,poiID:g},k.getStatus("XMLParsed")&&Z.Utils.updateSelectElement(pc,Sb))):(pb[pb.length]={text:e.name,value:N,poiID:g},
Sb[Sb.length]={text:e.name,value:N,poiID:g}),k.getStatus("XMLParsed")&&pc&&(e=pb[pb.length-1],ld(e.poiID,e.value))),e=g=!0);"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||"undefined"===typeof d||null===d||"freehand"==d.mediaType||(d=k.getZoom(),tc((c.x-Z.imageX)*d,(c.y-Z.imageY)*d,e,1));"rectangle"!=Z.labelMode&&"freehand"!=Z.labelMode&&(Ga=!1);g?Xb():b&&ub()}function $c(a,b){for(var c=null,d=(me+1)/Z.imageZ,e=0,g=t.length;e<g;e++)if("polygon"==t[e].media&&t[e].internalID==
N){var f=t[e].polygonPts;if("undefined"!==typeof f&&null!==f)for(var l=0,r=f.length;l<r;l++)Z.Utils.calculatePointsDistance(b.x,b.y,f[l].x,f[l].y)<d&&(c=l)}return c}function Id(a,b){Z.Utils.clearDisplay(Aa);var c=Z.Utils.arrayIndexOfObjectValue(t,"internalID",a);t[c].polyClosed=b;Ga=!0;if(-1!=c){var c=t[c],d=Z.Utils.polygonCenter(c.polygonPts,c.polyClosed);c.x=d.x;c.y=d.y;"freehand"!=Z.labelMode&&""==c.caption&&"undefined"===typeof c.captionHTML&&(d=Z.Utils.getResource("z45"),c.caption=d+a.toString());
d=new Cb;Ec(c,d)}}function uc(a,b,c,d){c=Z.Utils.arrayIndexOfObjectValue(t,"internalID",a);-1!=c&&(c=t[c],"measure"==Z.labelMode&&"measure"==c.mediaType?Af(c,b):"freehand"!=Z.labelMode&&"freehand"!=c.mediaType&&""==c.caption&&"undefined"===typeof c.captionHTML&&(d=Z.Utils.getResource("z45"),c.caption=d+a.toString()),d=c.polyClosed,a=c.polygonPts?c.polygonPts.slice(0):[],d=Z.Utils.polygonCenter(a,d,b),a=Z.Utils.polygonDimensions(a,b),c.x=d.x,c.y=d.y,c.iW=a.x,c.iH=a.y,a=new Cb,sf(c,a,b,!0))}function ne(a){var b;
this.id=a.getAttribute("ID");this.name=a.getAttribute("NAME");this.internalID=a.getAttribute("INTERNALID");isNaN(parseInt(this.internalID,10))&&(this.internalID=Wb("slide"));this.media=a.getAttribute("MEDIA");this.audio=a.getAttribute("AUDIO");Z.Utils.stringValidate(this.audio)&&(Z.audioContent=!0);this.initialX=a.getAttribute("INITIALX");this.initialY=a.getAttribute("INITIALY");this.initialZoom=a.getAttribute("INITIALZOOM");this.minZoom=a.getAttribute("MINZOOM");this.maxZoom=a.getAttribute("MAXZOOM");
b=parseFloat(a.getAttribute("SHOWFOR"));this.showFor=isNaN(b)?0:b;this.transition=a.getAttribute("TRANSITION");b=parseFloat(a.getAttribute("CHANGEFOR"));this.changeFor=isNaN(b)?0:b}function Jd(a){if(a=Z.Utils.event(a))if(Z.slideshowPlaying&&k.slideshowStop(),a=Z.Utils.target(a),"null"!=a.options[a.selectedIndex].value){var b=Z.Utils.stringValidate(Z.slideListTitle)&&"none"!=Z.slideListTitle?1:0;k.goToSlide(a.selectedIndex-b,null,!0)}}function Kd(a){if("undefined"!==typeof nb&&null!==nb&&0<nb.length){var b=
Z.slideshowPlaying?db[vc].showFor:0;Z.Utils.stringValidate(db[vc].audio)&&(b+=500);var c=Lc(vc,a,db.length-1);null!==c?Z.Utils.functionCallWithDelay(function(){k.goToSlide(c,null,null,!0)},b):k.slideshowStop()}}function Lc(a,b,c){for(var d=Me||Ne,e="Skip";"Skip"==e;)"next"==b?(a+=1,a>c&&(a=d?0:null)):(--a,0>a&&(a=d?c:null)),e=t?null!==a?t[a].transition:null:db?null!==a?db[a].transition:null:null;return a}function nd(a){Z.preventDupCall||(Z.priorX=Z.imageX,Z.priorY=Z.imageY,Z.priorZ=Z.imageZ,Z.priorR=
Math.round(Z.imageR));Z.preventDupCall="undefined"!==typeof a&&null!==a}function Pc(a,b,c,d,e,f){f||k.zoomAndPanAllStop();Z.maskingSelection&&Z.maskClearOnUserAction&&k.clearMask();if("undefined"===typeof a||null===a)a=Z.imageW/2;if("undefined"===typeof b||null===b)b=Z.imageH/2;"undefined"===typeof c||null===c?c=Z.fitZ:1<c&&(c/=100);if("undefined"===typeof d||null===d)d=Z.imageR;c=Bb(c);d=g(d);a=la(a,b,c,d,"image");Z.imageX=ad=a.x;Z.imageY=od=a.y;Z.imageZ=c;d!=Z.imageR&&Z.Utils.rotateElement(F,d);
Z.imageR=d;k.updateView(!0);"function"===typeof e&&e()}function pd(){if(wc&&(0!=vb||0!=wb||0!=lb)){var a=vb,b=wb,c=lb,d=k.getZoom();0!=c&&(d=Y(ea,oa*(1+c)),d=Bb(d),d!=Z.imageZ&&bd(d));if(0!=a||0!=b)a=parseFloat(F.left)+a,b=parseFloat(F.top)+b,d=la(a,b,d,Z.imageR,"container"),F.left=Math.round(d.x)+"px",F.top=Math.round(d.y)+"px",b=d.x-Ua,d=d.y-Va,ba&&Ha&&(Z.mobileDevice||Math.abs(b)>aa/2||Math.abs(d)>W/2)&&K(ba,mb,ab,"simple",!1,"Updating backfill oversize display");t&&30<t.length?0==Oe%2&&k.syncViewportRelated():
k.syncViewportRelated();Oe++;wc=window.setTimeout(pd,Pe)}}function qd(a,b,c,d,e,g,f){Ld++;var l=e/g,r=Ld*l,h=Z.Utils.easing(Z.imageX,a,r,e),m=Z.Utils.easing(Z.imageY,b,r,e),u=Z.Utils.easing(Z.imageZ,c,r,e),r=Z.Utils.easing(Z.imageR,d,r,e),m=da(h,m,u),h=m.x,m=m.y,P=!1,p=syncOversize=!1;if(parseFloat(F.left)!=h||parseFloat(F.top)!=m)F.left=h+"px",F.top=m+"px",p=!0,ba&&Ha&&(syncOversize=!0);u!=Z.imageZ&&(bd(u,!1),P=p=!0,ba&&Ha&&(Da.restore(),Da.save(),Da.scale($a,$a),syncOversize=!0));r!=Z.imageR&&(Z.Utils.rotateElement(F,
r),ba&&Ha&&(Da.rotate((r-Z.imageR)*Math.PI/180),syncOversize=!0),Z.imageR=r,p=!0);syncOversize&&K(ba,mb,ab,"simple",!1,"Updating backfill oversize display");k.syncViewportRelated(!1,t&&40>t.length,!1,!1,!1);0==Ld%2&&k.syncViewportRelated(!1,!1,P,p,P);u=Z.tour&&Z.tourStop&&0==Math.round(Z.imageR%90);Ld<g+1&&!u?Mc=window.setTimeout(function(){qd(a,b,c,d,e,g,f)},l):(u&&(Z.tourPlaying=!1),Z.interactivityOff=!1,Mc&&(window.clearTimeout(Mc),Mc=null),k.updateView(),k.toggleWatermarks(!0),t&&39<t.length&&
k.setHotspotsVisibility(!0),"function"===typeof f&&f())}function Md(){Oe=lb=wb=vb=0;wc&&(window.clearTimeout(wc),wc=null)}function bd(a,b){var c=!1,d=ja(ea,a);if(d!=oa){oa=d;var c=d/Zb,e=ma*c,g=na*c,f=(ma-e)/2,l=(na-g)/2;d<Zb&&(d=la(parseFloat(F.left),parseFloat(F.top),a,Z.imageR,"container"),F.left=d.x+"px",F.top=d.y+"px");if(Z.useCanvas)if(Fa.width=e+"px",Fa.height=g+"px",Fa.left=f+"px",Fa.top=l+"px",Lb&&(Mb.width=e+"px",Mb.height=g+"px",Mb.left=f+"px",Mb.top=l+"px"),Ma&&(Tb.width=e+"px",Tb.height=
g+"px",Tb.left=f+"px",Tb.top=l+"px"),Aa&&(Ub.width=e+"px",Ub.height=g+"px",Ub.left=f+"px",Ub.top=l+"px"),$a=ja(mb,k.getZoom()),d=8<$a,Ha||d){if(null!==Da&&"undefined"===typeof b||null===b||b&&ba&&("in"!=Z.zooming||e>Z.scaleThreshold||g>Z.scaleThreshold))Da.restore(),Da.save(),Da.scale($a,$a),Da.rotate(Z.imageR*Math.PI/180),K(ba,mb,ab,"simple",!1,"Updating backfill oversize display");Rb=c=ja(Ka,a);e=c/tierBackfillScalePrior;c=hc*e;e*=ic;g=Db+(hc-c)/2;d=Eb+(ic-e)/2;ga.width=c+"px";ga.height=e+"px";
ga.left=g+"px";ga.top=d+"px"}else ba&&Z.Utils.clearDisplay(ba),e=hc*c,g=ic*c,f=Db+Z.imageX*(1-c)*Z.imageZ,l=Eb+Z.imageY*(1-c)*Z.imageZ,ga.width=e+"px",ga.height=g+"px",ga.left=f+"px",ga.top=l+"px";else K(qa,ea,fb,"centerOut",!1,"Scaling: non-canvas zoom"),Ha?(c=Ff,hc=ma*c,ic=na*c,Db=-(ma/c),Eb=-(na/c),Qe=zb*c,Re=Ab*c,pa.width=hc,pa.height=ic,ga.width=pa.width+"px",ga.height=pa.height+"px"):(c=qb[Ka],pa.width=gb[Ka],pa.height=c,c=Z.imageY*a,Db=zb-Z.imageX*a,Eb=Ab-c),ga.left=Db+"px",ga.top=Eb+"px",
K(pa,Ka,ab,"simple",!1,"Scaling: non-canvas zoom - backfill");c=!0}return c}function oe(){k.toggleFullViewMode(!1)}function ua(a){a=Z.Utils.event(a);var b=a.type;if(a&&b){var c=!Ga&&("polygon"==Z.labelMode||"measure"==Z.labelMode),d=Z.Utils.isRightMouseButton(a),e=a.altKey;if("mouseover"!=b&&"mouseout"!=b&&Z.interactivityOff||"mousedown"==b&&(Z.interactivityOff||Z.coordinatesVisible&&e)||d&&!c)Z.tourStop=!0;else{if("mousedown"==b||"touchstart"==b||Z.tourPlaying&&Z.tourStop)k.zoomAndPanAllStop(),k.tourStop(),
Z.tourStop=!0,Z.interactivityOff=!1;Z.touchSupport&&!Z.clickZoomAndPanBlock&&"touchmove"!=b&&"gesturechange"!=b&&a.preventDefault();if("mousedown"==b)window.setTimeout(function(){k.zoomAndPanAllStop(!1,!0)},1),Z.maskingSelection&&Z.maskClearOnUserAction&&k.clearMask();else if("touchstart"==b||"gesturestart"==b)c=!1,touch=Z.Utils.getFirstTouch(a),"undefined"!==typeof touch&&(target=touch.target,d=Yc(target),null===d?c=!0:(d=d.id.substring(3,d.id.length),d=Z.Utils.arrayIndexOfObjectValue(t,"internalID",
d),-1!=d&&(d=t[d],null!==d&&"function"==d.clickURL&&(c=!0)))),c&&a.preventDefault(),k.zoomAndPanAllStop(!1,!0),Z.maskingSelection&&Z.maskClearOnUserAction&&k.clearMask();switch(b){case "mouseover":Z.fullView||"TEXTAREA"==document.activeElement.tagName||Z.Viewer.initializeViewerKeyDefaultListeners(!0);break;case "mousedown":!Z.fullView&&document.activeElement&&document.activeElement.blur();Z.Viewer.initializeViewerKeyEventListeners(!0);Z.Utils.addEventListener(document,"mousemove",ua);Z.Utils.addEventListener(document,
"mouseup",ua);break;case "mouseup":Z.Utils.removeEventListener(document,"mousemove",ua),Z.Utils.removeEventListener(document,"mouseup",ua)}pe(a);if("mousedown"==b||"mousemove"==b)return!1}}}function pe(a){a=Z.Utils.event(a);var b=a.type;if(a&&b){var c,d,e;if("touchstart"==b||"touchmove"==b||"touchend"==b||"touchcancel"==b)c=Z.Utils.getFirstTouch(a),"undefined"!==typeof c&&(d=c.target,e=new Z.Utils.Point(c.pageX,c.pageY));else{d=Z.Utils.target(a);Z.Utils.relatedTarget(a);var g=Z.Utils.isRightMouseButton(a),
f=a.altKey;"resize"!=b&&(e=Z.Utils.getMousePosition(a));Z.smoothPan&&(Yb=e)}"DOMMouseScroll"==b&&(b="mousewheel");var l=k.getZoom(),r;"undefined"!==typeof e&&null!==e&&(r=k.getClickCoordsInImage(a,l,e));switch(b){case "mousedown":Z.mouseIsDown=!0;Wa=new Z.Utils.Point(e.x,e.y);ha.mouseXPrior=e.x;ha.mouseYPrior=e.y;if(("rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode)&&null!==N||"rectangle"==Z.labelMode&&null===N)Ia=$c(a,r);f||"view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=
Z.editing&&(null!==Z.editMode||"measure"!=Z.labelMode)?Z.smoothPan&&!f&&Z.mousePan&&1<Z.smoothPanEasing&&(xc(void 0),Nd=Wa,null===cd&&(cd=new Z.Utils.Point(parseFloat(F.left),parseFloat(F.top))),null===jc&&(jc=window.setInterval(Od,50))):(Z.Utils.hideMessage(),"addLabel"==Z.editing&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode&&null===Ia)&&k.saveEditsLabel(!0,!1,!1));break;case "mousemove":hb=new Z.Utils.Point(e.x,e.y);d=(r.x-Z.imageX)*l;g=(r.y-Z.imageY)*l;ca&&(clearTimeout(ca),ca=null,kb(a,
r,h));f||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing)?!f&&Z.mousePan&&(jc?Yb=e:Z.animation&&k.getZoom()==Z.minZ?(e.x>ha.mouseXPrior?Z.Viewer.viewportNext():e.x<ha.mouseXPrior&&Z.Viewer.viewportPrior(),ha.mouseXPrior=e.x,ha.mouseYPrior=e.y):(f=e.x-ha.mouseXPrior,a=e.y-ha.mouseYPrior,isNaN(f)||isNaN(a)||(f=parseFloat(F.left)+f,a=parseFloat(F.top)+a,d=la(f,a,Z.imageZ,Z.imageR,"container"),F.left=d.x+"px",F.top=d.y+"px",ha.mouseXPrior=
e.x,ha.mouseYPrior=e.y,f=d.x-Ua,a=d.y-Va,ba&&Ha&&(Z.mobileDevice||Math.abs(f)>aa/2||Math.abs(a)>W/2)&&K(ba,mb,ab,"simple",!1,"Updating backfill oversize display"),Z.Navigator&&(e=k.calculateCurrentCenterCoordinates(d,Z.imageZ,Z.imageR),Z.Navigator.z658(e))))):(e=Z.Utils.arrayIndexOfObjectValue(t,"internalID",N),e=-1!=e?t[e].polyClosed:!1,"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||null===Ia||!Z.mouseIsDown?"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||e||Z.mouseIsDown&&
(!Z.mouseIsDown||null===Ia)||md(d,g,r):Ic(N,Ia,r));break;case "mouseup":Z.mouseIsDown=!1;document.mousemove=null;document.mouseup=null;Z.mouseOutDownPoint?(e=Z.mouseOutDownPoint,r=k.getClickCoordsInImage(a,l,Z.mouseOutDownPoint)):e=new Z.Utils.Point(e.x,e.y);e=Z.Utils.calculatePointsDistance(Wa.x,Wa.y,e.x,e.y);if(4>e||!f&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode))if(!sc&&(null===Z.editMode&&"measure"==Z.labelMode||"view"!=Z.labelMode&&("addLabel"==Z.editing||"editLabel"==Z.editing))){if("addLabel"!=
Z.editing||f||!Ga||"text"!=Z.labelMode&&"icon"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||k.saveEditsLabel(!0,!1,!1),!(f&&Ga&&!g||"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode))if(f||g)kb(a,r),Ga||Z.Utils.addEventListener(document,"mousemove",ua);else{Z.Utils.addEventListener(document,"mousemove",ua);var h=!1;ca?(h=!0,clearTimeout(ca),ca=null,kb(a,r,h),Z.Utils.removeEventListener(document,"mousemove",ua)):(ca=setTimeout(function(a){ca=
null;kb(a,r,h)},Z.doubleClickDelay),"polygon"!=Z.labelMode&&"measure"!=Z.labelMode&&Z.Utils.removeEventListener(document,"mousemove",ua))}}else{if((null===Z.editing||"view"==Z.labelMode)&&!sc)if(e=null,Z.labelClickSelect&&(e=Yc(d)),null!==e)e=e.id.substring(3,e.id.length),e=Z.Utils.arrayIndexOfObjectValue(t,"internalID",e),-1!=e&&(e=t[e],Zc(e.poiID,e.internalID),k.zoomAndPanToView(e.x,e.y,e.z/100,e.rotation)),fa&&(Z.hotspotListTitle||Z.tourListTitle)&&(fa.selectedIndex=0);else{if(Z.clickZoom||Z.clickPan){e=
ca&&Z.doubleClickZoom?!0:!1;var m=k.getClickZoomCoords3D(a,Wa,ea,oa,e)}Z.clickZoom?Z.doubleClickZoom?ca?(clearTimeout(ca),ca=null,k.zoomAndPanToView(m.x,m.y,m.z)):ca=setTimeout(function(a){ca=null;k.zoomAndPanToView(m.x,m.y,m.z)},Z.doubleClickDelay):window.setTimeout(function(){k.zoomAndPanToView(m.x,m.y,m.z)},1):Z.clickPan&&k.zoomAndPanToView(m.x,m.y,Z.imageZ)}}else"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||!Jc&&(null!==Ia||Ga)||(Ia=null,Jc=!1,e=Z.Utils.arrayIndexOfObjectValue(t,
"internalID",N),-1!=e&&(e=t[e],a=Z.Utils.polygonCenter(e.polygonPts,e.polyClosed),e.x=a.x,e.y=a.y,Z.Utils.clearDisplay(Aa),a=new Cb,Ec(e,a),Ga||Z.Utils.addEventListener(document,"mousemove",ua))),hb=null,Z.mousePan&&!Z.smoothPan&&k.updateView();Z.mouseOutDownPoint&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),Z.Toolbar&&Z.annotations&&(2==Z.annotationPanelVisible||3==Z.annotationPanelVisible)&&Z.Toolbar.setVisibilityAnnotationPanel(!1));
break;case "touchstart":if(c&&!yc){Z.mouseIsDown=!0;Pd=!1;Wa=new Z.Utils.Point(e.x,e.y);ha.mouseXPrior=e.x;ha.mouseYPrior=e.y;if(("rectangle"==Z.labelMode||"polygon"==Z.labelMode||"measure"==Z.labelMode)&&null!==N||"rectangle"==Z.labelMode&&null===N)Ia=$c(a,r);f||"view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing&&(null!==Z.editMode||"measure"!=Z.labelMode)||Z.Utils.hideMessage()}break;case "touchmove":!c||yc||Pd||((hb=new Z.Utils.Point(e.x,e.y),d=(r.x-Z.imageX)*l,g=(r.y-Z.imageY)*
l,ca&&(clearTimeout(ca),ca=null,kb(a,r,h)),f||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing))?!f&&Z.mousePan&&(jc?Yb=e:(f=e.x-ha.mouseXPrior,a=e.y-ha.mouseYPrior,isNaN(f)||isNaN(a)||(f=parseFloat(F.left)+f,a=parseFloat(F.top)+a,d=la(f,a,Z.imageZ,Z.imageR,"container"),F.left=d.x+"px",F.top=d.y+"px",ha.mouseXPrior=e.x,ha.mouseYPrior=e.y,f=d.x-Ua,a=d.y-Va,ba&&Ha&&(Z.mobileDevice||Math.abs(f)>aa/2||Math.abs(a)>W/2)&&K(ba,mb,ab,"simple",
!1,"Updating backfill oversize display"),Z.Navigator&&(e=k.calculateCurrentCenterCoordinates(d,Z.imageZ,Z.imageR),Z.Navigator.z658(e))))):(e=Z.Utils.arrayIndexOfObjectValue(t,"internalID",N),e=-1!=e?t[e].polyClosed:!1,"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||null===Ia||!Z.mouseIsDown?"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||e||Z.mouseIsDown&&(!Z.mouseIsDown||null===Ia)||md(d,g,r):Ic(N,Ia,r)));break;case "touchend":yc||Pd||(Z.mouseIsDown=!1,document.mousemove=
null,document.mouseup=null,Z.mouseOutDownPoint?(e=Z.mouseOutDownPoint,r=k.getClickCoordsInImage(a,l,Z.mouseOutDownPoint)):e="undefined"!==typeof e&&null!==e?new Z.Utils.Point(e.x,e.y):"undefined"!==typeof hb&&null!==hb?hb:Wa,e=Z.Utils.calculatePointsDistance(Wa.x,Wa.y,e.x,e.y),4>e||!f&&("rectangle"==Z.labelMode||"freehand"==Z.labelMode)?sc||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing)?null!==Z.editing&&"view"!=Z.labelMode||sc||(Z.clickZoom?
(e=ca&&Z.doubleClickZoom?!0:!1,m=k.getClickZoomCoords3D(a,Wa,ea,oa,e),Z.doubleClickZoom?ca?(clearTimeout(ca),ca=null,k.zoomAndPanToView(m.x,m.y,m.z)):ca=setTimeout(function(a){ca=null;k.zoomAndPanToView(m.x,m.y,m.z)},Z.doubleClickDelay):window.setTimeout(function(){k.zoomAndPanToView(m.x,m.y,m.z)},1)):Z.clickPan&&k.zoomAndPanToView(m.x,m.y,Z.imageZ)):("addLabel"!=Z.editing||f||!Ga||"text"!=Z.labelMode&&"icon"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||k.saveEditsLabel(!0,!1,!1),
f&&Ga||"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||(f||g?(kb(a,r),Ga||Z.Utils.addEventListener(document,"mousemove",viewerEventsHandler)):(Z.Utils.addEventListener(document,"touchmove",ua),h=!1,ca?(h=!0,clearTimeout(ca),ca=null,kb(a,r,h),Z.Utils.removeEventListener(document,"touchmove",ua)):(ca=setTimeout(function(a){ca=null;kb(a,r,h)},Z.doubleClickDelay),"polygon"!=Z.labelMode&&"measure"!=Z.labelMode&&Z.Utils.removeEventListener(document,"touchmove",
ua))))):("rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||!Jc&&(null!==Ia||Ga)||(Ia=null,Jc=!1,e=Z.Utils.arrayIndexOfObjectValue(t,"internalID",N),-1!=e&&(e=t[e],a=Z.Utils.polygonCenter(e.polygonPts,e.polyClosed),e.x=a.x,e.y=a.y,Z.Utils.clearDisplay(Aa),a=new Cb,Ec(e,a),Ga||Z.Utils.addEventListener(document,"touchmove",ua))),hb=null,Z.mousePan&&!jc&&k.updateView()),Z.mouseOutDownPoint&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&
Z.Navigator.setVisibility(!1),Z.Toolbar&&Z.annotations&&(2==Z.annotationPanelVisible||3==Z.annotationPanelVisible)&&Z.Toolbar.setVisibilityAnnotationPanel(!1)));break;case "touchcancel":yc||Pd||(Z.mouseIsDown=!1,document.mousemove=null,document.mouseup=null,Z.mouseOutDownPoint?(e=Z.mouseOutDownPoint,r=k.getClickCoordsInImage(a,l,Z.mouseOutDownPoint)):e="undefined"!==typeof e&&null!==e?new Z.Utils.Point(e.x,e.y):"undefined"!==typeof hb&&null!==hb?hb:Wa,e=Z.Utils.calculatePointsDistance(Wa.x,Wa.y,e.x,
e.y),4>e||!f&&("rectangle"==Z.labelMode||"freehand"==Z.labelMode)?sc||(null!==Z.editMode||"measure"!=Z.labelMode)&&("view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing)?null!==Z.editing&&"view"!=Z.labelMode||sc||(Z.clickZoom?(e=ca&&Z.doubleClickZoom?!0:!1,m=k.getClickZoomCoords3D(a,Wa,ea,oa,e),Z.doubleClickZoom?ca?(clearTimeout(ca),ca=null,k.zoomAndPanToView(m.x,m.y,m.z)):ca=setTimeout(function(a){ca=null;k.zoomAndPanToView(m.x,m.y,m.z)},Z.doubleClickDelay):window.setTimeout(function(){k.zoomAndPanToView(m.x,
m.y,m.z)},1)):Z.clickPan&&k.zoomAndPanToView(m.x,m.y,Z.imageZ)):("addLabel"!=Z.editing||f||!Ga||"text"!=Z.labelMode&&"icon"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||k.saveEditsLabel(!0,!1,!1),f&&Ga||"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||(f||g?(kb(a,r),Ga||Z.Utils.addEventListener(document,"mousemove",viewerEventsHandler)):(Z.Utils.addEventListener(document,"touchmove",ua),h=!1,ca?(h=!0,clearTimeout(ca),ca=null,kb(a,
r,h),Z.Utils.removeEventListener(document,"touchmove",ua)):(ca=setTimeout(function(a){ca=null;kb(a,r,h)},Z.doubleClickDelay),"polygon"!=Z.labelMode&&"measure"!=Z.labelMode&&Z.Utils.removeEventListener(document,"touchmove",ua))))):("rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||!Jc&&(null!==Ia||Ga)||(Ia=null,Jc=!1,e=Z.Utils.arrayIndexOfObjectValue(t,"internalID",N),-1!=e&&(e=t[e],a=Z.Utils.polygonCenter(e.polygonPts,e.polyClosed),e.x=a.x,e.y=a.y,Z.Utils.clearDisplay(Aa),
a=new Cb,Ec(e,a),Ga||Z.Utils.addEventListener(document,"touchmove",ua))),hb=null,Z.mousePan&&!jc&&k.updateView()),Z.mouseOutDownPoint&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),Z.Toolbar&&Z.annotations&&(2==Z.annotationPanelVisible||3==Z.annotationPanelVisible)&&Z.Toolbar.setVisibilityAnnotationPanel(!1)));break;case "gesturestart":Qd(a);yc||(yc=window.setInterval(Rd,vg));break;case "gesturechange":Se=Math.round(100*
a.scale)/100;break;case "gestureend":yc&&(window.clearInterval(yc),Pd=!0,yc=null),Z.mousePan&&k.updateView()}}}function xc(a){null!==jc&&a&&(window.clearInterval(jc),jc=null);cd=Sd=Td=Pa=null;Xa=Ya=Fb=Gb=0}function Od(a){if(Z.animation&&k.getZoom()==Z.minZ){Z.animationCount++;null===Ud&&(Ud=parseFloat(F.left));null===Vd&&(Vd=parseFloat(F.top));a=Ud;var b=Vd;if(Z.mouseIsDown||Pa){var c=(Pa?Sd:Yb.x)-Nd.x,d=(Pa?Td:Yb.y)-Nd.y,e=a-cd.x,g=b-cd.y;if(!(isNaN(c)||isNaN(d)||isNaN(e)||isNaN(g)||0==c&&0==d&&
0==e&&0==g)){var f=Pa?Z.smoothPanGlide:1,l=Pa?1:100;Xa=Math.round((c-e)/(Z.smoothPanEasing*f)*l/l);Ya=Math.round((d-g)/(Z.smoothPanEasing*f)*l/l);Z.mouseIsDown?(Fb=Xa,Gb=Ya):(Math.abs(Xa)>Math.abs(Fb)&&(Xa=Fb),Math.abs(Ya)>Math.abs(Gb)&&(Ya=Gb));b+=Ya;Ud=a+Xa;Vd=b;var r,h,m,u;"motion"==Z.animator?(r="horizontal"==Z.animationAxis?Xa:Ya,dimensionAxis="horizontal"==Z.animationAxis?aa:W,h=Math.round(wg/Z.imageSetLength),m=r/40,u=0):"position"==Z.animator&&(r="horizontal"==Z.animationAxis?e:g,dimensionAxis=
"horizontal"==Z.animationAxis?aa:W,h=Math.max(0,Math.round((dimensionAxis/2-Math.abs(r))/xg)),m=0,u="horizontal"==Z.animationAxis?aa/10:W/10);0==h&&h++;0==Z.animationCount%h&&(r<-u?Z.Viewer.viewportPrior(m):r>u&&Z.Viewer.viewportNext(m));Pa&&0==Math.round(Xa*l)/l&&0==Math.round(Ya*l)/l&&(Pa=!1)}}else if(Z.mouseIsDown||null!==Pa||0==Xa||0==Ya)xc(!0),Vd=Ud=null;else if(0!=Fb||0!=Gb)Sd=Yb.x+Fb,Td=Yb.y+Gb,Pa=!0}else if(m=parseFloat(F.left),h=parseFloat(F.top),Z.mouseIsDown||Pa)u=(Pa?Sd:Yb.x)-Nd.x,a=(Pa?
Td:Yb.y)-Nd.y,e=m-cd.x,g=h-cd.y,isNaN(u)||isNaN(a)||isNaN(e)||isNaN(g)||0==u&&0==a&&0==e&&0==g||(l=Pa?Z.smoothPanGlide:1,r=Pa?1:100,Xa=Math.round((u-e)/(Z.smoothPanEasing*l)*r/r),Ya=Math.round((a-g)/(Z.smoothPanEasing*l)*r/r),Z.mouseIsDown?(Fb=Xa,Gb=Ya):(Math.abs(Xa)>Math.abs(Fb)&&(Xa=Fb),Math.abs(Ya)>Math.abs(Gb)&&(Ya=Gb)),m+=Xa,h+=Ya,u=la(m,h,Z.imageZ,Z.imageR,"container"),F.left=u.x+"px",F.top=u.y+"px",Xa-=m-u.x,Ya-=h-u.y,h=u.x-Ua,m=u.y-Va,ba&&Ha&&(Pa||Z.mobileDevice||Math.abs(h)>aa/2||Math.abs(m)>
W/2)&&K(ba,mb,ab,"simple",!1,"Updating backfill oversize display"),Pa&&0==Math.round(Xa*r)/r&&0==Math.round(Ya*r)/r&&(Pa=!1),Z.Navigator&&(r=k.calculateCurrentCenterCoordinates(u,Z.imageZ,Z.imageR),Z.Navigator.z658(r)));else if(Z.mouseIsDown||null!==Pa||0==Xa||0==Ya)xc(!0),k.updateView();else if(u=la(m+Fb,h+Gb,Z.imageZ,Z.imageR,"container"),Fb=u.x-m,Gb=u.y-h,0!=Fb||0!=Gb)Sd=Yb.x+Fb,Td=Yb.y+Gb,Pa=!0}function Qd(a){a=Z.Utils.event(a);a.preventDefault();Se=Math.round(100*a.scale)/100}function Rd(a){if(Z.mousePan){a=
Y(ea,Zb*Se);var b=Bb(a);a!=Z.imageZ&&k.z633(b)}}function Nc(a){if(a=Z.Utils.event(a)){var b;b=Z.Utils.event(a);var c=k.getZoom(),d=k.getClickCoordsInImage(b,c);b=Math.round(d.x).toString();d=Math.round(d.y).toString();c=(Math.round(1E3*c)/10).toString();coordsString='X="'+b+'"   Y="'+d+'"   ZOOM="'+c+'"';"mousemove"==a.type?Z.Utils.showCoordinates(coordsString):"mousedown"==a.type&&a.altKey&&Z.Utils.saveCoordinates(coordsString)}}var tb,Pb,Qa,ad=null,od=null,La=0;"undefined"!==typeof a&&null!==a&&
(La=a);var Qb;Qb="undefined"!==typeof b&&null!==b?b:Z.imagePath;"undefined"===typeof d||null===d?Pb=tb=Z.hotspotPath:(Pb=tb=d,".xml"==Pb.toLowerCase().substring(Pb.length-4,Pb.length)&&(Pb=Pb.substring(0,Pb.lastIndexOf("/"))));tb&&(Z.hotspots=!0,Z.annotationPathProvided=!0,Z.imageSet&&(Z.hotspotPath="multiple"));var k=this,kc=[],Ob=parseInt(Z.Utils.getResource("z90"),10),zd=8*Ob,gd=4*Ob,Oc=0,Ja=parseInt(Z.Utils.getResource("z221"),10),Oa=parseInt(Z.Utils.getResource("z219"),10),dd=parseFloat(Z.Utils.getResource("z218")),
Wd=dd/2,Vb=parseInt(Z.Utils.getResource("z220"),10),rd=1==Z.toolbarVisible?Z.toolbarH:0,qc,ba,ib,Da,cb,ha,F,Rc,pa,ga,Nb,ed,qa,Fa,Ea,fd,bb,cc,ec,Sc,ya,rc,Tc,R,dc,ze,Ae,xe,Ma,Tb,Zd,ye,Aa,Ub,Na,we,Lb,Mb,Be;D(La);var jb,eb=1,ea=0,Ka=0,Ha=!1,mb=0,Ce=!1,oa,Zb,Rb,$a,gb=[],qb=[],Ta=[],rb=[],sb=[],Qc=[];tierTileOffsetsCount=[];tierTileOffsetChunks=[];tierTileOffsetLast=[];var Ac=[];tierTileByteCountsCount=[];tierTileByteCountChunks=[];tierTileByteCountLast=[];var lc=[],ab=[],Ra=[],xb=[],bc=[],wd=0,vd=0,lf=
0,De=0,Ee=0,Fe=0,He=0,Gf,de=0,ee=0,Bd=0,Bc=0,Ad=0,Cc=0,Uc=0,fe=0,mc=[],za=[],fb=[],$b=[],nc=[],ac=[],hd=null,ge=0,Uf=parseInt(Z.Utils.getResource("DEFAULT_VALIDATEVIEWRETRYLIMIT"),10),mf=parseInt(Z.Utils.getResource("DEFAULT_VALIDATEVIEWRETRYDELAY"),10),yb=[],Sa=[],oc=[],Hb=[],Tf=new Z.NetConnector,ue=parseInt(Z.Utils.getResource("z81"),10),yg=parseInt(Z.Utils.getResource("z78"),10),Hf=parseInt(Z.Utils.getResource("z80"),10),yd=parseInt(Z.Utils.getResource("z77"),10),mb=yd,If=parseInt(Z.Utils.getResource("z79"),
10),be=parseInt(Z.Utils.getResource("z76"),10),ae=parseInt(Z.Utils.getResource("z75"),10),hf=null,jf=null,kf=null,zg=parseFloat(Z.Utils.getResource("z173UNCONVERTED"),10),Ag=null!==Z.panBuffer?Z.panBuffer:parseFloat(Z.Utils.getResource("z173"),10),ff="unconverted"!=Z.tileSource?Ag:zg,Ff=parseFloat(Z.Utils.getResource("z74"),10),Sf=parseFloat(Z.Utils.getResource("DEFAULT_z310SIZEMAXBROWSER"),10),Rf=parseFloat(Z.Utils.getResource("DEFAULT_z310SIZEMAXFIREFOX"),10),Qf=parseFloat(Z.Utils.getResource("DEFAULT_z310SIZEMAXIMAGESET"),
10),aa,W,te,ud,ma,na,zb,Ab,Ua,Va,hc,ic,Qe,Re,Db,Eb;aa=Z.viewerW;W=Z.viewerH;te=ud=0;W-=rd;0==Z.toolbarPosition&&(ud+=rd);var ca=null,Wa,hb,yc=null,Se=null,Pd=!1,vg=parseInt(Z.Utils.getResource("z122"),10),qe=Math.round(parseFloat(Z.Utils.getResource("z176"))*Z.panSpeed),vb=0,wb=0,Ud=null,Vd=null,wg=parseInt(Z.Utils.getResource("DEFAULT_ANIMATIONOPTIMALMOTIONIMAGES"),10),xg=parseInt(Z.Utils.getResource("DEFAULT_ANIMATIONOPTIMALPOSITIONDELTA"),10),Xa=0,Ya=0,Fb=0,Gb=0,Pa=null,Sd=null,Td=null,jc=null,
Nd=null,cd=null,Yb=null,sd=parseFloat(Z.Utils.getResource("z242"))*Z.zoomSpeed;Z.mobileDevice&&(sd/=2);var lb=0,wc=null,Oe=0,Pe=parseInt(Z.Utils.getResource("z238"),10),Ge=parseFloat(Z.Utils.getResource("z112"))*Z.fadeInSpeed,ce=null,Bg=parseFloat(Z.Utils.getResource("z239")),Te=parseFloat(Z.Utils.getResource("z240"));Z.mobileDevice&&(Te/=2);var Mc=null,Ld=0;if(!Z.fullScreenVisible&&!Z.fullPageVisible)var Ue,Jf,Kf,Lf,Mf,Ve,Nf,td,We;if(Z.virtualPointerVisible)var Of=Z.Utils.getResource("z232"),Q,zc;
Z.crosshairsVisible&&Z.Utils.drawCrosshairs(Z.ViewerDisplay,aa,W);if(Z.measureVisible||null!==Z.editMode){var hg=Z.Utils.getResource("z431"),ig=Z.Utils.getResource("z431TOTAL"),jg=Z.Utils.getResource("z433"),lg=Z.Utils.getResource("z430"),kg=Z.Utils.getResource("z434"),dg=parseFloat(Z.Utils.getResource("DEFAULT_MEASURECAPTIONBACKOPACITY"));parseInt(Z.Utils.getResource("z154"),10);parseInt(Z.Utils.getResource("z156"),10)}if(Z.Utils.stringValidate(Z.watermarkPath))var Dc,of,cf=[],df=[];if(Z.tour)var Hc,
Gd,Xe,Me;null!==Z.imagePath&&-1!=Z.imagePath.indexOf("zSlidePath")&&(Z.slidePath=Z.imagePath.substring(11,Z.imagePath.length),Z.slideshow=!0);null!==Z.imagePath&&(-1!=Z.imagePath.indexOf("zAnimationPath")?(Z.imageSetPath=Z.imagePath.substring(15,Z.imagePath.length),Z.imageSet=!0,Z.animation=!0):-1!=Z.imagePath.indexOf("zSlidestackPath")&&(Z.imageSetPath=Z.imagePath.substring(16,Z.imagePath.length),Z.imageSet=!0,Z.slidestack=!0));if(Z.slideshow){var db=[],re=[],vc,nb,Ye,Ze,Xd,Ne,Pf=parseFloat(Z.Utils.getResource("z211"))*
Z.slideTransitionSpeed;Z.slideTransitionTimeout=null;Z.slideOpacity=0}if(Z.measureVisible||Z.tour||Z.hotspots||Z.annotations){var Le=!1,t=[],Ib=[],Cd=[],Dd=[],Ca=null,N=null,sc=null,pg=null,Hd=null,Df=!1,Ga=!0,Ia=null,Jc=!1,ag=new Z.NetConnector,Cf=Z.Utils.getResource("z177"),rg=parseFloat(Z.Utils.getResource("z179")),Fc=parseInt(Z.Utils.getResource("z180"),10),sg=Z.Utils.getResource("z96"),Ef=Z.Utils.getResource("z98"),tg=Z.Utils.getResource("z113"),ug=Z.Utils.getResource("z216"),me=parseInt(Z.Utils.getResource("z97"),
10),qg=Z.Utils.getResource("z177FREEHAND"),Ke=Z.Utils.getResource("z89"),gg=Z.Utils.getResource("DEFAULT_CAPTIONBACKCOLOR"),eg=parseInt(Z.Utils.getResource("z129"),10),wf=parseInt(Z.Utils.getResource("z160"),10),xf=parseInt(Z.Utils.getResource("z151"),10),fg=parseInt(Z.Utils.getResource("z130"),10),yf=parseInt(Z.Utils.getResource("z161"),10),zf=parseInt(Z.Utils.getResource("z152"),10);Z.mobileDevice&&(me*=2);Z.maskVisible&&(parseFloat(Z.Utils.getResource("DEFAULT_MASKFADESTEP")),Z.setCallback("viewUpdateComplete",
function(){Z.maskingSelection&&setMask()}));if(Z.tour||Z.hotspots)var fa,se,$d,$e,Ed,Fd,Jb=[];else if(Z.measureVisible||Z.annotations){var Kb,Yd,pc,ke,og,uf,ob=[],xd=[],ef=[],pb=[],Sb=[];labelCaptionPositionListDP=[];labelTargetListDP=[]}}if(null!==Z.imagePath&&"null"!=Z.imagePath){if(1==Z.localUse&&"ZoomifyImageFile"==Z.tileSource){Z.Utils.showMessage(Z.Utils.getResource("z290"),!0);return}1==Z.localUse&&(Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||Z.browser==Z.browsers.IE&&11==Z.browserVersion||
Z.browser==Z.browsers.SAFARI&&7<=Z.browserVersion)&&Z.Utils.showMessage(Z.Utils.getResource("z288"),!0);if(null!==Z.imageW&&null!==Z.imageH&&null!==Z.sourceMagnification)"undefined"!==typeof k.getStatus?f(Z.imageW,Z.imageH,Ja,Oa,null,null,null,null,Z.sourceMagnification,Z.focal,Z.quality):window.setTimeout(function(){f(Z.imageW,Z.imageH,Ja,Oa,null,null,null,null,Z.sourceMagnification,Z.focal,Z.quality)},100);else if(null!==Z.imageProperties){var Cg=Z.Utils.xmlConvertTextToDoc(Z.imageProperties);H(Cg)}else if("unconverted"==
Z.tileSource)J(Qb);else if(-1==Z.imagePath.indexOf("zSlidePath")&&-1==Z.imagePath.indexOf("zAnimationPath")){var af=new Z.NetConnector;A(Qb,af,La)}}Z.slideshow&&(af=new Z.NetConnector,e(af));this.setSizeAndPosition=function(a,b,c,d){y(a,b,c,d)};this.syncViewportResize=function(a,b,c,d,e,g,f){k.setSizeAndPosition(Z.viewerW,Z.viewerH,0,0);k.resizeViewport(a,b,c,d)};this.resizeViewport=function(a,b,c,d){k.validateXYZDefaults();k.setView(a,b,c,d)};this.loadImageProperties=function(a,b,c){A(a,b,c)};this.parseZIFHeader=
function(a){m();if(73==a[0]&&73==a[1]&&43==a[2]&&0==a[3]&&8==a[4]&&0==a[5]&&0==a[6]&&0==a[7]&&16==a[8]&&0==a[9]&&0==a[10]&&0==a[11]&&0==a[12]&&0==a[13]&&0==a[14]&&0==a[15]){for(var b=Z.Utils.longValue(a,8),c=Z.Utils.longValue(a,b),d=1,e=null,g=null,l=null,r=null,u=null,P=null,P=2;0!=b;){for(e=0;e<c;e++)switch(g=b+8+20*e,Z.Utils.shortValue(a,g)){case 256:gb[d-1]=Z.Utils.intValue(a,g+12);break;case 257:qb[d-1]=Z.Utils.intValue(a,g+12);break;case 322:l=Z.Utils.intValue(a,g+12);break;case 323:r=Z.Utils.intValue(a,
g+12);break;case 324:var p=tierTileOffsetsCount[d-1]=Z.Utils.longValue(a,g+4);Qc[d-1]=Z.Utils.longValue(a,g+12);u+=p;break;case 325:p=tierTileByteCountsCount[d-1]=Z.Utils.longValue(a,g+4),Ac[d-1]=1==p?Z.Utils.intValue(a,g+12):2==p?Z.Utils.intValue(a,g+12)+","+Z.Utils.intValue(a,g+16):Z.Utils.longValue(a,g+12)}b=Z.Utils.longValue(a,b+20*c+8);c=Z.Utils.longValue(a,b);d++}e=gb[0];g=qb[0];eb=d-1;gb.reverse();qb.reverse();tierTileOffsetsCount.reverse();Qc.reverse();tierTileByteCountsCount.reverse();Ac.reverse();
!isNaN(e)&&0<e&&!isNaN(g)&&0<g&&!isNaN(l)&&0<l&&!isNaN(r)&&0<r&&0<u?"undefined"!==typeof k.getStatus?f(e,g,l,r,u,P,null,null,null,null,null):h(e,g,l,r,u,P,null,null,null,null,null):"ZoomifyImageFolder"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z252")):Z.Utils.showMessage(Z.Utils.getResource("z250"))}};this.parseZIFOffsetChunk=function(a,b){var c=Z.Utils.arrayIndexOfObjectValue(tierTileOffsetChunks,"chunkID",b);-1!=c&&(tierTileOffsetChunks[c].chunk=a,xa(b,"offset"))};this.parseZIFByteCountChunk=
function(a,b){var c=Z.Utils.arrayIndexOfObjectValue(tierTileByteCountChunks,"chunkID",b);-1!=c&&(tierTileByteCountChunks[c].chunk=a,xa(b,"byteCount"))};this.parseZIFImage=function(a,b,c){a="data:image/jpeg;base64,"+Z.Utils.encodeBase64(a);var d;"image-display"==c?d=S:"image-backfill"==c?d=X:"navigator"==c&&(d=Z.Navigator.z556);b=Z.Utils.createCallback(null,d,b);Z.Utils.createImageElementFromBytes(a,b)};this.z602=function(a){H(a)};this.validateXYZDefaults=function(a){a&&Z.Utils.resetParametersXYZ(Z.parameters);
var b=parseFloat(Z.Utils.getResource("z143")),c=parseFloat(Z.Utils.getResource("z144")),d=parseFloat(Z.Utils.getResource("z145")),e=parseFloat(Z.Utils.getResource("DEFAULT_INITIALR")),g=parseFloat(Z.Utils.getResource("z163"));a=parseFloat(Z.Utils.getResource("z153"));b=isNaN(b)?null:b;c=isNaN(c)?null:c;d=isNaN(d)?null:d;e=isNaN(e)?null:e;g=isNaN(g)?null:g;a=isNaN(a)?null:a;Z.parameters?(Z.parameters.zInitialX||(Z.initialX=b),Z.parameters.zInitialY||(Z.initialY=c),Z.parameters.zInitialZoom||(Z.initialZ=
d),Z.parameters.zInitialRotation||(Z.initialR=e),Z.parameters.zMinZoom||(Z.minZ=g),Z.parameters.zMaxZoom||(Z.maxZ=a)):(Z.initialX=b,Z.initialY=c,Z.initialZ=d,Z.initialR=e,Z.minZ=g,Z.maxZ=a);null===Z.initialX&&(Z.initialX=Z.imageW/2);null===Z.initialY&&(Z.initialY=Z.imageH/2);Z.fitZ=k.z468(0);Z.fillZ=k.calculateZoomToFill(0);b=k.getStatus("initialized")?k.getRotation():Z.initialR;a=k.z468(b);b=k.calculateZoomToFill(b);1<Z.fitZ&&(null!==Z.maxZ?Z.fitZ>Z.maxZ&&(Z.fitZ=Z.maxZ):"unconverted"==Z.tileSource&&
(Z.fitZ=1));1<Z.fillZ&&(null!==Z.maxZ?Z.fillZ>Z.maxZ&&(Z.fillZ=Z.maxZ):"unconverted"==Z.tileSource&&(Z.fillZ=1));null===Z.minZ||-1==Z.minZ?Z.minZ=Z.fitZ:0==Z.minZ&&(Z.minZ=Z.fillZ);if(null===Z.maxZ||-1==Z.maxZ)Z.maxZ=1;null===Z.initialZ||-1==Z.initialZ?Z.initialZ=a:0==Z.initialZ&&(Z.initialZ=b);Z.initialZ<Z.minZ&&(Z.initialZ=Z.minZ);Z.initialZ>Z.maxZ&&(Z.initialZ=Z.maxZ)};this.getViewW=function(){return aa};this.getViewH=function(){return W};this.getDisplayW=function(){return ma};this.getDisplayH=
function(){return na};this.getImagePath=function(){return Qb};this.setImagePath=function(a){Qb=a};this.getViewportID=function(){return La};this.getTierCount=function(){return eb};this.getTileW=function(){return Ja};this.getTileH=function(){return Oa};this.getTierCurrent=function(){return ea};this.getTierBackfill=function(){return Ka};this.getTierBackfillDynamic=function(){return Ha};this.getTierBackfillOversize=function(){return mb};this.getTierScale=function(){return oa};this.getX=function(){var a=
parseFloat(F.left)-Ua,b=k.getZoom();return ad-a/b};this.getY=function(){var a=parseFloat(F.top)-Va,b=k.getZoom();return od-a/b};this.getZoom=function(){return Y(ea,oa)};this.getRotation=function(){return Z.imageR};this.getTiersScaleUpMax=function(){return dd};this.getTiersScaleDownMax=function(){return Wd};this.getTilesCacheMax=function(){return Vb};this.getTierWs=function(){return gb.join(",")};this.getTierHs=function(){return qb.join(", ")};this.getTierTileCounts=function(){return sb.join(", ")};
this.getTilesToLoad=function(){return wd};this.getTilesLoadingNames=function(){return""==za.join(", ")?"Current view loading complete":za.join(", ")};this.getTilesToDraw=function(){return Cc};this.getConstrainPan=function(a){return Z.constrainPan};this.setConstrainPan=function(a){Z.constrainPan=0!=a;Z.constrainPanStrict=2==a?!0:!1;Z.constrainPan&&k.toggleConstrainPan(!0)};this.getSmoothPan=function(){return Z.smoothPan};this.setSmoothPan=function(a){Z.smoothPan=a};this.getSmoothPanEasing=function(){return Z.smoothPanEasing};
this.setSmoothPanEasing=function(a){Z.smoothPanEasing=a};this.getSmoothPanGlide=function(){return Z.smoothPanGlide};this.setSmoothPanGlide=function(a){Z.smoothPanGlide=a};this.setCoordinatesDisplayVisibility=function(a){a?(Z.Utils.addEventListener(document,"mousemove",Nc),Z.Utils.addEventListener(document,"mousedown",Nc)):(Z.coordinatesVisible=!1,Z.Utils.removeEventListener(document,"mousemove",Nc),Z.Utils.removeEventListener(document,"mousedown",Nc))};this.setTourPath=function(a,b){k.setHotspotPath(a,
b)};this.setHotspotPath=function(a,b){"undefined"===typeof a||Z.Utils.stringValidate(a)?(Z.hotspotPath=Z.Utils.stringRemoveTrailingSlashCharacters(a),Z.hotspotFolder=Z.hotspotPath,".xml"==Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-4,Z.hotspotPath.length)&&(Z.hotspotFolder=Z.hotspotFolder.substring(0,Z.hotspotFolder.lastIndexOf("/"))),b||(k.deleteAllHotspots(),ve(La))):(Z.hotspotPath=null,Z.hotspotFolder=null,k.deleteAllHotspots())};this.getHotspots=function(){return t};this.setHotspots=
function(a){t=a.slice(0)};this.setVisibility=function(a){a=a?"inline-block":"none";qc&&!ib&&(ib=qc.style);ib&&(ib.display=a);cb&&!F&&(F=cb.style);F&&(F.display=a)};this.showLists=function(a){var b=a?"visible":"hidden";Z.hotspots&&Z.Viewer.setVisibilityHotspotChoiceList(a,La.toString());nb&&(nb.style.visibility=b);Z.imageSet&&imageSetList&&(imageSetList.style.visibility=b)};this.z619=function(b){b||(q(ae,Ra),hf=!0);(!Z.imageSet||a==Z.imageSetStart||b)&&eb>If&&(q(be,Ra),jf=!0,eb>Hf&&(q(yd,Ra),kf=!0),
k.setStatus("backfillPrecached",!0));Ra.sort();Ra=Z.Utils.arrayUnique(Ra);lc=Ra.slice(0);k.traceDebugValues("tilesBackfillToPrecache",null,lc.length);ra(Ra,X,"simple","image-backfill")};this.updateView=function(b){if("undefined"===typeof a||null===a)a=0;var c=Z.mouseIsDown||Z.buttonIsDown||Z.keyIsDown||Z.mouseWheelIsDown,d=oa!=Zb||k.getZoom()!=Z.imageZ||Z.imageZ!=Z.priorZ,e=parseFloat(F.left)!=Ua||parseFloat(F.top)!=Va||k.getX()!=Z.imageX||k.getY()!=Z.imageY,g=Z.fullViewPrior;if(d||e||g||"undefined"!==
typeof b&&b&&(!c||Z.animation)){if(!Z.imageSet||!Z.Viewer.getStatus("ready")||a>Z.viewportCurrentID-1&&a<Z.viewportCurrentID+1){nd();var f=!1;if(b||parseFloat(Fa.width)!=qa.width){if(Z.useCanvas){Fa.width=qa.width+"px";Fa.height=qa.height+"px";Fa.left="0px";Fa.top="0px";Ea.restore();Ea.save();try{Ea.scale(oa,oa)}catch(l){Z.Utils.showMessage(Z.Utils.getResource("ERROR_SCALINGCANVASFORUNCONVERTEDIMAGE")),console.log("In function z630 scaling canvas:  "+l)}Lb&&(Mb.width=qa.width+"px",Mb.height=qa.height+
"px",Mb.left="0px",Mb.top="0px");Ma&&(Tb.width=Ma.width+"px",Tb.height=Ma.height+"px",Tb.left="0px",Tb.top="0px");Aa&&(Ub.width=Aa.width+"px",Ub.height=Aa.height+"px",Ub.left="0px",Ub.top="0px");pa&&(Ha?(ga.width=pa.width+"px",ga.height=pa.height+"px",ga.left=Db+"px",ga.top=Eb+"px",Nb.restore(),Nb.save(),Nb.scale(Rb,Rb)):(ga.width=hc+"px",ga.height=ic+"px",ga.left=Db+"px",ga.top=Eb+"px"))}f=!0}if(b||parseFloat(F.left)!=Ua||parseFloat(F.top)!=Va)f=parseFloat(F.left)-Ua,c=parseFloat(F.top)-Va,0!=Z.imageR&&
(c=Z.Utils.rotatePoint(f,c,Z.imageR),f=c.x,c=c.y),F.left=Ua+"px",F.top=Va+"px",Ha||(Db=parseFloat(ga.left)+f,Eb=parseFloat(ga.top)+c,ga.left=Db+"px",ga.top=Eb+"px"),g=k.getZoom(),Z.imageX=ad=Z.imageX-f/g,Z.imageY=od=Z.imageY-c/g,f=!0;f&&(K(qa,ea,fb,"centerOut",!1,"1a. Updating view: resetting display positions"),Z.maskingSelection&&Lb&&displayMask(),Ha&&K(pa,Ka,ab,"simple",!1,"1b. Updating view: resetting backfill positions"));f=!1;if("undefined"!==typeof b&&b||oa!=Zb||k.getZoom()!=Z.imageZ||!k.getStatus("initialized")){oa!=
Zb&&(Z.imageZ=k.getZoom());Z.imageZ<Z.minZ&&(Z.imageZ=Z.minZ);Z.imageZ>Z.maxZ&&(Z.imageZ=Z.maxZ);g=dd;for(c=eb;g/2>=Z.imageZ;)c--,g/=2;c=0>c-1?0:c-1;g=ja(c,Z.imageZ);if(c!=ea||g!=oa)Z.useCanvas&&(Ea.restore(),Ea.save(),Ea.scale(g,g)),ea!=c&&(Ce=!0),ea=c,oa=g;Zb=oa;if("unconverted"!=Z.tileSource){Ha=!1;ea>ue?(Ka=ea-yg,Ha=!0):Ka=ea>Hf?yd:ea>If?be:ae;tierBackfillScalePrior=Rb=ja(Ka,Z.imageZ);var c=gb[Ka],g=qb[Ka],r=Z.imageX*Z.imageZ,h=Z.imageY*Z.imageZ;Ha?(c=Ff,hc=ma*c,ic=na*c,Db=-(ma/c),Eb=-(na/c),
Qe=zb*c,Re=Ab*c,pa.width=hc,pa.height=ic,ga.width=pa.width+"px",ga.height=pa.height+"px",ga.left=Db+"px",ga.top=Eb+"px",Z.useCanvas&&(ba&&($a=ja(mb,Z.imageZ),Da.restore(),Da.save(),Da.scale($a,$a),0!=Z.imageR&&Da.rotate(Z.imageR*Math.PI/180)),Nb.restore(),Nb.translate(Qe,Re),Nb.save(),Nb.scale(Rb,Rb))):(hc=c*Rb,ic=g*Rb,Db=zb-r,Eb=Ab-h,pa.width=c,pa.height=g,Z.useCanvas&&(ga.width=hc+"px",ga.height=ic+"px"),ga.left=Db+"px",ga.top=Eb+"px");K(pa,Ka,ab,"simple",!1,"2. Updating view: changing tier - backfill")}!b&&
0<Vb&&(f=!0)}else k.traceDebugValues("updateView-noChange");"unconverted"!=Z.tileSource&&Ha?T(!0):ba&&Z.Utils.clearDisplay(ba)}Z.imageSet&&a!=Z.viewportCurrentID?(k.setStatus("displayLoaded",!0),k.setStatus("displayDrawn",!0)):("unconverted"!=Z.tileSource?(T(),K(qa,ea,null,"centerOut",f,"3. Updating view: prior to loading of any new tiles")):"undefined"!==typeof jb&&(b=-Z.imageX,f=-Z.imageY,Z.Utils.clearDisplay(qa),Ea.drawImage(jb,b,f)),Z.maskingSelection&&setMask(),0<za.length&&ra(za,S,"centerOut",
"image-display"),k.syncViewportRelated());e&&Z.Utils.validateCallback("viewPanned");d&&Z.Utils.validateCallback("viewZoomed");(e||d)&&Z.Utils.validateCallback("viewChanged")}};syncTransitionCanvas=function(){bb&&cc&&ec&&(bb.width=qa.width,bb.height=qa.height,cc.width=Fa.width,cc.height=Fa.height,cc.left=Fa.left,cc.top=Fa.top,ec.restore(),ec.save(),ec.translate(zb,Ab),ec.scale(oa,oa))};this.loadUnconvertedImage=function(a){J(a)};this.getUnconvertedImage=function(){return jb};this.createUnconvertedImageThumbnail=
function(){if(Z.useCanvas){if("undefined"!==typeof jb){var a=null,a=150/Z.imageW,b=Z.Utils.createContainerElement("canvas","tempCanvas","inline-block","absolute","visible",Z.imageW*a+"px",Z.imageH*a+"px","0px","0px","none","0px","transparent none","0px","0px","normal"),c=b.getContext("2d");try{c.scale(a,a),c.drawImage(jb,0,0)}catch(d){console.log("In function initializeViewportContinue scaling canvas:  "+d)}a=new Image;a.src=b.toDataURL("image/jpeg",Z.saveImageCompression);return a}window.setTimeout(function(){createUnconvertedImageThumbnail()},
100)}};this.formatTilePath=function(a,b,c,d){var e;if("ZoomifyImageFile"==Z.tileSource){e="offsetLoading";var g="loading",f="loading",l;if(1==tierTileOffsetsCount[a])g=Qc[a];else{var r=new ia(a,b,c),h=r.chunkID+","+a+","+b+","+c+","+d+",offset";l=Z.Utils.arrayIndexOfObjectValue(tierTileOffsetChunks,"chunkID",r.chunkID);-1==l?(k.traceDebugValues("z532",r.chunkID+","+a+","+b+","+c+","+d),-1==Z.Utils.arrayIndexOf(Sa,h)&&(Sa[Sa.length]=h),tierTileOffsetChunks[tierTileOffsetChunks.length]={chunkID:r.chunkID,
chunk:"loading"},l=new Z.NetConnector,l.loadByteRange(Qb,r.chunkStart,r.chunkEnd,"offset",null,r.chunkID)):"loading"==tierTileOffsetChunks[l].chunk?-1==Z.Utils.arrayIndexOf(Sa,h)&&(Sa[Sa.length]=h):"loading"!=tierTileOffsetChunks[l].chunk&&(l=tierTileOffsetChunks[l].chunk,g=Z.Utils.longValue(l,r.offsetStartInChunk))}1==tierTileByteCountsCount[a]?f=Ac[a]:(l=b+c*Ta[a],2==tierTileByteCountsCount[a]?(a=Ac[a],f=0==l?a.substring(0,a.indexOf(",")):a.substring(a.indexOf(",")+1,a.length)):(r=new p(a,b,c),
a=r.chunkID+","+a+","+b+","+c+","+d+",byteCount",l=Z.Utils.arrayIndexOfObjectValue(tierTileByteCountChunks,"chunkID",r.chunkID),-1==l?(-1==Z.Utils.arrayIndexOf(Sa,a)&&(Sa[Sa.length]=a),tierTileByteCountChunks[tierTileByteCountChunks.length]={chunkID:r.chunkID,chunk:"loading"},l=new Z.NetConnector,l.loadByteRange(Qb,r.chunkStart,r.chunkEnd,"byteCount",null,r.chunkID)):"loading"==tierTileByteCountChunks[l].chunk?-1==Z.Utils.arrayIndexOf(Sa,a)&&(Sa[Sa.length]=a):"loading"!=tierTileByteCountChunks[l].chunk&&
(l=tierTileByteCountChunks[l].chunk,f=Z.Utils.intValue(l,r.bcStartInChunk))));"loading"==g||isNaN(g)||"loading"==f||isNaN(f)||(e=Qb+"?"+g.toString()+","+f.toString())}else if("ZoomifyImageFolder"==Z.tileSource){e=c*Ta[a]+b;for(g=0;g<a;g++)e+=sb[g];a=Qb+"/TileGroup"+Math.floor(e/256)+"/"+a+"-"+b+"-"+c+"."+Z.tileType;if(Z.browser==Z.browsers.IE&&9>Z.browserVersion||0==Vb)a=Z.Utils.cacheProofPath(a);e=a}return e};this.getClickCoordsAtZoom=function(a,b){var c=this.getClickCoordsInImage(a,b);return new Z.Utils.Point(c.x*
b,c.y*b)};this.getClickCoordsInImage=function(a,b,c){a=Z.Utils.event(a);var d=null;if(a){var e=a.type;if("undefined"===typeof c||null===c)"touchstart"==e||"touchend"==e||"touchcancel"==e?(touch=Z.Utils.getFirstTouch(a),"undefined"!==typeof touch&&(target=touch.target,c=new Z.Utils.Point(touch.pageX,touch.pageY))):(target=Z.Utils.target(a),relatedTarget=Z.Utils.relatedTarget(a),c=Z.Utils.getMousePosition(a));"undefined"!==typeof c&&null!==c&&(a=M(c.x,c.y),d=ka(a.x,a.y,b))}return d};this.getClickZoomCoords3D=
function(a,b,c,d,e){var g=parseFloat(Z.Utils.getResource("z93TIERSKIPTHRESHOLD"));b=M(b.x,b.y);b=ka(b.x,b.y,Z.imageZ);var f=Y(c,d);a=a.altKey;e?a?f=Z.fitZ:(e=ja(c,Z.fitZ),d-e<g?f=Z.fitZ:d>1+g?f=Y(c,1):0<c?f=Y(c-1,1):"unconverted"==Z.tileSource&&(f=Z.fitZ)):a?f=1:d<1-g?f=Y(c,1):c<eb-1&&(f=Y(c+1,1));return new Z.Utils.Point3D(b.x,b.y,f)};this.calculateCurrentCenterCoordinates=function(a,b,c){if("undefined"===typeof a||null===a)a=new Z.Utils.Point(parseFloat(F.left),parseFloat(F.top));if("undefined"===
typeof c||null===c)c=Z.imageR;0>c&&(c+=360);if("undefined"===typeof b||null===b)b=k.getZoom();var d=(a.x-Ua)/b;a=(a.y-Va)/b;var e,g;switch(c){case 0:e=Z.imageX-d;g=Z.imageY-a;break;case 90:e=Z.imageX-a;g=Z.imageY+d;break;case 180:e=Z.imageX+d;g=Z.imageY+a;break;case 270:e=Z.imageX+a,g=Z.imageY-d}return new Z.Utils.Point(e,g)};this.z542=function(a,b){if("undefined"===typeof a||null===a)a=ea;if("undefined"===typeof b||null===b)b=!1;return new O(k.z541(b),a)};this.z541=function(a){var b=parseFloat(F.left)-
Ua,c=parseFloat(F.top)-Va;if(Z.useCanvas)var d=parseFloat(F.width)/ha.width,b=b/d,c=c/d;d=k.getZoom();0!=b&&(b/=d);0!=c&&(c/=d);var b=Z.imageX-b,c=Z.imageY-c,e,g,f;a?(a=-(aa/2),e=aa/2,g=-(W/2),f=W/2):(a=-(ma/2),e=ma/2,g=-(na/2),f=na/2);return new V(b,c,a,e,g,f,d)};this.z468=function(a){var b=Z.imageW/Z.imageH>aa/W?aa/Z.imageW:W/Z.imageH;if(90==a||270==a)b=Z.imageW/Z.imageH>aa/W?aa/Z.imageH:W/Z.imageW;return b};this.calculateZoomToFill=function(a){var b=Z.imageW/Z.imageH>aa/W?W/Z.imageH:aa/Z.imageW;
if(90==a||270==a)b=Z.imageW/Z.imageH>aa/W?W/Z.imageW:aa/Z.imageH;return b};this.calculateZoomForResize=function(a,b,c,d,e){var g=a,f=Z.imageW*a,l=Z.imageH*a;b=d/b;c=e/c;f<d&&l<e?g=a:f==d&&l<e?g=-1:f<d&&l==e?g=-1:f>d&&l<=e?g=a*b:f<=d&&l>e?g=a*c:f>d&&l>e&&(d=1,1<=b&&1<=c?d=b>c?b:c:1>=b&&1>=c&&(d=b<c?b:c),g=a*d);g<Z.minZ&&(g=Z.minZ);g>Z.maxZ&&(g=Z.maxZ);return g};this.z482=function(a,b){return Y(a,b)};this.syncViewportToNavigator=function(a){var b=Z.imageR;0>b&&(b+=360);var c=la(a.x,a.y,Z.imageZ,b,"image");
a=Z.imageY;var d=c.y,c=dX=Z.imageX-c.x;a=dY=a-d;0!=b&&(90==b?(c=-dY,a=dX):180==b?(c=-dX,a=-dY):270==b&&(c=dY,a=-dX));b=c*Z.imageZ;a*=Z.imageZ;d=a+Va;F.left=b+Ua+"px";F.top=d+"px";ba&&Ha&&(Z.mobileDevice||Math.abs(b)>aa/2||Math.abs(a)>W/2)&&K(ba,mb,ab,"simple",!1,"Updating backfill oversize display")};this.getStatus=function(a){a=Z.Utils.arrayIndexOfObjectValue(kc,"state",a);return-1==a?!1:kc[a].status};this.setStatus=function(a,b){var c=!1,d=Z.Utils.arrayIndexOfObjectValue(kc,"state",a);-1==d?(c=
b,kc[kc.length]={state:a,status:b}):(!kc[d].status&&b&&(c=!0),kc[d].status=b);c&&(Z.Utils.validateCallback(a+"Viewport"),Z.Viewer.validateViewerStatus(a))};this.traceDebugValues=function(a,b,c,d){c="undefined"!==typeof c&&null!==c?c:null;b=null!==b?b:"";switch(a){case "tilesToDisplay":de=c;Ad=Bc=Bd=ee=0;Cc=c;Uc=0;tilesTimeStart=(new Date).getTime();fe=0;window.clearTimeout(hd);hd=null;hd=window.setTimeout(r,mf);break;case "tilesInCache":ee=c;break;case "z581-image-display":Bd+=1;break;case "onTileLoad":Bc+=
1;Uc=((new Date).getTime()-c)/1E3;fe=Bc/Uc;break;case "z507":c=Z.Utils.arrayIndexOf(mc,b);-1!=c&&(mc.splice(c,1),Ad+=1,--Cc);break;case "tilesBackfillToPrecache":lf=c;break;case "onTileBackfillPrecache":De+=1;break;case "tilesBackfillToDisplay":Gf=Ee=c;break;case "z599":Fe+=1;break;case "displayBackfillTile":c=Z.Utils.arrayIndexOf(lc,b),-1!=c&&(lc.splice(c,1),He+=1,--Gf)}2!=Z.debug&&3!=Z.debug||Z.Utils.traceTileStatus(de,ee,Bd,Bc,Ad,Cc);if(2==Z.debug){var e="undefined"!==typeof d&&null!==d&&0<d.length?
d.join(", "):"none";c=!0;var g="";switch(a){case "updateView-noChange":g="Updating view: no change of tier.";break;case "tilesToDisplay":g="Tiles to display: "+e;break;case "tilesInCache":g="Tiles in cache: "+e;break;case "tilesToLoad":g="Tiles to load: "+e;break;case "tilesToLoad-backfill":g="Tiles to load-backfill: "+e;break;case "z622-viewportDisplay":a=[];e=0;for(g=d.length;e<g;e++)a[a.length]=d[e].name;g="Tiles from cache-"+b+": "+a.join(", ");break;case "z622-backfillDisplay":a=[];e=0;for(g=
d.length;e<g;e++)a[a.length]=d[e].name;g="Tiles from cache-"+b+": "+a.join(", ");break;case "z577-image-display":g="Tile requests for display: "+b+e;break;case "z577-image-backfill":g="Tile requests for backfill: "+b+e;break;case "imageRequestTimeout":g="Image request for "+b;break;case "z581-image-display":g="Tile request-display: "+b;c=!1;break;case "z581-image-backfill":g="Tile request-backfill: "+b;c=!1;break;case "z581DelayForOffset":g="Tile not yet being loaded - offset chunk loading in progress: "+
b;break;case "onTileLoad":g="Tiles received-display: "+b;c=!1;break;case "z599":g="Tiles received-backfill: "+b;0==Ra.length&&(g+="\n\nTile loading complete for backfill: all requested tiles received.");c=!1;break;case "z532":g="Tile request recorded for after load offset chunk: "+b;break;case "z637":g="Requesting tiles after offset chunk received: "+e;break;case "z531":g="Tile request recorded for after load offset chunk: "+b;c=!1;break;case "z636":g="Requesting tiles after offset chunk received: "+
e;c=!1;break;case "z577Retry":g=b;break;case "z507":g="Tile displaying: "+b;c=!1;break;case "blankLine":g=" "}""!=g&&Z.Utils.trace(g,!1,c)}};this.updateProgress=function(a,b){var c=Z,d;0==a&&0==b?(Z.Utils.validateCallback("loadingTilesComplete"),Z.Utils.validateCallback("loadingTilesCompleteGetLabelIDs"),d=void 0):(d=Math.round(100-b/a*100),d=Math.round(d/10));c.updateViewPercent=d;Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&Z.Toolbar.updateProgress(a,b)};this.showVirtualPointer=function(){if(zc){var a=
zc.width,b=zc.height,c=Z.viewerW/2+100,d=Z.viewerH-200,e=zc.cloneNode(!1);e.width=a;e.height=b;Q=Z.Utils.createContainerElement("div","piC","inline-block","absolute","hidden",a+"px",b+"px",c+"px",d+"px","none","0px","transparent none","0px","0px","normal");Q.appendChild(e);Z.ViewerDisplay.appendChild(Q);Q.setAttribute("title",Z.Utils.getResource("z398"));a=parseInt(Z.Utils.getResource("z230"),10);Q.style.zIndex=(a+13).toString();Z.Utils.addEventListener(Q,"mousedown",P);Z.Utils.addEventListener(Q,
"touchstart",Vf);Z.Utils.addEventListener(Q,"touchmove",Wf);Z.Utils.addEventListener(Q,"touchend",Xf);Z.Utils.addEventListener(Q,"touchcancel",Yf);Z.Utils.addEventListener(e,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(e,"mousedown",Z.Utils.preventDefault)}else zc=new Image,zc.url=Of,zc.onload=k.showVirtualPointer,zc.onerror=l,zc.src=Of};this.hideVirtualPointer=function(){Q&&(Q.style.display="none")};this.parseHotspotsXML=function(b){Z.Utils.arrayClear(Jb);Z.Utils.arrayClear(Ib);
Le=!1;k.setStatus("XMLParsed",!1);Xe=Z.Utils.getResource("z226");Me=Z.Utils.getResource("z225");$d=Z.Utils.getResource("z131");se=Z.Utils.getResource("z132");hotspotListTitle=Z.tourPath?Z.Utils.getResource("z444"):Z.Utils.getResource("z424");$e=Z.Utils.getResource("z134");Ed=parseFloat(Z.Utils.getResource("DEFAULT_HOTSPOTSMINSCALE"));Fd=parseFloat(Z.Utils.getResource("DEFAULT_HOTSPOTSMAXSCALE"));var c=b.getElementsByTagName("SETUP")[0];"undefined"!==typeof c&&Z.Utils.stringValidate(c)||(c=b.getElementsByTagName("HOTSPOTSETUP")[0],
"undefined"!==typeof c&&Z.Utils.stringValidate(c)||(c=Z.Utils.xmlConvertTextToDoc("<HOTSPOTSETUP />").getElementsByTagName("HOTSPOTSETUP")[0]));if(c){var d=c.getAttribute("AUTOSTART");Z.Utils.stringValidate(d)&&(Xe="0"!=d&&"false"!=d);d=c.getAttribute("AUTOLOOP");Z.Utils.stringValidate(d)&&(Me="0"!=d&&"false"!=d);d=c.getAttribute("CHOICELIST");Z.Utils.stringValidate(d)&&($d=d);d=c.getAttribute("LISTSOURCE");Z.Utils.stringValidate(d)&&(se=d);d=Z.Utils.xmlUnescapeMinimal(unescape(c.getAttribute("LISTTITLE")));
Z.Utils.stringValidate(d)&&(hotspotListTitle=d);d=c.getAttribute("INITIALVISIBILITY");Z.Utils.stringValidate(d)&&($e="1"==d||"true"==d);d=parseFloat(c.getAttribute("MINSCALE"));isNaN(d)||(Ed=0!=d?d:1E-5);c=parseFloat(c.getAttribute("MAXSCALE"));isNaN(c)||(Fd=0!=c?c:1E4)}dc.visibility=$e?"visible":"hidden";Z.Utils.stringValidate(Z.hotspotListTitle)?hotspotListTitle=Z.hotspotListTitle:Z.Utils.stringValidate(hotspotListTitle)&&(Z.hotspotListTitle=hotspotListTitle);mg($d,hotspotListTitle,Jb,a);b=b.getElementsByTagName("HOTSPOT");
c=0;for(d=b.length;c<d;c++){var e=b[c],e=ng(e);k.createHotspotFromXML(e,!0)}2==Z.debug&&Le&&Z.Utils.trace(Z.Utils.getResource("z246"));k.setStatus("XMLParsed",!0);Xb();Z.tour?(k.initializeAudioMuteButtons(),Z.Utils.validateCallback("tourLoaded"),Xe&&!Z.tourStop&&Z.Utils.functionCallWithDelay(function(){k.tourStart()},750)):(Z.Utils.validateCallback("hotspotsLoaded"),k.setStatus("hotspotsLoaded",!0))};this.createHotspotFromParameters=function(a,b,c,d,e,g,f,l,r,h,m,u,P,p,q,t,w,B,fc,J,y,he,L,I,O,D,Ba,
G,A,F,E,ra,M,H,N){c=Z.Utils.arrayToArrayOfStrings([a,b,c,d,e,g,f,l,r,h,m,u,P,p,q,t,w,B,fc,J,y,he,L,I,O,D,Ba,G,A,F,E,ra,M,H,N]);a=Z.Utils.xmlConvertTextToDoc('<HOTSPOT ID="'+c[0]+'" NAME="'+c[1]+'" MEDIATYPE="'+c[2]+'" MEDIA="'+c[3]+'" AUDIO="'+c[4]+'" X="'+c[5]+'" Y="'+c[6]+'" ZOOM="'+c[7]+'" XSCALE="'+c[8]+'" YSCALE="'+c[9]+'" CLICKURL="'+c[10]+'" URLTARGET="'+c[11]+'" ROLLOVER="'+c[12]+'" CAPTION="'+c[13]+'" TOOLTIP="'+c[14]+'" TEXTCOLOR="'+c[15]+'" BACKCOLOR="'+c[16]+'" LINECOLOR="'+c[17]+'" FILLCOLOR="'+
c[18]+'" TEXTVISIBLE="'+c[19]+'" BACKVISIBLE="'+c[20]+'" LINEVISIBLE="'+c[21]+'" FILLVISIBLE="'+c[22]+'" CAPTIONPOSITION="'+c[23]+'" SAVED="'+c[24]+'" INTERNALID="'+c[25]+'" POIID="'+c[26]+'" SHOWFOR="'+c[31]+'" TRANSITION="'+c[32]+'" CHANGEFOR="'+c[33]+'" ROTATION="'+c[34]+'"></HOTSPOT>').getElementsByTagName("HOTSPOT")[0];null===a.getAttribute("INTERNALID")&&a.setAttribute("INTERNALID",Wb("hotspot"));b=Z.Utils.xmlConvertTextToDoc("<TEMP></TEMP>");Z.Utils.stringValidate(c[27])&&(G=Z.Utils.xmlConvertTextToDoc(G).getElementsByTagName("CAPTION")[0].innerHTML,
d=b.createElement("CAPTION"),d.innerHTML=G,a.appendChild(d));Z.Utils.stringValidate(c[28])&&(G=Z.Utils.xmlConvertTextToDoc(A).getElementsByTagName("TOOLTIP")[0].innerHTML,A=b.createElement("TOOLTIP"),A.innerHTML=G,a.appendChild(A));if(Z.Utils.stringValidate(c[30])){A=b.createElement("POLYGON");A.setAttribute("CLOSED",c[29]);G=0;for(c=E.length;G<c;G++)d=b.createElement("POINT"),d.setAttribute("X",E[G].x),d.setAttribute("Y",E[G].y),A.appendChild(d);a.appendChild(A)}k.createHotspotFromXML(a,!0)};this.createHotspotFromXML=
function(a,b){b&&(a=Bf(a,"hotspot"));var c=new cg(a);if(Z.Utils.stringValidate(c.media)||Z.Utils.stringValidate(c.caption)||null!==Z.tourPath||Z.annotations){t[t.length]=c;var d="NAME"==se?c.name:"CAPTION"==se?c.caption:c.tooltip;if(fa){var e=c.internalID;if(null!=fa){var g=Z.Utils.arrayIndexOfObjectValue(Jb,"value",e);-1!=g?(fa.options[g+("none"!=Z.hotspotListTitle&&"none"!=Z.tourListTitle?1:0)]=new Option(d,e.toString()),Jb[g]={text:d,value:e}):(fa.options[fa.options.length]=new Option(d,e.toString()),
Jb[Jb.length]={text:d,value:e})}}}d=new Cb;Z.Utils.stringValidate(c.media)&&"text"!=c.mediaType&&"polygon"!=c.media?rf(c,!0):Ec(c,d);Z.Viewer.getStatus("ready")&&(Z.Utils.validateCallback("labelCreated"),Z.Utils.validateCallback("labelCreatedGetInternalID"))};this.modifyHotspot=function(a,b,c,d,e){var g=-1,g=e?Z.Utils.arrayIndexOfObjectValue(t,"internalID",a):Z.Utils.arrayIndexOfObjectValue(t,"id",a.toString());if(-1!=g){a=t[g];if("polygon"==a.media&&("x"==b||"y"==b)){g=new Z.Utils.Point("x"==b?c:
a.x,"y"==b?c:a.y);e=g.x-a.x;for(var g=g.y-a.y,f=a.polygonPts.slice(0),l=0,r=f.length;l<r;l++)f[l].x+=e,f[l].y+=g;a.polygonPts=f.slice(0)}if("polygon"!=a.media||"xScale"!=b&&"yScale"!=b)a[b]=c;else{e=c/100;for(var g=a.polygonPts.slice(0),f="xScale"==b?"x":"y",l=a[f]-a[f]*e,r=0,h=g.length;r<h;r++)g[r][f]=g[r][f]*e+l;a.polygonPts=g.slice(0)}"rollover"==b&&0==c&&(a.visibility=!0);"media"==b&&"icon"==a.mediaType&&rf(a,!1);"undefined"!==typeof d&&null!==d&&d||Xb()}};this.deleteHotspot=function(a,b,c){var d=
-1;c?d=Z.Utils.arrayIndexOfObjectValue(t,"internalID",a):(d=Z.Utils.arrayIndexOfObjectValue(t,"id",a.toString()),-1!=d&&(a=t[d].internalID));-1!=d&&(t=Z.Utils.arraySplice(t,d,1),tf(a),!b&&Z.hotspots&&null!=fa&&(a=Z.Utils.arrayIndexOfObjectValue(Jb,"value",a),-1!=a&&(Jb=Z.Utils.arraySplice(Jb,a,1),Z.Utils.updateSelectElement(fa,Jb),b=fa.length,0!=b&&(fa.selectedIndex=a>b-1?b-1:a))))};this.deleteAllHotspots=function(){t=[];R&&(R.innerHTML="");fa.options.length=0};this.deleteAllMeasureHotspots=function(){var a=
t.length;if(0<a&&R&&0<R.childNodes.length){for(var b=0;b<a;b++)"measure"==t[b].mediaType&&(t=Z.Utils.arraySplice(t,b,1));Xb()}};this.z623=function(){Xb()};this.setLabelsVisibilityByFilter=function(a,b,c){k.setHotspotsVisibilityByFilter(a,b,c)};this.setLabelVisibilityByID=function(a,b,c){k.setHotspotVisibilityByID(a,b,c)};this.setHotspotFilterByDisplayList=function(a,b){R&&Z.Utils.clearDisplay(R);Ma&&Z.Utils.clearDisplay(Ma);Aa&&Z.Utils.clearDisplay(Aa);"undefined"!==typeof a&&null!==a&&0<a.length&&
(b?Dd=a:Cd=a);"inline-block"==dc.display&&w()};this.clearHotspotFilterByDisplayList=function(){"undefined"!==typeof Cd&&Z.Utils.arrayClear(Cd);"undefined"!==typeof Dd&&Z.Utils.arrayClear(Dd);"inline-block"==dc.display&&Xb()};this.z538=function(a){return Yc(a)};this.getLabelIDsInCurrentView=function(a,b,c){var d=[];b=new Cb(b);for(var e=k.getZoom(),g=b.box.l,f=b.box.r,l=b.box.t,r=b.box.b,h=0,m=t.length;h<m;h++){var u=t[h];c&&(g=new $f(u,b,null,!1),f=g.w/2/e,r=g.h/2/e,g=b.box.l-f,f=b.box.r+f,l=b.box.t-
r,r=b.box.b+r);u.x>g&&u.x<f&&u.y>l&&u.y<r&&(d[d.length]=a?u.internalID:u.id)}return d};this.getHotspots=function(){return t};this.getHotspotsVisibility=function(){return"inline-block"==dc.display};this.setHotspotsVisibility=function(a){dc.display=a?"inline-block":"none";Xb()};this.setHotspotVisibility=function(a,b){var c=a.firstChild;if(c&&c.style){c.style.visibility="visible";var d=b?"visible":"hidden";c.style.backgroundColor=b?"":"#FFFFFF";Z.Utils.setOpacity(c,b?1:.01);(c=a.firstChild.childNodes[1])&&
c.style&&(c.style.visibility=d);d=a.id.substring(3,a.id.length);d=Z.Utils.arrayIndexOfObjectValue(t,"internalID",d);-1!=d&&(d=t[d],d.visibility=b,"polygon"==d.media&&ub(!0))}};this.setHotspotsVisibilityByFilter=function(a,b,c){if(0<t.length)if(R&&0<R.childNodes.length)for(var d=0,e=t.length;d<e;d++){if(t[d][a]==b){var g=document.getElementById("hot"+t[d].internalID);null!==g&&k.setHotspotVisibility(g,c)}}else window.setTimeout(function(){setHotspotsVisibilityByFilter(a,b,c)},100);return c};this.setHotspotVisibilityByID=
function(a,b,c){c=c?"internalID":"id";0<t.length&&(R&&0<R.childNodes.length?(c=Z.Utils.arrayIndexOfObjectValue(t,c,a),-1!=c&&(c=document.getElementById("hot"+t[c].internalID),null!=c&&k.setHotspotVisibility(c,b))):window.setTimeout(function(){setHotspotVisibilityByID(a,b)},100))};this.getCurrentLabel=function(){return Ca};this.setCurrentLabel=function(a,b){var c=b?Z.Utils.arrayIndexOfObjectValue(t,"internalID",a):Z.Utils.arrayIndexOfObjectValue(t,"id",a);-1!=c&&(Ca=t[c],N=Ca.internalID,Xb())};this.setEditModeLabel=
function(a,b,c,d){b=La.toString();c=Z.labelMode;Z.labelMode=a;Z.Utils.removeEventListener(document,"mousemove",ua);Z.Utils.removeEventListener(document,"touchmove",ua);d=parseInt(Z.Utils.getResource("z6"),10);"view"==a&&null===Z.editMode||Z.Utils.showMessage(Z.Utils.getResource("ALERT_HOWTOEDITMODE"+a.toUpperCase()),!1,d,"center",!0);Z.overlayMessage&&(Z.overlayMessage.parentNode.style.display="none");"edit"==Z.editMode&&"editLabel"==Z.editing&&(k.modifyHotspot(N,"mediaType",a,!0,!0),"measure"==a&&
((a=Ca&&Ca.polygonPts&&0<Ca.polygonPts.length)&&"rectangle"!=c&&"polygon"!=c&&"measure"!=c&&k.modifyHotspot(N,"polygonPts",null,!0,!0),k.modifyHotspot(N,"image",null,!0,!0),k.modifyHotspot(N,"media","polygon",!1,!0),a&&(a=new Z.Utils.Point(Ca.polygonPts[0].x,Ca.polygonPts[0].y),uc(N,a))));Z.Toolbar&&0!=Z.annotationPanelVisible&&Z.measureVisible&&(a=document.getElementById("buttonMeasure"+b),b=document.getElementById("buttonMeasureExit"+b),a&&b&&(a.style.display="measure"==Z.labelMode?"none":"inline-block",
b.style.display="measure"==Z.labelMode?"inline-block":"none"));Hd=Ia=null;Jc=!1;Ga=!0;sc?ub():Xb()};this.setDrawingColor=function(a,b){var c=Z.annotationFileShared?"0":La.toString(),d;switch(a){case "buttonColor0"+c:d="#FFFFFF";break;case "buttonColor1"+c:d="#FFFF00";break;case "buttonColor2"+c:d="#00FFFF";break;case "buttonColor3"+c:d="#800080";break;case "buttonColor4"+c:d="#008000";break;case "buttonColor5"+c:d="#FF0000";break;case "buttonColor6"+c:d="#0000FF";break;case "buttonColor7"+c:d="#000000"}Ke=
Ef=lineStrokeColor=d;c="#FFFFFF"==d?"#000000":"#FFFFFF";b||null===N||1!=Z.editMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing||(k.modifyHotspot(N,"textColor",d,!0,!0),k.modifyHotspot(N,"backColor",c,!0,!0),k.modifyHotspot(N,"lineColor",d,!1,!0))};this.tourStart=function(){k.tourStop();if(!Z.tourStop){Z.tourPlaying=!0;var a=document.getElementById("buttonTourStop"),b=document.getElementById("buttonTourStart");a&&b&&(a.style.display="inline-block",b.style.display="none");Z.screensaver?Z.constrainPanStrict||
(Z.constrainPanStrict=!0):Z.Utils.playAudio(Gd,t[Hc].audio);var c=Z.screensaver?0:Lc(Hc,"next",t.length-1);null!==c&&Z.Utils.functionCallWithDelay(function(){k.goToDestination(c)},1500)}};this.tourStop=function(){Z.tourPlaying=!1;var a=document.getElementById("buttonTourStop"),b=document.getElementById("buttonTourStart");a&&b&&(a.style.display="none",b.style.display="inline-block")};this.priorDestination=function(a){Z.tourPlaying&&a&&k.tourStop();Z.screensaver?k.zoomAndPanToView(Z.priorX,Z.priorY,
Z.priorZ,Z.priorR):destinationChange("prior")};this.nextDestination=function(a){Z.tourPlaying&&a&&k.tourStop();destinationChange("next")};destinationChange=function(a){var b;if(Z.screensaver)Z.Utils.functionCallWithDelay(function(){k.goToDestination(0)},0<Z.screensaverSpeed?8E3/Z.screensaverSpeed:3E3);else if("undefined"!==typeof fa&&null!==fa&&0<fa.length){Z.Utils.playAudio(Gd,t[Hc].audio);var c=Z.tourPlaying?t[Hc].showFor:0;Z.Utils.stringValidate(t[Hc].audio)&&(c+=500);b=Lc(Hc,a,t.length-1);null!==
b?(Z.screensaver||Z.Utils.loadAudio(t[b].audio),Z.Utils.functionCallWithDelay(function(){k.goToDestination(b)},c)):k.tourStop()}};this.goToDestination=function(a){if(Z.tourStop)k.tourStop(),Z.tourStop=!1;else{var b,c,d,e=Z.tourPlaying?k.nextDestination:null;if(Z.screensaver){a=Z.Utils.getRandomInt(1,Z.imageW);b=Z.Utils.getRandomInt(1,Z.imageH);c=Z.Utils.getRandomInt(100*Z.minZ,100*Z.maxZ)/100;500>Z.imageX-a&&(a+=500,a>Z.imageW&&(a-=1E3));500>Z.imageY-b&&(b+=500,b>Z.imageH&&(b-=1E3));.3>Z.imageZ-c&&
(c+=.3,c>Z.maxZ&&(c-=.6));d=0;var g=0<Z.screensaverSpeed?8E3/Z.screensaverSpeed:null;null!==g?k.zoomAndPanToView(a,b,c,d,g,null,e):k.setView(a,b,c,d,e)}else{Hc=a;var f=t[a];a=f.x;b=f.y;c=f.z/100;d=f.rotation;g=f.changeFor;switch(t.transition){case "ZoomAndPanToView":k.zoomAndPanToView(a,b,c,d,g,null,e);break;case "SetView":k.setView(a,b,c,d,e);break;default:k.zoomAndPanToView(a,b,c,d,g,null,e)}e=Z.Utils.arrayIndexOfObjectValue(fa.options,"value",f.internalID.toString());-1!=e&&(fa.selectedIndex=e)}}};
this.parseSlidesXML=function(a){Z.Utils.arrayClear(db);Z.Utils.arrayClear(re);Xd=Z.Utils.getResource("DEFAULT_SLIDESHOWAUTOSTART");Ne=Z.Utils.getResource("DEFAULT_SLIDESHOWAUTOLOOP");Ze=Z.Utils.getResource("z202");Ye=Z.Utils.getResource("z203");Z.slideListTitle=Z.Utils.getResource("z443");var b=a.getElementsByTagName("SETUP")[0];if(b){var c=b.getAttribute("AUTOSTART");Z.Utils.stringValidate(c)&&(Xd="0"!=c&&"false"!=c);c=b.getAttribute("AUTOLOOP");Z.Utils.stringValidate(c)&&(Ne="0"!=c&&"false"!=c);
c=b.getAttribute("CHOICELIST");Z.Utils.stringValidate(c)&&(Ze=c);c=b.getAttribute("LISTSOURCE");Z.Utils.stringValidate(c)&&(Ye=c);b=b.getAttribute("LISTTITLE");Z.Utils.stringValidate(b)&&(Z.slideListTitle=b)}a=a.getElementsByTagName("SLIDE");b=0;for(c=a.length;b<c;b++){var d=new ne(a[b]);db[db.length]=d;var e="NAME"==Ye?d.name:d.media.substring(d.media.lastIndexOf("/")+1,d.media.length);re[re.length]={text:e,value:d.internalID}}e=Ze;a=Z.slideListTitle;var b=re,c="0"==e?"hidden":"visible",d=parseInt(Z.Utils.getResource("z204"),
10),g;switch(e){case "0":g=e=0;break;case "1":g=e=25;break;case "2":e=aa-d-25;g=20;break;case "3":e=aa-d-25;g=null!=toolbar?W-50:W-37.5;break;case "4":e=25;g=null!=toolbar?W-50:W-37.5;break;default:e=aa-d,g=25}e=new Z.Utils.Point(e,g);"undefined"===typeof nb||null===nb?(nb=new Z.Utils.createSelectElement("slideList",a,b,d,e.x,e.y,null,c,Jd,"change"),Z.ViewerDisplay.appendChild(nb),vc=0,a=Z.Utils.stringValidate(Z.slideListTitle)&&"none"!=Z.slideListTitle?1:0,nb.selectedIndex=a):Z.Utils.arrayClear(b);
k.initializeAudioMuteButtons();null===Z.imagePath||"null"==Z.imagePath||-1!=Z.imagePath.indexOf("zSlidePath")?k.goToSlide(0,!0):Xd&&k.slideshowStart()};this.slideshowStart=function(a){k.slideshowStop();Z.slideshowPlaying=!0;var b=document.getElementById("buttonSlideshowStop"),c=document.getElementById("buttonSlideshowStart");b&&c&&(b.style.display="inline-block",c.style.display="none");Z.Utils.playAudio(Gd,db[vc].audio);var b=Z.slideshowPlaying?db[vc].showFor:0,d=a?0:Lc(vc,"next",db.length-1);null!==
d&&(Z.Utils.loadAudio(db[d].audio),Z.Utils.functionCallWithDelay(function(){k.goToSlide(d,null,null,!0)},b))};this.slideshowStop=function(){Z.slideshowPlaying=!1;var a=document.getElementById("buttonSlideshowStop"),b=document.getElementById("buttonSlideshowStart");a&&b&&(a.style.display="none",b.style.display="inline-block")};this.priorSlide=function(a){Z.slideshowPlaying&&a&&k.slideshowStop();Kd("prior")};this.nextSlide=function(a){Z.slideshowPlaying&&a&&k.slideshowStop();Kd("next")};this.goToSlide=
function(a,b,c,d){if(Z.slideshowPlaying||b||c||d){vc=a;a=db[a];c=Z.Utils.parametersToDelimitedString(Z.parameters,"&");temp=a.initialX;var e=Z.Utils.stringValidate(temp)?"center"==temp?"zInitialX="+(Z.imageW/2).toString():isNaN(parseFloat(temp))?null:"zInitialX="+temp:null;temp=a.initialY;d=Z.Utils.stringValidate(temp)?"center"==temp?"zInitialY="+(Z.imageH/2).toString():isNaN(parseFloat(temp))?null:"zInitialY="+temp:null;temp=a.initialZoom;var g=Z.Utils.stringValidate(temp)?isNaN(parseFloat(temp))?
null:"zInitialZoom="+temp:null;temp=a.minZoom;var f=Z.Utils.stringValidate(temp)?isNaN(parseFloat(temp))?null:"zMinZoom="+temp:null;temp=a.maxZoom;var l=Z.Utils.stringValidate(temp)?isNaN(parseFloat(temp))?null:"zMaxZoom="+temp:null,e=null!==e?e:null,e=null!==d?null!==e?e+"&"+d:d:null,e=null!==g?null!==e?e+"&"+g:g:null,e=null!==f?null!==e?e+"&"+f:f:null;d=null!==l?null!==e?e+"&"+l:l:null;g=Z.Utils.stringValidate(d)?"&":"";c=c+g+d;switch(a.transition){case "Fade":Z.Viewer.setImageWithFade(a.media,
c,b);break;case "None":Z.Viewer.setImage(a.media,c,b);break;default:Z.Viewer.setImageWithFade(a.media,c,b)}b=Z.Utils.arrayIndexOfObjectValue(nb.options,"value",a.internalID.toString());-1!=b&&(nb.selectedIndex=b)}};this.slideTransitionTimeoutHandler=function(a,b,c,d){d&&(Z.Viewer.setImage(b,c,d),a="in");window.clearTimeout(Z.slideTransitionTimeout);Z.slideTransitionTimeout=null;"out"==a?0<=Z.slideOpacity?(Z.slideOpacity-=Pf,a="out"):(Z.slideOpacity=0,a="in",Z.setCallback("viewUpdateComplete",function(){Z.slideTransitionTimeout=
window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler(a,b,c)},50)}),Z.Viewer.setImage(b,c,null)):(0==Z.slideOpacity&&(Z.Utils.playAudio(Gd,db[vc].audio),Z.clearCallback("viewUpdateComplete",function(){Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler(a,b,c)},50)})),1>=Z.slideOpacity?(Z.slideOpacity+=Pf,a="in"):(Z.slideOpacity=1,a=null));ha&&Z.Utils.setOpacity(ha,Z.slideOpacity);Z.NavigatorDisplay&&Z.Utils.setOpacity(Z.NavigatorDisplay,Z.slideOpacity);
null!==a&&0!=Z.slideOpacity&&(Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler(a,b,c)},50))};this.initializeAudioMuteButtons=function(){if(Z.audioContent){var a=document.getElementById("buttonAudioOn");a&&(a.style.display="inline-block")}};this.audioMute=function(a){Z.audioMuted=a;var b=document.getElementById("buttonAudioMuted"),c=document.getElementById("buttonAudioOn");b&&c&&(a?(b.style.display="inline-block",c.style.display="none"):(b.style.display=
"none",c.style.display="inline-block"))};this.setView=function(a,b,c,d,e,g){Pc(a,b,c,d,e,g)};this.zoom=function(a){if("stop"!=a||"stop"!=Z.zooming){switch(a){case "out":0<=lb&&(lb-=sd);break;case "in":0>=lb&&(lb+=sd);break;case "stop":lb=0}Z.zooming=0==lb?"stop":0<lb?"in":"out";if(0!=lb){if(!wc){if(0>lb&&Z.imageZ>Z.minZ||0<lb&&Z.imageZ<Z.maxZ)k.toggleWatermarks(!1),t&&39<t.length&&k.setHotspotsVisibility(!1);Z.useCanvas||Z.Utils.clearDisplay(ya);wc=window.setTimeout(pd,Pe)}}else Md(),k.updateView(),
k.toggleWatermarks(!0),t&&39<t.length&&k.setHotspotsVisibility(!0)}};this.pan=function(a){if("horizontalStop"!=a||"stop"!=Z.panningX)if("verticalStop"!=a||"stop"!=Z.panningY){switch(a){case "left":0>=vb&&(vb+=qe);break;case "up":0>=wb&&(wb+=qe);break;case "down":0<=wb&&(wb-=qe);break;case "right":0<=vb&&(vb-=qe);break;case "horizontalStop":vb=0;break;case "verticalStop":wb=0;break;case "stop":wb=vb=0}Z.panningX=0==vb?"stop":0<vb?"left":"right";Z.panningY=0==wb?"stop":0<wb?"up":"down";Y(ea,1);Y(ea,
1);0!=vb||0!=wb?wc||(k.toggleWatermarks(!1),Z.useCanvas||Z.Utils.clearDisplay(ya),t&&39<t.length&&k.setHotspotsVisibility(!1),wc=window.setTimeout(pd,Pe)):(Md(),k.updateView(),k.toggleWatermarks(!0),t&&39<t.length&&k.setHotspotsVisibility(!0))}};this.zoomAndPanToView=function(a,b,c,d,e,g,f){k.zoomAndPanAllStop();if(Z.clickZoomAndPanBlock)Z.clickZoomAndPanBlock=!1;else{if("undefined"===typeof a||null===a)a=Z.imageX;if("undefined"===typeof b||null===b)b=Z.imageY;if("undefined"===typeof c||null===c)c=
Z.imageZ;if("undefined"===typeof d||null===d)d=Z.imageR;if("undefined"===typeof e||null===e)e=Bg;if("undefined"===typeof g||null===g)g=Te;if("center"==a||isNaN(parseFloat(a)))a=Z.imageCenterX;if("center"==b||isNaN(parseFloat(b)))b=Z.imageCenterY;if(-1==c||isNaN(parseFloat(c)))b=Z.fitZ;k.toggleWatermarks(!1);Z.useCanvas||Z.Utils.clearDisplay(ya);t&&39<t.length&&k.setHotspotsVisibility(!1);if("undefined"===typeof a||null===a)a=Z.initialX;if("undefined"===typeof b||null===b)b=Z.initialY;if("undefined"===
typeof d||null===d)d=Z.imageR;"undefined"===typeof c||null===c?c=Z.initialZ:1<c&&2>c&&0!=c%1?c=1:1<c?c/=100:.99<c&&1>c&&0!=100*c%1&&(c=1);b=la(a,b,c,d,"image");a=b.x;b=b.y;c=Bb(c);if(Math.round(a)!=Math.round(Z.imageX)||Math.round(b)!=Math.round(Z.imageY)||Math.round(1E5*c)!=Math.round(1E5*Z.imageZ)||Math.round(d)!=Math.round(Z.imageR))Z.interactivityOff=!0,Ld=0,qd(a,b,c,d,e,g,f)}};this.zoomAndPanAllStop=function(a,b){Z.interactivityOff||(Mc&&Mc&&(window.clearTimeout(Mc),Mc=null),Z.tourPlaying&&b&&
(k.tourStop(),a=!1),Z.slideshowPlaying&&b&&(k.slideshowStop(),a=!1),Z.smoothPan&&null!==jc&&(Z.mouseIsDown||xc(!0),a=!0),a||k.updateView())};this.syncViewportRelated=function(a,b,c,d,e,g){("undefined"==typeof a||a)&&ya&&(Z.Utils.clearDisplay(ya),pf());("undefined"==typeof b||b)&&Xb();if("undefined"==typeof c||c)Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&(a=k.getZoom(),Z.Toolbar.syncSliderToViewportZoom(a)),Z.Utils.validateCallback("viewZoomingGetCurrentZoom");("undefined"==typeof d||d)&&Z.Navigator&&
Z.Navigator.getInitialized()&&Z.Navigator.syncToViewport();("undefined"==typeof e||e)&&Z.Ruler&&Z.Ruler.getInitialized()&&Z.Ruler.syncToViewport(void 0);"undefined"!=typeof g&&g&&syncToolbarImageSetSliderToViewport(Z.viewportCurrentID)};this.z633=function(a,b){bd(a,b)&&k.syncViewportRelated()};this.reset=function(a){Z.maskingSelection&&Z.maskClearOnUserAction&&k.clearMask();a?k.zoomAndPanToView(Z.priorX,Z.priorY,Z.priorZ,Z.priorR):k.zoomAndPanToView(Z.initialX,Z.initialY,Z.initialZ,Z.initialR);nd(!0)};
this.toggleWatermarks=function(a){if(rc){var b="inline-block"==rc.display;rc.display=("undefined"!==typeof a&&null!==a?a:!b)?"inline-block":"none"}};this.toggleConstrainPan=function(a){Z.constrainPan="undefined"!==typeof a&&null!==a?a:!Z.constrainPan;if(Z.constrainPan){a=parseFloat(Fa.left);var b=parseFloat(Fa.top);a=la(a,b,Z.imageZ,Z.imageR,"container");F.left=a.x+"px";F.top=a.y+"px";k.updateView()}};this.toggleSmoothPan=function(){xc();Z.smoothPan=!Z.smoothPan};this.toggleBackfill=function(){var a=
document.getElementById("viewportBackfillDisplay"+La.toString());a&&(a=a.style,a.display="none"==a.display?"inline-block":"none")};this.toggleDisplay=function(){var a=document.getElementById("viewportDisplay"+La.toString());a&&(Fa=a.style,Fa.display="none"==Fa.display?"inline-block":"none")};this.toggleFullViewModeExternal=function(){We=!0;k.toggleFullViewMode()};this.toggleFullViewMode=function(a,b){Z.maskingSelection&&Z.maskClearOnUserAction&&k.clearMask();Z.ToolbarDisplay&&Z.Toolbar.show(!1);var c=
null,d=null;Z.fullViewPrior=Z.fullView;Z.fullView="undefined"!==typeof a&&null!==a?a:!Z.fullView;var e=document.body.style,g=document.documentElement.style,f=Z.ViewerDisplay.style,d=Z.Utils.getElementStyle(Z.pageContainer);Z.fullView?(Jf=e.width,Kf=e.height,Lf=e.overflow,Mf=g.overflow,Ve=Z.Utils.stringValidate(d.backgroundColor)&&"transparent"!=d.backgroundColor?d.backgroundColor:Z.Utils.stringValidate(e.backgroundColor)&&"transparent"!=e.backgroundColor?e.backgroundColor:Z.Utils.getResource("z120"),
Nf=f.zIndex,Z.fullScreenSupported&&!Z.fullPageVisible?(Ue=!0,Z.Utils.fullScreenView(Z.ViewerDisplay,!0),d=Z.Utils.getScreenSize()):(d=Z.Utils.getWindowSize(),Z.mobileDevice?(e.width=d.x,e.height=d.y):(e.width="100%",e.height="100%")),c=d.x,d=d.y,e.overflow="hidden",g.overflow="hidden",f.backgroundColor=Ve,f.position="fixed",f.zIndex="99999999"):(e.overflow=Lf,g.overflow=Mf,f.backgroundColor=Ve,f.position="relative",f.zIndex=Nf,Z.fullScreenSupported&&!Z.fullPageVisible&&Z.Utils.fullScreenView(Z.ViewerDisplay,
!1,b),e.width=Jf,e.height=Kf,c=parseFloat(d.width),d=parseFloat(d.height),isNaN(c)&&(c=Z.ViewerDisplay.clientWidth),isNaN(d)&&(d=Z.ViewerDisplay.clientHeight),We=!1);Z.autoResize||(Z.initialFullPage&&k.setSizeAndPosition(c,d),e=Z.viewportCurrent.calculateZoomForResize(Z.viewportCurrent.getZoom(),Z.viewerW,Z.viewerH,c,d),Z.Viewer.resizeViewer(c,d,e));c=Z.fullView;e=document.getElementById("buttonFullView");g=document.getElementById("buttonFullViewExit");e&&g&&(e.style.display=c?"none":"inline-block",
g.style.display=c?"inline-block":"none");We?(td||(c=Z.Utils.getResource("z420"),e=parseFloat(Z.viewerW)-54,g=parseFloat(Z.viewerH)-54,f=Z.Utils.getResource("DEFAULT_FULLVIEWEXITEXTERNALBUTTONCOLOR"),td=new Z.Utils.Button("buttonFullViewExitExternal",c,null,null,null,null,"34px","34px",e+"px",g+"px","mousedown",oe,"z391EXITEXTERNAL","solid","1px",f,"0px","0px"),Z.ViewerDisplay.appendChild(td.elmt)),td.elmt.style.display="inline-block"):td&&(td.elmt.style.display="none");Z.fullViewPrior=!1};this.rotateClockwise=
function(){k.rotate(90,!0)};this.rotateCounterwise=function(){k.rotate(-90,!0)};this.rotate=function(a,b){if(!Z.interactivityOff)if(Z.rotationSupported){nd();var c=Z.imageR+a,d=g(c);Z.interactivityOff=!0;b?k.zoomAndPanToView(Z.imageX,Z.imageY,Z.imageZ,c,600,12,function(){Z.imageR=d}):(Z.Utils.rotateElement(F,c),0!=Z.imageR&&Da.rotate((c-Z.imageR)*Math.PI/180),Z.imageR=d,k.zoomAndPanToView(Z.imageX,Z.imageY,Z.imageZ))}else Z.Utils.showMessage(Z.Utils.getResource("z12"))};this.toggleEditModeMeasure=
function(a){k.zoomAndPanAllStop();Z.maskingSelection&&Z.maskClearOnUserAction&&k.clearMask();"undefined"!==typeof a&&!a||"measure"==Z.labelMode?(null===Z.editMode&&"measure"==Z.labelMode&&0<t.length&&(k.deleteAllMeasureHotspots(),N=null),k.setEditModeLabel("view")):k.setEditModeLabel("measure")};this.fullScreenEscapeHandler=function(a){Ue?Ue=!1:k.toggleFullViewMode(!1,!0)};this.mouseWheelHandler=function(a){Z.mouseWheelIsDown=!0;Z.mouseWheelCompleteTimer&&window.clearTimeout(Z.mouseWheelCompleteTimer);
Z.mouseWheelCompleteTimer=window.setTimeout(Z.Viewer.z586,Z.mouseWheelCompleteDuration);if("zoom"==Z.sliderFocus){var b=k.z482(ea,oa*(1+(0<a?sd:-sd)));constrainedZ=Bb(b);constrainedZ!=Z.imageZ&&(Z.zooming=0<a?"in":0>a?"out":"stop",k.z633(constrainedZ))}else"imageSet"==Z.sliderFocus&&(0<a?Z.Viewer.viewportNext():0>a&&Z.Viewer.viewportPrior())}};
Z.ZoomifyToolbar=function(a){function b(){window.clearInterval(Ba);Ba=null;var a=document.getElementById("progressTextBoxCenteredDiv");a&&(a=a.firstChild)&&(a.nodeValue="")}function c(a){4>Z.toolbarVisible&&!Z.mobileDevice||8==Z.toolbarVisible?d(a):e(!a)}function d(a){ta&&(ta.display=a?"inline-block":"none")}function e(a){Z.ToolbarMinimized=a;if(ta){var b=document.getElementById("buttonContainer"),c=document.getElementById("toolbarBackground"),d=document.getElementById("buttonMinimize"),e=document.getElementById("buttonExpand"),
f=document.getElementById("logoDivider"),h=0;e&&!V&&(h=parseFloat(e.style.left)+parseFloat(e.style.width)+4);var m=Z.toolbarCurrentW;a?(b&&(b.style.display="none"),d&&e&&!V&&(f&&(f.style.display="none"),d.style.display="none",e.style.display="inline-block"),ta.width=h+"px",c&&(c.style.width=h+"px")):(b&&(b.style.display="inline-block"),d&&e&&!V&&(f&&(f.style.display="inline-block"),d.style.display="inline-block",e.style.display="none"),ta.width=m+"px",c&&(c.style.width=m+"px"))}}function f(a){if("undefined"!==
typeof trszS&&"undefined"!==typeof btszS){a=(a-Z.minZ)/(Z.maxZ-Z.minZ);var b=parseFloat(trszS.left),c=parseFloat(trszS.left)+parseFloat(trszS.width)-parseFloat(btszS.width)-b;btszS.left=a*c+b+"px"}}function h(a){"undefined"!==typeof btsZ&&(C=!0,a=Z.Utils.getMousePosition(a),btsZ.mouseXPrior=a.x,btsZ.mouseYPrior=a.y)}function m(){if("undefined"!==typeof trszS&&"undefined"!==typeof btsZ&&"undefined"!==typeof btszS){var b=parseFloat(trszS.left),c=parseFloat(trszS.left)+parseFloat(trszS.width)-parseFloat(btszS.width),
d=parseFloat(btszS.left)+(X.x-btsZ.mouseXPrior);d<b?d=b:d>c?d=c:btsZ.mouseXPrior=X.x;btszS.left=d+"px";b=Z.minZ+(d-b)/(c-b)*(Z.maxZ-Z.minZ);c=b-a.getZoom();Z.zooming=0<c?"in":0>c?"out":"stop";a.z633(b)}}function D(a){if(trsisS&&btsisS){a=Z.viewportCurrentID/(Z.imageSetLength-1);var b=parseFloat(trsisS.left),c=parseFloat(trsisS.left)+parseFloat(trsisS.width)-parseFloat(btsisS.width)-b;btsisS.left=a*c+b+"px"}}function E(a){if(trsiS&&trsisS){var b=Z.Utils.getElementPosition(trsiS);a=Z.Utils.getMousePosition(a).x-
b.x;b=parseFloat(trsisS.width);a=Math.round((a-0)/(b-0)*(Z.imageSetLength-1));0>a&&(a=0);a>Z.imageSetLength-1&&(a=Z.imageSetLength-1);a!=Z.viewportCurrentID&&Z.Viewer.viewportSelect(a,!0);D(a)}}function y(a){btsiS&&(Y=!0,a=Z.Utils.getMousePosition(a),btsiS.mouseXPrior=a.x,btsiS.mouseYPrior=a.y)}function A(){if(trsiS&&btsiS&&btsiS){var a=parseFloat(trsisS.left),b=parseFloat(trsisS.left)+parseFloat(trsisS.width)-parseFloat(btsisS.width),c=parseFloat(btsisS.left)+(la.x-btsiS.mouseXPrior);c<a?c=a:c>b?
c=b:btsiS.mouseXPrior=la.x;btsisS.left=c+"px";a=Math.round((c-a)/(b-a)*(Z.imageSetLength-1));a!=Z.viewportCurrentID&&Z.Viewer.viewportSelect(a,!0)}}function H(a){la=new Z.Utils.Point(a.clientX,a.clientY)}function U(a){(a=Z.Utils.getFirstTouch(a))&&(la=new Z.Utils.Point(a.pageX,a.pageY))}function q(b){if(b=Z.Utils.event(b)){var c=b.type,d=Z.Utils.target(b);if(d){var e=d.parentNode;if(e){var f=e;tbID=e.id}}d=Z.Utils.relatedTarget(b)}"mousedown"==c&&a&&"buttonAudioOn"!=tbID&&"buttonAudioMuted"!=tbID&&
(a.zoomAndPanAllStop(!1,!0),Z.maskingSelection&&Z.maskClearOnUserAction&&a.clearMask());if((!Z.interactivityOff||"mousedown"!=c&&"mouseup"!=c||"buttonRotateClockwise"==tbID||"buttonRotateCounterwise"==tbID)&&(!d||"[object HTMLSelectElement]"!=d&&"[object HTMLOptionElement]"!=d)&&!Z.Utils.isRightMouseButton(b)){Z.touchSupport&&b.preventDefault();if(tbID&&-1!=tbID.indexOf("viewportContainer")||C||Y)C?e=document.getElementById("buttonSliderZoom"):Y&&(e=document.getElementById("buttonSliderImageSet")),
e&&(tbID=e.id);var d=e,p=c;if(-1!=d.id.indexOf("button")&&-1==d.id.indexOf("buttonContainer")){var B=d.firstChild,G=d.childNodes[1],L=d.childNodes[2];if(B&&G&&L)if(B=B.style,G=G.style,L=L.style,B.visibility=G.visibility=L.visibility="hidden","mouseover"==p&&"buttonSliderZoom"==d.id&&C)L.visibility="visible";else if("mouseover"==p&&"buttonSliderImageSet"==d.id&&Y)L.visibility="visible";else if("mouseover"==p||"mouseup"==p)G.visibility="visible";else if("mousedown"==p||"mousemove"==p||"touchstart"==
p||"MSPointerDown"==p)L.visibility="visible";else if("mouseout"==p||"touchend"==p||"touchcancel"==p||"MSPointerUp"==p)B.visibility="visible"}if(tbID&&"buttonBackground"!=tbID&&c)switch(c){case "mouseover":if("trackSliderZoom"!=tbID&&"trackSliderImageSet"!=tbID)if(Z.Utils.removeEventListener(e.childNodes[0],"mouseover",q),Z.Utils.addEventListener(e.childNodes[1],"mousedown",q),Z.Utils.addEventListener(e.childNodes[1],"mouseout",q),C&&f&&Z.Utils.addEventListener(f.childNodes[0],"mouseup",q),Y&&f&&Z.Utils.addEventListener(f.childNodes[0],
"mouseup",q),"buttonZoomIn"==tbID||"buttonSliderZoom"==tbID||"buttonZoomOut"==tbID)Z.sliderFocus="zoom";else{if("buttonImageSetPrior"==tbID||"buttonSliderImageSet"==tbID||"buttonImageSetNext"==tbID)Z.sliderFocus="imageSet"}else Z.Utils.addEventListener(e.childNodes[0],"mouseout",q),Z.sliderFocus="trackSliderImageSet"==tbID?"imageSet":"zoom";break;case "mousedown":Z.buttonIsDown=!0;!Z.fullView&&document.activeElement&&document.activeElement.blur();"trackSliderZoom"!=tbID&&"trackSliderImageSet"!=tbID?
(Z.Utils.removeEventListener(e.childNodes[1],"mousedown",q),Z.Utils.removeEventListener(e.childNodes[1],"mouseout",q),Z.Utils.addEventListener(e.childNodes[2],"mouseup",q),Z.Utils.addEventListener(e.childNodes[2],"mouseout",q),"buttonSliderZoom"==tbID&&(h(b),u(b),Z.Utils.addEventListener(document,"mousemove",u),S||(S=window.setInterval(m,Za)),Z.Utils.addEventListener(document,"mouseup",q)),"buttonSliderImageSet"==tbID&&(y(b),H(b),Z.Utils.addEventListener(document,"mousemove",H),ja||(ja=window.setInterval(A,
da)),Z.Utils.addEventListener(document,"mouseup",q))):Z.slidestack&&"trackSliderImageSet"==tbID&&Z.Utils.addEventListener(e,"mouseup",q);a&&T(b,tbID);break;case "mouseup":Z.buttonIsDown=!1;Z.Utils.removeEventListener(e.childNodes[2],"mouseup",q);Z.Utils.removeEventListener(e.childNodes[2],"mouseout",q);Z.Utils.addEventListener(e.childNodes[1],"mousedown",q);Z.Utils.addEventListener(e.childNodes[1],"mouseout",q);C&&f&&Z.Utils.removeEventListener(f.childNodes[0],"mouseup",q);Y&&f&&Z.Utils.removeEventListener(f.childNodes[0],
"mouseup",q);a&&T(b,tbID);break;case "mouseout":if("trackSliderZoom"!=tbID&&"trackSliderImageSet"!=tbID){if(Z.Utils.removeEventListener(e.childNodes[1],"mousedown",q),Z.Utils.removeEventListener(e.childNodes[1],"mouseout",q),Z.Utils.addEventListener(e.childNodes[0],"mouseover",q),a&&T(b,tbID),"buttonImageSetPrior"==tbID||"buttonSliderImageSet"==tbID||"trackSliderImageSet"==tbID||"buttonImageSetNext"==tbID||"buttonZoomIn"==tbID||"buttonSliderZoom"==tbID||"buttonZoomOut"==tbID)Z.sliderFocus=2==Z.mouseWheel?
"imageSet":"zoom"}else Z.Utils.removeEventListener(e.childNodes[0],"mouseout",q),Z.sliderFocus=2==Z.mouseWheel?"imageSet":"zoom";break;case "touchstart":"buttonSliderZoom"==tbID&&(h(b),J(b),Z.Utils.addEventListener(document,"touchmove",J),S||(S=window.setInterval(m,Za)));"buttonSliderImageSet"==tbID&&(y(b),U(b),Z.Utils.addEventListener(document,"touchmove",U),ja||(ja=window.setInterval(A,da)));Z.Utils.addEventListener(e,"touchend",q);Z.Utils.addEventListener(e,"touchcancel",q);a&&T(b,tbID);break;
case "touchend":Z.Utils.addEventListener(e,"touchstart",q);a&&T(b,tbID);break;case "touchcancel":Z.Utils.addEventListener(e,"touchstart",q);a&&T(b,tbID);break;case "MSPointerDown":"buttonSliderZoom"==tbID&&(h(b),J(b),Z.Utils.addEventListener(document,"MSPointerMove",J),S||(S=window.setInterval(m,Za)));"buttonSliderImageSet"==tbID&&(y(b),U(b),Z.Utils.addEventListener(document,"MSPointerMove",U),ja||(ja=window.setInterval(A,da)));Z.Utils.addEventListener(e,"MSPointerUp",q);a&&T(b,tbID);break;case "MSPointerUp":Z.Utils.addEventListener(e,
"MSPointerDown",q),a&&T(b,tbID)}}}function T(b,c){var d=b.type,e=Z.annotationFileShared?"0":ra,f=b.altKey;if("mousedown"==d||"touchstart"==d)switch(d=document.activeElement.id,!Z.Utils.stringValidate(d)||d!="poiNameTextElement"+ra&&d!="labelNameTextElement"+ra&&"captionTextElement"!=d&&"commentTextElement"!=d&&"tooltipTextElement"!=d&&"clickURLTextElement"!=d&&d!="noteNameTextElement"+ra&&d!="noteTextElement"+ra||document.getElementById(d).blur(),c){case "buttonMinimize":f?a.setHotspotsVisibility(!a.getHotspotsVisibility()):
(B.minimize(!0),Z.Navigator&&Z.Navigator.setVisibility(!1));break;case "buttonExpand":f?a.setHotspotsVisibility(!a.getHotspotsVisibility()):(B.minimize(!1),Z.Navigator&&Z.Navigator.setVisibility(!0));break;case "buttonZoomOut":f||a.zoom("out");break;case "buttonSliderZoom":break;case "trackSliderZoom":"undefined"!==typeof trsZ&&"undefined"!==typeof trszS&&(e=Z.Utils.getElementPosition(trsZ),e=Z.Utils.getMousePosition(b).x-e.x,f=parseFloat(trszS.width),e=Z.minZ+(e-0)/(f-0)*(Z.maxZ-Z.minZ),e<Z.minZ+
.1&&(e=Z.minZ),e>Z.maxZ-.1&&(e=Z.maxZ),f=e-a.getZoom(),Z.zooming=0<f?"in":0>f?"out":"stop",a.z633(e),Z.zooming="stop",a.updateView());break;case "buttonZoomIn":f||a.zoom("in");break;case "buttonPanLeft":a.pan("left");break;case "buttonPanUp":a.pan("up");break;case "buttonPanDown":a.pan("down");break;case "buttonPanRight":a.pan("right");break;case "buttonReset":a.reset(f);break;case "buttonFullView":break;case "buttonFullViewExit":break;case "buttonMeasure":a.toggleEditModeMeasure(!0);break;case "buttonMeasureExit":a.toggleEditModeMeasure(!1);
break;case "buttonHelp":Z.annotations&&null===Z.editMode?Z.Utils.showHelp(Z.Utils.getResource("z32")+Z.Utils.getResource("z30")+Z.Utils.getResource("z29")):Z.Utils.showHelp(Z.Utils.getResource("z32"));break;case "buttonHelpMarkup"+e:Z.Utils.showHelp(Z.Utils.getResource("z31"));break;case "buttonHelpAnnotation"+e:Z.Utils.showHelp(Z.Utils.getResource("z28"));break;case "buttonRotateClockwise":a.rotateClockwise();break;case "buttonRotateCounterwise":a.rotateCounterwise();break;case "buttonTourPrior":a.priorDestination(!0);
break;case "buttonTourNext":a.nextDestination(!0);break;case "buttonTourStart":a.tourStart();break;case "buttonTourStop":a.tourStop();break;case "buttonSlideshowPrior":a.priorSlide(!0);break;case "buttonSlideshowNext":a.nextSlide(!0);break;case "buttonSlideshowStart":a.slideshowStart();break;case "buttonSlideshowStop":a.slideshowStop();break;case "buttonAudioOn":a.audioMute(!0);break;case "buttonAudioMuted":a.audioMute(!1);break;case "buttonImageSetPrior":Z.animation&&Z.Viewer.viewportChange("backward");
break;case "buttonSliderImageSet":break;case "trackSliderImageSet":Z.animation&&E(b);break;case "buttonImageSetNext":Z.animation&&Z.Viewer.viewportChange("forward");break;default:"buttonColor"==c.substr(0,11)&&a.setDrawingColor(c)}else if("mouseup"==d||"touchend"==d||"touchcancel"==d)if("buttonSliderZoom"==c||C)S&&(window.clearInterval(S),S=null),K(),C=!1,Z.zooming="stop",a.updateView();else if("buttonSliderImageSet"==c||Y)ja&&(window.clearInterval(ja),ja=null),K(),Y=!1,Z.Viewer.viewportSelect(Z.viewportCurrentID,
!0);else if("buttonZoomOut"==c||"buttonZoomIn"==c)a.zoom("stop"),0==Z.debug&&"buttonZoomOut"==c&&f&&Z.Utils.showGlobals();else if("buttonPanLeft"==c||"buttonPanRight"==c)a.pan("horizontalStop"),"buttonPanLeft"==c&&f&&a.toggleSmoothPan();else if("buttonPanUp"==c||"buttonPanDown"==c)a.pan("verticalStop");else if("buttonFullView"==c)a.toggleFullViewMode(!0);else if("buttonFullViewExit"==c)a.toggleFullViewMode(!1);else if("trackSliderImageSet"==c)Z.slidestack&&E(b);else{if("buttonImageSetPrior"==c||"buttonImageSetNext"==
c)Z.animation?Z.Viewer.viewportChange("stop"):Z.slidestack&&("buttonImageSetPrior"==c?Z.Viewer.viewportChange("backward"):"buttonImageSetNext"==c&&Z.Viewer.viewportChange("forward"))}else"mouseout"==d&&("buttonZoomOut"==c||"buttonZoomIn"==c?a.zoom("stop"):"buttonPanLeft"==c||"buttonPanRight"==c?a.pan("horizontalStop"):"buttonPanUp"==c||"buttonPanDown"==c?a.pan("verticalStop"):"buttonImageSetPrior"!=c&&"buttonImageSetNext"!=c||Z.Viewer.viewportChange("stop"))}function K(){C&&(Z.Utils.removeEventListener(document,
"mousemove",u),Z.Utils.removeEventListener(document,"mouseup",q),Z.Utils.removeEventListener(document,"touchmove",J));Y&&(Z.Utils.removeEventListener(document,"mousemove",H),Z.Utils.removeEventListener(document,"mouseup",q),Z.Utils.removeEventListener(document,"touchmove",U));for(var a=Z.ToolbarDisplay.childNodes,b=0,c=a.length;b<c;b++){var d=a[b],e=d.id;if(e&&-1!=e.indexOf("button"))if("buttonContainer"!=e&&"buttonContainerImageFilter"!=e)Z.Utils.setButtonDefaults(d);else for(var d=d.childNodes,
e=0,f=d.length;e<f;e++){var h=d[e],m=h.id;m&&-1!=m.indexOf("button")&&Z.Utils.setButtonDefaults(h)}}}function u(a){X=new Z.Utils.Point(a.clientX,a.clientY)}function J(a){(a=Z.Utils.getFirstTouch(a))&&(X=new Z.Utils.Point(a.pageX,a.pageY))}var B=this,G=!1,ra=a.getViewportID().toString();Z.skinPath=Z.Utils.stringRemoveTrailingSlashCharacters(Z.skinPath);(new Z.NetConnector).loadXML(Z.skinPath+"/"+Z.Utils.getResource("z200"));var sa,ta,ia=[],p=[],xa=[],Za=parseInt(Z.Utils.getResource("z205ZOOM"),10),
C=!1,S=null,X=null,Ba=null,L=null,I,O,V,M,ka,da=parseInt(Z.Utils.getResource("z205IMAGESET"),10),Y=!1,ja=null,la=null,Bb;this.getInitialized=function(){return G};this.getSkinArray=function(){return ia};this.getSkinSizes=function(){return xa};this.show=function(a){c(a)};this.setVisibility=function(a){d(a)};this.minimize=function(a){e(a)};this.setVisibilityAnnotationPanel=function(b,c){var d=c;if("undefined"===typeof d||null===d)d=Z.annotationFileShared?"0":a.getViewportID().toString();if(d=document.getElementById("AnnotationPanelDisplay"+
d))!b||Z.measureVisible&&null===Z.editMode?(d.style.display="none",Z.annotationPanelVisibleState=!1):(d.style.display="inline-block",Z.annotationPanelVisibleState=!0)};this.showProgress=function(){var a=document.getElementById("progressTextBox");a&&(a=a.style)&&(a.display="inline-block")};this.hideProgress=function(){var a=document.getElementById("progressTextBox");a&&(a=a.style)&&(a.display="none")};this.updateProgress=function(a,c){if(Z.progressVisible){Ba&&window.clearInterval(Ba);var d,e=document.getElementById("progressTextBoxCenteredDiv");
e&&(e=e.firstChild)&&(0==a||0==c?(e.nodeValue="llllllllll",Ba=window.setInterval(b,parseInt(Z.Utils.getResource("z182")),10)):(d=Math.round(100-c/a*100),d=Math.round(d/10),e.nodeValue=Z.Utils.stringMultiply("l",d)))}};this.setViewport=function(b){a=b;ra=a.getViewportID().toString()};this.parseSkinXML=function(b){Z.skinMode=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("SKINMODE").nodeValue;var d,e;1==Z.skinMode||0==Z.skinMode&&!Z.mobileDevice?(d=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERSTANDARD").nodeValue,
e="SIZESSTANDARD"):(d=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERLARGE").nodeValue,e="SIZESLARGE");var l=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("PROGRESSCOLOR");"undefined"!==typeof l&&null!==l&&(L=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("PROGRESSCOLOR").nodeValue);l=[];l[l.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("TOOLBARW").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("TOOLBARH").nodeValue);
l[l.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("LOGOW").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("LOGOH").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("DIVIDERW").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("DIVIDERH").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("BUTTONW").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("BUTTONH").nodeValue);
l[l.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("BUTTONSPAN").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERBUTTONW").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERBUTTONH").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERTRACKW").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERTRACKH").nodeValue);
l[l.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERSPAN").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("PROGRESSW").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("PROGRESSH").nodeValue);l[l.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("PROGRESSFONTSIZE").nodeValue);var h,m,u;e="edit"==Z.editMode?161:"markup"==Z.editMode?152:Z.imageFiltersVisible?100:Z.screensaver||
Z.tourPath||Z.slidePath||Z.imageSetPath?77:Z.rotationVisible?58:Z.measureVisible?51:0<Z.helpVisible?45:Z.fullScreenVisible||Z.fullPageVisible?45:Z.resetVisible?35:Z.panButtonsVisible?32:Z.sliderZoomVisible?19:Z.minimizeVisible?14:Z.logoVisible?8:6;h=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN0");null!==h&&(m=h.nodeValue);h=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+e.toString());null!==h&&(u=h.nodeValue);if("undefined"!==typeof m&&Z.Utils.stringValidate(m)&&
"undefined"!==typeof u&&Z.Utils.stringValidate(u)){m=!1;u=0;for(e+=1;u<e;u++)h=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+u).nodeValue,Z.Utils.stringValidate(h)?p[u]=d+"/"+h:(p[u]="null",m=!0);m&&Z.Utils.showMessage(Z.Utils.getResource("z279"));ia=p;Z.ToolbarDisplay=Z.Utils.createContainerElement("div","ToolbarDisplay","inline-block","absolute","visible","1px","1px","0px","1px","none","0px","transparent none","0px","0px","normal");ta=Z.ToolbarDisplay.style;b=parseInt(Z.Utils.getResource("z230"),
10);ta.zIndex=(b+1).toString();b=new Z.Utils.Graphic("toolbarBackground",Z.skinPath,p[0],"1px","1px","0px","0px");parseFloat(Z.Utils.getResource("z82"));Z.Utils.getResource("z83NOALPHA");Z.ToolbarDisplay.appendChild(b.elmt);xa=l;Z.logoVisible&&(Z.Utils.stringValidate(Z.logoCustomPath)?(l=Z.Utils.cacheProofPath(Z.logoCustomPath),l=new Z.Utils.Graphic("toolbarLogo",l,null,"1px","1px","1px","1px")):l=new Z.Utils.Graphic("toolbarLogo",Z.skinPath,p[7],"1px","1px","1px","1px"),Z.Utils.stringValidate(Z.logoLinkURL)?
(b=document.createElement("a"),b.setAttribute("href",Z.logoLinkURL),b.setAttribute("target",Z.Utils.getResource("z427TARGET")),b.setAttribute("title",Z.Utils.getResource("z360")),b.setAttribute("outline","none"),b.appendChild(l.elmt),Z.ToolbarDisplay.appendChild(b)):(l.elmt.setAttribute("title",Z.Utils.getResource("z427DISPLAY")),Z.ToolbarDisplay.appendChild(l.elmt)),0==Z.toolbarVisible||1==Z.toolbarVisible)&&(l=new Z.Utils.Graphic("logoDivider",Z.skinPath,p[8],"1px","1px","1px","1px"),Z.ToolbarDisplay.appendChild(l.elmt));
l=Z.Utils.createContainerElement("div","buttonContainer","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default");Z.ToolbarDisplay.appendChild(l);Z.Utils.addEventListener(l,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(l,"mouseover",B.backgroundEventsHandler);Z.Utils.addEventListener(l,"touchstart",Z.Utils.preventDefault);b=new Z.Utils.Graphic("buttonBackground",Z.skinPath,p[0],"1px","1px","0px","0px");l.appendChild(b.elmt);
Z.Utils.setOpacity(b.elmt,"0","#FBFAFA");(0!=Z.toolbarVisible&&1!=Z.toolbarVisible||Z.mobileDevice)&&Z.minimizeVisible&&(b=new Z.Utils.Button("buttonMinimize",null,Z.skinPath,p[9],p[10],p[11],"1px","1px","1px","1px","mouseover",q,"z363"),Z.ToolbarDisplay.appendChild(b.elmt),b=new Z.Utils.Button("buttonExpand",null,Z.skinPath,p[12],p[13],p[14],"1px","1px","1px","1px","mouseover",q,"z341"),Z.ToolbarDisplay.appendChild(b.elmt));b=new Z.Utils.Button("buttonZoomOut",null,Z.skinPath,p[1],p[2],p[3],"1px",
"1px","1px","1px","mouseover",q,"z400");l.appendChild(b.elmt);Z.sliderZoomVisible&&(b=new Z.Utils.Graphic("trackSliderZoom",Z.skinPath,p[15],"1px","1px","0px","0px","z385"),l.appendChild(b.elmt),Z.Utils.addEventListener(b.elmt,"mousedown",q),Z.Utils.addEventListener(b.elmt,"touchstart",q),Z.Utils.addEventListener(b.elmt,"mouseover",q),b=new Z.Utils.Button("buttonSliderZoom",null,Z.skinPath,p[17],p[18],p[19],"1px","1px","1px","1px","mouseover",q,"z385"),l.appendChild(b.elmt));b=new Z.Utils.Button("buttonZoomIn",
null,Z.skinPath,p[4],p[5],p[6],"1px","1px","1px","1px","mouseover",q,"z399");l.appendChild(b.elmt);Z.panButtonsVisible&&(b=new Z.Utils.Graphic("panDivider",Z.skinPath,p[20],"1px","1px","1px","1px"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanLeft",null,Z.skinPath,p[21],p[22],p[23],"1px","1px","1px","1px","mouseover",q,"z370"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanUp",null,Z.skinPath,p[24],p[25],p[26],"1px","1px","1px","1px","mouseover",q,"z372"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanDown",
null,Z.skinPath,p[27],p[28],p[29],"1px","1px","1px","1px","mouseover",q,"z369"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanRight",null,Z.skinPath,p[30],p[31],p[32],"1px","1px","1px","1px","mouseover",q,"z371"),l.appendChild(b.elmt));Z.resetVisible&&(b=new Z.Utils.Button("buttonReset",null,Z.skinPath,p[33],p[34],p[35],"1px","1px","1px","1px","mouseover",q,"z378"),l.appendChild(b.elmt));if(Z.fullScreenVisible||Z.fullPageVisible)null===Z.editMode&&(b=new Z.Utils.Graphic("fullViewDivider",Z.skinPath,
p[36],"1px","1px","1px","1px"),l.appendChild(b.elmt)),b=new Z.Utils.Button("buttonFullViewExit",null,Z.skinPath,p[40],p[41],p[42],"1px","1px","1px","1px","mouseover",q,"z391EXIT"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonFullView",null,Z.skinPath,p[37],p[38],p[39],"1px","1px","1px","1px","mouseover",q,"z391"),l.appendChild(b.elmt);Z.measureVisible&&null===Z.editMode&&(Z.fullScreenVisible||Z.fullPageVisible||(b=new Z.Utils.Graphic("measureDivider",Z.skinPath,p[36],"1px","1px","1px","1px"),
l.appendChild(b.elmt)),null===Z.editMode&&(b=new Z.Utils.Button("buttonMeasureExit",null,Z.skinPath,p[49],p[50],p[51],"1px","1px","1px","1px","mouseover",q,"z392EXIT"),l.appendChild(b.elmt)),b=new Z.Utils.Button("buttonMeasure",null,Z.skinPath,p[46],p[47],p[48],"1px","1px","1px","1px","mouseover",q,"z392"),l.appendChild(b.elmt));Z.rotationVisible&&(b=new Z.Utils.Graphic("rotateDivider",Z.skinPath,p[52],"1px","1px","1px","1px"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonRotateCounterwise",null,
Z.skinPath,p[53],p[54],p[55],"1px","1px","1px","1px","mouseover",q,"z381"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonRotateClockwise",null,Z.skinPath,p[56],p[57],p[58],"1px","1px","1px","1px","mouseover",q,"z380"),l.appendChild(b.elmt));Z.tour&&(b=new Z.Utils.Graphic("tourDivider",Z.skinPath,p[59],"1px","1px","1px","1px"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourPrior",null,Z.skinPath,p[60],p[61],p[62],"1px","1px","1px","1px","mouseover",q,"z394"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourNext",
null,Z.skinPath,p[63],p[64],p[65],"1px","1px","1px","1px","mouseover",q,"z393"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourStart",null,Z.skinPath,p[66],p[67],p[68],"1px","1px","1px","1px","mouseover",q,"z395"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonTourStop",null,Z.skinPath,p[69],p[70],p[71],"1px","1px","1px","1px","mouseover",q,"z396"),l.appendChild(b.elmt));Z.slideshow&&(b=new Z.Utils.Graphic("slideshowDivider",Z.skinPath,p[59],"1px","1px","1px","1px"),l.appendChild(b.elmt),
b=new Z.Utils.Button("buttonSlideshowPrior",null,Z.skinPath,p[60],p[61],p[62],"1px","1px","1px","1px","mouseover",q,"z384"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonSlideshowNext",null,Z.skinPath,p[63],p[64],p[65],"1px","1px","1px","1px","mouseover",q,"z383"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonSlideshowStart",null,Z.skinPath,p[66],p[67],p[68],"1px","1px","1px","1px","mouseover",q,"z386"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonSlideshowStop",null,Z.skinPath,p[69],
p[70],p[71],"1px","1px","1px","1px","mouseover",q,"z387"),l.appendChild(b.elmt));if(Z.tour||Z.slideshow)b=new Z.Utils.Button("buttonAudioOn",null,Z.skinPath,p[72],p[73],p[74],"1px","1px","1px","1px","mouseover",q,"z321"),l.appendChild(b.elmt),b=new Z.Utils.Button("buttonAudioMuted",null,Z.skinPath,p[75],p[76],p[77],"1px","1px","1px","1px","mouseover",q,"z322"),l.appendChild(b.elmt);Z.imageSet&&(b=new Z.Utils.Graphic("imageSetDivider",Z.skinPath,p[59],"1px","1px","1px","1px"),l.appendChild(b.elmt),
b=new Z.Utils.Button("buttonImageSetPrior",null,Z.skinPath,p[60],p[61],p[62],"1px","1px","1px","1px","mouseover",q,"TIP_IMAGESETPRIOR"),l.appendChild(b.elmt),Z.sliderImageSetVisible&&(b=new Z.Utils.Graphic("trackSliderImageSet",Z.skinPath,p[15],"1px","1px","0px","0px","z385"),l.appendChild(b.elmt),Z.Utils.addEventListener(b.elmt,"mousedown",q),Z.Utils.addEventListener(b.elmt,"touchstart",q),Z.Utils.addEventListener(b.elmt,"mouseover",q),b=new Z.Utils.Button("buttonSliderImageSet",null,Z.skinPath,
p[17],p[18],p[19],"1px","1px","1px","1px","mouseover",q,"TIP_IMAGESETSLIDER"),l.appendChild(b.elmt)),b=new Z.Utils.Button("buttonImageSetNext",null,Z.skinPath,p[63],p[64],p[65],"1px","1px","1px","1px","mouseover",q,"TIP_IMAGESETNEXT"),l.appendChild(b.elmt));if(1==Z.helpVisible||3==Z.helpVisible)b=new Z.Utils.Button("buttonHelp",null,Z.skinPath,p[43],p[44],p[45],"1px","1px","1px","1px","mouseover",q,"z342"),l.appendChild(b.elmt);Z.progressVisible&&(b=Z.Utils.createContainerElement("div","progressTextBox",
"inline-block","absolute","hidden","1px","1px","1px","1px","none","0px","transparent none","0px","0px","normal",null,!0),d=xa[16],l.appendChild(b),l=document.createTextNode(Z.Utils.getResource("z183")),b.appendChild(Z.Utils.createCenteredElement(l,"progressTextBoxCenteredDiv")),null===L&&(L=Z.Utils.getResource("z183COLOR")),Z.Utils.setTextNodeStyle(l,L,"verdana",d+"px","none","normal","normal","normal","normal","1em","left","none"),Z.Utils.disableTextInteraction(l));Z.ViewerDisplay.appendChild(Z.ToolbarDisplay);
Z.toolbarW=xa[0];Z.toolbarCurrentW=-1==Z.toolbarW?Z.viewerW:Z.toolbarW;Z.toolbarH=sa=xa[1];B.setSizeAndPosition(Z.toolbarCurrentW,Z.toolbarH,0,1==Z.toolbarPosition?Z.viewerH-sa:0);a&&a.getStatus("initialized")&&(1==Z.toolbarVisible&&(a.setSizeAndPosition(Z.viewerW,Z.viewerH-Z.toolbarH,0,0),a.validateXYZDefaults(!0),a.setView(Z.initialX,Z.initialY,Z.initialZ)),l=a.getZoom(),f(l),a.setDrawingColor("buttonColor0"+ra,!0));c(1==Z.toolbarVisible||2==Z.toolbarVisible||4==Z.toolbarVisible||7==Z.toolbarVisible);
Z.Utils.addEventListener(Z.ToolbarDisplay,"mouseover",Z.Utils.stopPropagation);G||(G=!0,Z.Utils.validateCallback("toolbarInitialized"),Z.Viewer.validateViewerReady("toolbarInitialized"))}else Z.Utils.showMessage(Z.Utils.getResource("z278"))};this.setSizeAndPosition=function(b,c,d,e){"undefined"===typeof b||null===b?b=0<Z.toolbarVisible?Z.toolbarCurrentW:0:Z.toolbarCurrentW=b;if("undefined"===typeof c||null===c)c=0<Z.toolbarVisible?sa:0;if("undefined"===typeof d||null===d)d=0;if("undefined"===typeof e||
null===e)e=1==Z.toolbarPosition?Z.viewerH-sa:0;ta=Z.ToolbarDisplay.style;ta.width=b+"px";ta.height=c+"px";ta.left=d+"px";ta.top=e+"px";var f=b,h=c,m=xa[2],u=xa[3],p=xa[4],q=xa[5],B=xa[6],G=xa[7],J=xa[8],L=xa[9],y=xa[10],A=xa[11],D=xa[12],Ba=xa[13],E=xa[14],ra=xa[15],w=0,H=(h-u)/2+1,K=(h-q)/2,C=(h-G)/2,T=1.3*C,U=C+4,S=C+2,ia=1==Z.logoVisible?0:J/2,ja=1==Z.logoVisible?0:J/2,Y=J-(B-p),X=2,da=0;Z.panButtonsVisible&&(X+=4,da+=1);Z.resetVisible&&(X+=1);if(Z.fullScreenVisible||Z.fullPageVisible)X+=1,da+=
1;Z.helpVisible&&(X+=1,Z.fullScreenVisible||Z.fullPageVisible||(da+=1));Z.measureVisible&&(Z.fullScreenVisible||Z.fullPageVisible||(da+=1),X+=1);Z.rotationVisible&&(X+=2,da+=1);if(Z.tour||Z.slideshow)X+=3,da+=1,Z.audioContent&&(X+=1);var la=X*J+da*Y;Z.sliderZoomVisible&&(la+=Ba);if(Z.imageSet&&Z.sliderImageSetVisible){var Za=Ba,le=A,Wb=D,la=la+Za;Bb=!1}I=O=V=M=!1;var jd=(1==Z.logoVisible?m+2:0)+(0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&0!=Z.minimizeVisible?J:0),Je=1==Z.panButtonsVisible?4*J+Y:0,
je=1==Z.resetVisible?J:0,Xc=jd+20+la+20+E;Xc>f&&(I=!0,Xc-Ba>f&&(O=!0,Xc-Ba-E>f&&(V=!0,Xc-Ba-E-jd>f&&(ka=!0,Xc-Ba-E-jd-je>f&&(M=!0,la-=Je),la-=je),jd=0),E=0),la-=Ba);var Ie=(f-la)/2-20+3,Wc=document.getElementById("toolbarBackground");Wc&&(Wc.style.width=f+"px",Wc.style.height=h+"px",Wc.firstChild.style.width=f+"px",Wc.firstChild.style.height=h+"px");var gc=document.getElementById("buttonContainer");gc&&(gc.style.width=la+40+"px",gc.style.height=h+"px",gc.style.left=Ie+"px");var Gc=document.getElementById("buttonBackground");
Gc&&(Gc.style.width=f+"px",Z.Utils.graphicSize(Gc,parseFloat(gc.style.width),parseFloat(gc.style.height)),Gc.style.left="0px");var kd=document.getElementById("toolbarLogo");if(kd){var Zc=kd.style;if(Zc)if(V)Zc.display="none";else{Zc.display="inline-block";Z.Utils.graphicSize(kd,m,u);Zc.left=w+"px";Zc.top=H+"px";var w=w+(m+2),ld=document.getElementById("logoDivider");if(ld){Z.Utils.graphicSize(ld,p,q);var Vc=ld.style;Vc.left=w+"px";Vc.top=K+"px"}}}if(0!=Z.toolbarVisible&&1!=Z.toolbarVisible){var tc=
document.getElementById("buttonMinimize"),md=document.getElementById("buttonExpand");if(tc&&md){var ub=tc.style,Ic=md.style;ub&&Ic&&(V?(ub.display="none",Ic.display="none"):(ub.display="inline-block",Ic.display="inline-block",Z.Utils.buttonSize(tc,B,G),Z.Utils.buttonSize(md,B,G),ub.left=w+ia+"px",ub.top=T+"px",Ic.left=w+ja+"px",Ic.top=T+"px"))}}var w=20,kb=document.getElementById("buttonZoomOut");if(kb){Z.Utils.buttonSize(kb,B,G);var Kc=kb.style;Kc.left=w+"px";Kc.top=C+"px";w+=J}trsZ=document.getElementById("trackSliderZoom");
btsZ=document.getElementById("buttonSliderZoom");trsZ&&btsZ&&(trszS=trsZ.style,btszS=btsZ.style,trszS&&btszS&&(I?(trszS.display="none",btszS.display="none"):(trszS.display="inline-block",btszS.display="inline-block",Z.Utils.graphicSize(trsZ,A,D),trszS.left=w-2+"px",trszS.top=U+"px",Z.Utils.buttonSize(btsZ,L,y),btszS.left=parseFloat(trszS.left)+"px",btszS.top=S+"px",w+=Ba)));var $c=document.getElementById("buttonZoomIn");if($c){Z.Utils.buttonSize($c,B,G);var Id=$c.style;Id.left=w+"px";Id.top=C+"px";
w+=J+1}if(!M){var uc=document.getElementById("panDivider");if(uc){Z.Utils.graphicSize(uc,p,q);var ne=uc.style;ne.left=w+"px";ne.top=K+"px";var w=w+Y,Jd=document.getElementById("buttonPanLeft");if(Jd){Z.Utils.buttonSize(Jd,B,G);var Kd=Jd.style;Kd.left=w+"px";Kd.top=C+"px";w+=J}var Lc=document.getElementById("buttonPanUp");if(Lc){Z.Utils.buttonSize(Lc,B,G);var nd=Lc.style;nd.left=w+"px";nd.top=C+"px";w+=J}var Pc=document.getElementById("buttonPanDown");if(Pc){Z.Utils.buttonSize(Pc,B,G);var pd=Pc.style;
pd.left=w+"px";pd.top=C+"px";w+=J}var qd=document.getElementById("buttonPanRight");if(qd){Z.Utils.buttonSize(qd,B,G);var Md=qd.style;Md.left=w+"px";Md.top=C+"px";w+=J}}}if(!ka){var bd=document.getElementById("buttonReset");if(bd){Z.Utils.buttonSize(bd,B,G);var oe=bd.style;oe.left=w+"px";oe.top=C+"px";w+=J+1}}var ua=document.getElementById("fullViewDivider");if(ua){Z.Utils.graphicSize(ua,p,q);var pe=ua.style;pe.left=w+"px";pe.top=K+"px";w+=Y}var xc=document.getElementById("buttonFullViewExit");if(xc){Z.Utils.buttonSize(xc,
B,G);var Od=xc.style;Od.left=w+"px";Od.top=C+"px";Od.display=Z.fullView?"inline-block":"none"}var Qd=document.getElementById("buttonFullView");if(Qd){Z.Utils.buttonSize(Qd,B,G);var Rd=Qd.style;Rd.left=w+"px";Rd.top=C+"px";w+=J+1;Rd.display=Z.fullView?"none":"inline-block"}var Nc=document.getElementById("measureDivider");if(Nc){Z.Utils.graphicSize(Nc,p,q);var tb=Nc.style;tb.left=w+"px";tb.top=K+"px";w+=Y}if(null===Z.editMode){var Pb=document.getElementById("buttonMeasureExit");if(Pb){Z.Utils.buttonSize(Pb,
B,G);var Qa=Pb.style;Qa.left=w+"px";Qa.top=C+"px";Qa.display="measure"==Z.labelMode?"inline-block":"none"}}if(tc=document.getElementById("buttonMeasure"))Z.Utils.buttonSize(tc,B,G),ub=tc.style,ub.left=w+"px",ub.top=C+"px",w+=J+1,ub.display="measure"==Z.labelMode?"none":"inline-block";var ad=document.getElementById("rotateDivider");if(ad){Z.Utils.graphicSize(ad,p,q);var od=ad.style;od.left=w+"px";od.top=K+"px";var w=w+Y,La=document.getElementById("buttonRotateCounterwise");if(La){Z.Utils.buttonSize(La,
B,G);var Qb=La.style;Qb.left=w+"px";Qb.top=C+"px";w+=J}var k=document.getElementById("buttonRotateClockwise");if(k){Z.Utils.buttonSize(k,B,G);var kc=k.style;kc.left=w+"px";kc.top=C+"px";w+=J+1}}if(Z.tour){var Ob=document.getElementById("tourDivider");if(Ob){Z.Utils.graphicSize(Ob,p,q);var zd=Ob.style;zd.left=w+"px";zd.top=K+"px";var w=w+Y,gd=document.getElementById("buttonTourPrior");if(gd){Z.Utils.buttonSize(gd,B,G);var Oc=gd.style;Oc.left=w+"px";Oc.top=C+"px";w+=J+1}var Ja=document.getElementById("buttonTourNext");
if(Ja){Z.Utils.buttonSize(Ja,B,G);var Oa=Ja.style;Oa.left=w+"px";Oa.top=C+"px";w+=J+1}var dd=document.getElementById("buttonTourStop");if(dd){Z.Utils.buttonSize(dd,B,G);var Wd=dd.style;Wd.left=w+"px";Wd.top=C+"px";Wd.display=Z.tourPlaying?"inline-block":"none"}var Vb=document.getElementById("buttonTourStart");if(Vb){Z.Utils.buttonSize(Vb,B,G);var rd=Vb.style;rd.left=w+"px";rd.top=C+"px";w+=J+1;rd.display=Z.tourPlaying?"none":"inline-block"}}}else if(Z.slideshow){var qc=document.getElementById("slideshowDivider");
if(qc){Z.Utils.graphicSize(qc,p,q);var ba=qc.style;ba.left=w+"px";ba.top=K+"px";var w=w+Y,ib=document.getElementById("buttonSlideshowPrior");if(ib){Z.Utils.buttonSize(ib,B,G);var Da=ib.style;Da.left=w+"px";Da.top=C+"px";w+=J+1}var cb=document.getElementById("buttonSlideshowNext");if(cb){Z.Utils.buttonSize(cb,B,G);var ha=cb.style;ha.left=w+"px";ha.top=C+"px";w+=J+1}var F=document.getElementById("buttonSlideshowStop");if(F){Z.Utils.buttonSize(F,B,G);var Rc=F.style;Rc.left=w+"px";Rc.top=C+"px";Rc.display=
Z.slideshowPlaying?"inline-block":"none"}var pa=document.getElementById("buttonSlideshowStart");if(pa){Z.Utils.buttonSize(pa,B,G);var ga=pa.style;ga.left=w+"px";ga.top=C+"px";w+=J+1;ga.display=Z.slideshowPlaying?"none":"inline-block"}}}else if(null!==Z.imageSetPath){var Nb=document.getElementById("imageSetDivider");if(Nb){Z.Utils.graphicSize(Nb,p,q);var ed=Nb.style;ed.left=w+"px";ed.top=K+"px";var w=w+Y,qa=document.getElementById("buttonImageSetPrior");if(qa){Z.Utils.buttonSize(qa,B,G);var Fa=qa.style;
Fa.left=w+"px";Fa.top=C+"px";w+=J+1}trsiS=document.getElementById("trackSliderImageSet");btsiS=document.getElementById("buttonSliderImageSet");trsiS&&btsiS&&(trsisS=trsiS.style,btsisS=btsiS.style,trsisS&&btsisS&&(Bb?(trsisS.display="none",btsisS.display="none"):(trsisS.display="inline-block",btsisS.display="inline-block",Z.Utils.graphicSize(trsiS,le,Wb),trsisS.left=w-2+"px",trsisS.top=U+"px",Z.Utils.buttonSize(btsiS,L,y),btsisS.left=parseFloat(trsisS.left)+"px",btsisS.top=S+"px",w+=Za)));var Ea=document.getElementById("buttonImageSetNext");
if(Ea){Z.Utils.buttonSize(Ea,B,G);var fd=Ea.style;fd.left=w+"px";fd.top=C+"px";w+=J+1}}}if(Z.tour||Z.slideshow){var bb=document.getElementById("buttonAudioMuted");if(bb){Z.Utils.buttonSize(bb,B,G);var cc=bb.style;cc.left=w+"px";cc.top=C+"px";cc.display="none"}var ec=document.getElementById("buttonAudioOn");if(ec){Z.Utils.buttonSize(ec,B,G);var Sc=ec.style;Sc.left=w+"px";Sc.top=C+"px";w+=J+1;Sc.display="none"}a.initializeAudioMuteButtons()}if(1==Z.helpVisible||3==Z.helpVisible){var ya=document.getElementById("buttonHelp");
if(ya){Z.Utils.buttonSize(ya,B,G);var rc=ya.style;rc.left=w+"px";rc.top=C+"px"}}var Tc=document.getElementById("progressTextBox");if(Tc){var R=Tc.style;R&&(O?R.display="none":(R.display="inline-block",R.width=E+"px",R.height=ra+"px",R.left=f-parseFloat(gc.style.left)-parseFloat(R.width)+"px",R.top=(h-parseFloat(R.height))/2+"px"))}};this.syncSliderToViewportZoom=function(a){f(a)};this.syncSliderToViewportImageSet=function(a){D(a)};this.z457=function(a){q(a)};this.backgroundEventsHandler=function(a){a=
Z.Utils.event(a);if(a=Z.Utils.relatedTarget(a)){var b=a.parentNode;b&&(b=b.id)&&(C||Y||-1==b.indexOf("button")||-1!=b.indexOf("buttonContainer")||Z.Utils.setButtonDefaults(a.parentNode))}}};
Z.ZoomifyNavigator=function(a){function b(c,d){var e="undefined"!==typeof d&&null!==d?!1:!0,f=e?a:d;"unconverted"!=Z.tileSource?("ZoomifyImageFile"==Z.tileSource?fc=f.formatTilePath(0,0,0):"ZoomifyImageFolder"==Z.tileSource&&(fc=Z.Utils.cacheProofPath(f.getImagePath()+"/TileGroup0/0-0-0."+Z.tileType)),ka=null,ka=new Image,ka.onload=c,ka.onerror=K,"offsetLoading"!=fc?(e||(da[da.length]={id:d.getViewportID().toString(),image:ka}),"ZoomifyImageFile"==Z.tileSource?(new Z.NetConnector).loadImage(fc,Z.Utils.createCallback(null,
c),"navigator",null):ka.src=fc):window.setTimeout(function(){b(c)},100)):"undefined"!==typeof unconvertedImage&&null!==unconvertedImage?(ka=f.createUnconvertedImageThumbnail(unconvertedImage),e&&"function"===typeof c?c():da[da.length]="undefined"!==typeof d?{id:d.getViewportID().toString(),image:ka}:{id:null,image:null}):window.setTimeout(function(){b(c,d)},100)}function c(a){for(var c=0,d=Z.imageSetLength;c<d;c++)b(null,Z["Viewport"+c.toString()]);a()}function d(a,b){"ZoomifyImageFile"==Z.tileSource&&
(ka=b);var c=Z.Utils.createContainerElement("div","testImageContainer","inline-block","absolute","hidden",Y+"px",ja+"px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);c.appendChild(ka);c.removeChild(ka);c=null;c=ka.height;if(0!=ka.width&&0!=c){Z.NavigatorDisplay=Z.Utils.createContainerElement("div","NavigatorDisplay","inline-block","absolute","hidden",Y+"px",ja+"px",la+"px",Bb+"px","solid","1px","transparent none","0px","0px","normal",null,!0);C=Z.NavigatorDisplay;S=C.style;
Z.slideshow&&Z.Utils.setOpacity(C,0);c=parseInt(Z.Utils.getResource("z230"),10);S.zIndex=(c+2).toString();var c=parseFloat(Z.Utils.getResource("z82")),e=Z.Utils.getResource("z83"),f=Z.Utils.getResource("z83NOALPHA"),e=Z.Utils.createContainerElement("div","navigatorBackground","inline-block","absolute","hidden",Y+"px",ja+"px","0px","0px","none","0px",e,"0px","0px","normal",null,!0);Z.Utils.setOpacity(e,c,f);Z.NavigatorDisplay.appendChild(e);X=e;Ba=X.style;c=Z.Utils.createContainerElement("div","navigatorImageContainer",
"inline-block","absolute","hidden",Y+"px",ja+"px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);c.appendChild(ka);ka.alt=Z.Utils.getResource("z439");Z.NavigatorDisplay.appendChild(c);L=c;I=L.style;O=ka;c=O.width;f=O.height;e=Z.Utils.createContainerElement("div","navigatorRectangle","inline-block","absolute","hidden",Y+1+"px",ja+1+"px",la+"px",Bb+"px","solid","1px","transparent none","0px","0px","normal",null,!0);e.style.borderColor=Z.Utils.stringValidateColorValue(Z.navigatorRectangleColor);
Z.NavigatorDisplay.appendChild(e);V=e;M=V.style;Z.ViewerDisplay.appendChild(Z.NavigatorDisplay);m(Y,ja,la,Bb,g,c,f);y(1==Z.navigatorVisible||2==Z.navigatorVisible);Z.Utils.addEventListener(C,"mouseover",Z.Utils.stopPropagation);Z.Utils.addEventListener(C,"mousedown",u);Z.Utils.addEventListener(C,"touchstart",G);Z.Utils.addEventListener(C,"touchmove",ra);Z.Utils.addEventListener(C,"touchend",sa);Z.Utils.addEventListener(C,"touchcancel",ta);p||(p=!0,Z.Utils.validateCallback("navigatorInitialized"),
Z.Viewer.validateViewerReady("navigatorInitialized"));A()}else window.setTimeout(function(){d(a,b)},100)}function e(){if(da&&0<da.length&&null!==da[0]&&0<da[0].image.width){var a=Z.Utils.arrayIndexOfObjectValue(da,"id","0");if(-1!=a){a=da[a].image;ka=a.cloneNode(!1);a=null;if("undefined"===typeof b)var b=null;d(b,ka)}else window.setTimeout(function(){e()},100)}else window.setTimeout(function(){e()},100)}function f(a){if(Z.NavigatorDisplay)if(Z.slideshow&&Z.Utils.setOpacity(Z.NavigatorDisplay,0),"ZoomifyImageFile"==
Z.tileSource&&(ka=a),L&&ka&&0<ka.width&&0<ka.height){a=ka.width;var b=ka.height;L.appendChild(ka);O=Z.NavigatorDisplay.childNodes[1].firstChild;m(Y,ja,la,Bb,g,a,b);a=Z.ToolbarDisplay&&"inline-block"==Z.ToolbarDisplay.style.display&&!Z.ToolbarMinimized||"undefined"!==typeof slideList&&null!==slideList&&"visible"==slideList.style.visibility;y((1==Z.navigatorVisible||2==Z.navigatorVisible)&&a);a=parseInt(Z.Utils.getResource("z230"),10);Z.NavigatorDisplay.style.zIndex=(a+2).toString();A()}else window.setTimeout(function(){f()},
100)}function h(){p&&(Za&&(window.clearInterval(Za),Za=null),C&&S&&X&&Ba&&L&&I&&O&&V&&M||(C=Z.NavigatorDisplay,S=C.style,X=Z.NavigatorDisplay.firstChild,Ba=X.style,L=Z.NavigatorDisplay.childNodes[1],I=L.style,O=Z.NavigatorDisplay.childNodes[1].firstChild,V=Z.NavigatorDisplay.childNodes[2],M=V.style))}function m(a,b,c,d,e,f,h){e||(e=g);if("undefined"===typeof a||null===a)a=Z.navigatorW;if("undefined"===typeof b||null===b)b=Z.navigatorH;if("undefined"===typeof c||null===c)c=0;if("undefined"===typeof d||
null===d)d=0;C||(C=Z.NavigatorDisplay);S||(S=C.style);O=C.childNodes[1].firstChild;0==O.width&&"undefined"!==f&&null!==f&&(O.width=f);0==O.height&&"undefined"!==h&&null!==h&&(O.height=h);C&&S&&O&&(e&&(a=1,a=0==e?Z.viewerW/Z.viewerH:O.width/O.height,a*=b),S.width=a+"px",S.height=b+"px",S.left=c+"px",S.top=d+"px",D(a,b))}function D(a,b){O||(O=Z.NavigatorDisplay.childNodes[1].firstChild);O&&0!=O.width&&0!=O.height?(Ba||(Ba=Z.NavigatorDisplay.firstChild.style),I||(I=Z.NavigatorDisplay.childNodes[1].style),
Ba&&I&&(Ba.width=a+"px",Ba.height=b+"px",E(a,b),I.width=O.width+"px",I.height=O.height+"px",I.left=(a-O.width)/2+"px",I.top=(b-O.height)/2+"px",A())):window.setTimeout(function(){D(a,b)},100)}function E(a,b){O||(O=Z.NavigatorDisplay.childNodes[1].firstChild);if(O){var c=O.width,d=O.height,e=c/d,f=a/c,g=b/d;f<=g?(c=a,d=a/e,navImageT=(b-a/c*d)/2):g<f&&(d=b,c=b*e,navImageL=(a-b/d*c)/2);O.width=c;O.height=d}}function y(a){S||(S=Z.NavigatorDisplay.style);S&&(S.display=a?"inline-block":"none")}function A(){if(a&&
a.getStatus("initialized")){U();H();var b=a.calculateCurrentCenterCoordinates();q(b)}}function H(){if(O&&M){var b=O.width/Z.imageW,c=O.height/Z.imageH,d=a.getZoom(),c=Z.viewerH*c/d;M.width=Z.viewerW*b/d+"px";M.height=c+"px"}}function U(){I||(I=Z.NavigatorDisplay.childNodes[1].style);if(I){var b=a.getRotation();Z.Utils.rotateElement(I,b,!0)}}function q(a){if(O&&M&&I){if("undefined"===typeof a||null===a||0==a.x&&0==a.y)a=new Z.Utils.Point(Z.imageX,Z.imageY);if("undefined"===typeof z||null===z)z=Z.imageZ;
var b=Z.imageR;0>b&&(b+=360);var c=parseFloat(O.width),d=parseFloat(O.height),b=Z.Utils.rotatePoint(c/Z.imageW*a.x-c/2,d/Z.imageH*a.y-d/2,-b);a=b.x-parseFloat(M.width)/2;c=b.y-parseFloat(M.height)/2;b=parseFloat(S.width)/2;c=parseFloat(S.height)/2+c-1;M.left=b+a+"px";M.top=c+"px"}}function T(){if(O&&M&&I){if("undefined"===typeof z||null===z)z=Z.imageZ;var b=Z.imageR;0>b&&(b+=360);var c=parseFloat(M.left),d=parseFloat(M.top),e=parseFloat(S.width)/2,f=parseFloat(S.height)/2,d=d-f,c=c-e+parseFloat(M.width)/
2,e=d+parseFloat(M.height)/2,b=Z.Utils.rotatePoint(c,e,b),c=parseFloat(O.width),e=parseFloat(O.height),d=c/Z.imageW,b=new Z.Utils.Point((b.x+c/2)/d,(b.y+e/2)/d);a.syncViewportToNavigator(b)}}function K(){Z.Utils.showMessage(Z.Utils.getResource("z271"))}function u(b){Z.interactivityOff||(a.zoomAndPanAllStop(!1,!0),Z.maskingSelection&&Z.maskClearOnUserAction&&a.clearMask(),C&&V&&M&&(b=Z.Utils.event(b),V.mouseXPrior=b.clientX,V.mouseYPrior=b.clientY,dragPtStart=new Z.Utils.Point(b.clientX,b.clientY),
Z.Utils.addEventListener(C,"mousemove",J),Z.Utils.addEventListener(C,"mouseup",B),Z.Utils.addEventListener(document,"mouseup",B)))}function J(a){if(!Z.interactivityOff&&V&&M){var b=parseFloat(M.left),c=parseFloat(M.top);M.left=b+(a.clientX-V.mouseXPrior)+"px";M.top=c+(a.clientY-V.mouseYPrior)+"px";V.mouseXPrior=a.clientX;V.mouseYPrior=a.clientY;T();return!1}}function B(b){if(!Z.interactivityOff&&C&&V&&M){document.mousemove=null;document.mouseup=null;Z.Utils.removeEventListener(C,"mousemove",J);Z.Utils.removeEventListener(C,
"mouseup",B);Z.Utils.removeEventListener(document,"mouseup",B);b=Z.Utils.event(b);var c=new Z.Utils.Point(b.clientX,b.clientY);4>Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),M.left=b.clientX-c.x-parseFloat(M.width)/2+"px",M.top=b.clientY-c.y-parseFloat(M.height)/2+"px");T();a.updateView()}}function G(a){!Z.interactivityOff&&(a.preventDefault(),C&&V&&M&&(a=Z.Utils.getFirstTouch(a)))&&(a=new Z.Utils.Point(a.pageX,a.pageY),dragPtStart=
new Z.Utils.Point(a.x,a.y),V.mouseXPrior=a.x,V.mouseYPrior=a.y)}function ra(a){if(!Z.interactivityOff&&(a.preventDefault(),Z.mousePan)){if(V&&M&&(a=Z.Utils.getFirstTouch(a))){a=new Z.Utils.Point(a.pageX,a.pageY);var b=parseFloat(M.left),c=parseFloat(M.top);M.left=b+(a.x-V.mouseXPrior)+"px";M.top=c+(a.y-V.mouseYPrior)+"px";V.mouseXPrior=a.x;V.mouseYPrior=a.y;T()}return!1}}function sa(b){if(!Z.interactivityOff&&C&&V&&M){if(b=Z.Utils.getFirstTouch(b)){b=new Z.Utils.Point(b.pageX,b.pageY);var c=new Z.Utils.Point(b.x,
b.y);Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)<(Z.mobileDevice?6:3)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),M.left=b.x-c.x-parseFloat(M.width)/2+"px",M.top=b.y-c.y-parseFloat(M.height)/2+"px")}T();a.updateView()}}function ta(b){if(!Z.interactivityOff&&C&&V&&M){if(b=Z.Utils.getFirstTouch(b)){b=new Z.Utils.Point(b.pageX,b.pageY);var c=new Z.Utils.Point(b.x,b.y);Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)<(Z.mobileDevice?6:3)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),
M.left=b.x-c.x-parseFloat(M.width)/2+"px",M.top=b.y-c.y-parseFloat(M.height)/2+"px")}T();a.updateView()}}var ia=this,p=!1,xa=a.getViewportID().toString(),Za,C,S,X,Ba,L,I,O,V,M,ka,da=[],Y=Z.navigatorW,ja=Z.navigatorH,la=Z.navigatorL,Bb=Z.navigatorT,g=Z.navigatorFit,fc;"multiple"!=Z.imagePath?b(d):c(e);this.z556=function(a,b){d(a,b)};this.setImage=function(a){L&&ka&&0<L.childNodes.length&&(L.innerHTML="");"undefined"===typeof da||null===da||0==da.length?b(f):(a=Z.Utils.arrayIndexOfObjectValue(da,"id",
xa),-1!=a&&(ka=da[a].image,f(ka)))};this.getInitialized=function(){return p};this.setVisibility=function(a){y(a)};this.syncToViewport=function(){A()};this.z657=function(){H()};this.z659=function(){U()};this.z658=function(a){q(a)};this.setViewport=function(b){a=b;xa=a.getViewportID().toString();ia.setImage(a.getImagePath())};this.z682=function(){p?h():Za=window.setInterval(h,300)};this.setSizeAndPosition=function(a,b,c,d,e,f,g){m(a,b,c,d,e,f,g)}};
Z.ZoomifyRuler=function(a){function b(a,b,c,d){if("undefined"===typeof a||null===a)a=Z.rulerW;if("undefined"===typeof b||null!==b)b=Z.rulerH;if("undefined"===typeof c||null!==c)c=-1==Z.rulerL&&Z.Navigator?Z.navigatorL:Z.rulerL;if("undefined"===typeof d||null!==d)d=-1==Z.rulerT&&Z.Navigator?Z.navigatorT+Z.navigatorH+1:Z.rulerT;m.width=a+"px";m.height=b+"px";m.left=c+"px";m.top=d+"px"}function c(a){m||(m=Z.RulerDisplay.style);m&&(m.display=a?"inline-block":"none")}function d(b){if(a&&a.getStatus("initialized")){var c=
a.getZoom(),d="pixels"==Z.units?0:4;if(B){B.visibility="visible";var e;e=0!=sa?sa*c:100*c;1>e?Math.round(100*e):Math.round(e)}e=0;for(var f=C.length;e<f;e++)C[e].symbol==Z.units&&(S=e);Za=null!==xa&&0!=xa?xa:null!==p&&0!=p?Z.imageW/p:1;c=Z.Utils.roundToFixed(X/Za/c,d);q.firstChild.nodeValue=c.toString();u.visibility="visible";K.firstChild.nodeValue="um"!=C[S].symbol?C[S].symbol:"\u03bcm";if(B)if(c=Math.round(100*a.getZoom()),c=Math.round(c),e="%",d=Math.round(100*a.getZoom())==Math.round(1E3*a.getZoom())/
1E3*100?"":"~",1==Z.rulerListType&&0!=sa&&(c=100*a.getZoom()*sa/100,c=Math.round(c),e="x"),d=c.toString()+e+d,b){for(b=insertIndex=0;c>ia[b].value;)b++,insertIndex=b;if(c==ia[insertIndex].value)Z.Utils.updateSelectElement(J,ia);else{var h=Z.Utils.arrayClone("magnifications",ia,h),h=Z.Utils.arraySplice(h,insertIndex,0,{text:d,value:c.toString()});Z.Utils.updateSelectElement(J,h)}J.selectedIndex=insertIndex}else J.options[0]=new Option(d,c.toString()),J.selectedIndex=0}}function e(b){var c=0;if(b=Z.Utils.event(b))b=
Z.Utils.target(b),c=parseInt(b.options[b.selectedIndex].value,10),isNaN(c)||a.zoomAndPanToView(a.viewX,a.viewY,(1==Z.rulerListType?100*c/sa:c)/100)}var f=!1,h,m,D,E,y,A,H,U,q,T,K,u,J,B;Z.Utils.getResource("z442");var G=Z.Utils.getResource("z441"),ra=Z.Utils.getResource("z440"),sa=Z.sourceMagnification,ta,ia,p=Z.unitsPerImage,xa=Z.pixelsPerUnit,Za=1,C=[],S=-1,X=1;(function(){Z.RulerDisplay=Z.Utils.createContainerElement("div","RulerDisplay","inline-block","absolute","hidden","1px","1px","0px","0px",
"solid","1px","transparent none","0px","0px","normal");h=Z.RulerDisplay;m=h.style;var p=parseFloat(Z.Utils.getResource("z82")),L=Z.Utils.getResource("z83"),I=Z.Utils.getResource("z83NOALPHA"),L=Z.Utils.createContainerElement("div","rulerBackground","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",L,"0px","0px","normal",null,!0);Z.Utils.setOpacity(L,p,I);Z.RulerDisplay.appendChild(L);D=L;E=D.style;p=Z.Utils.getResource("z198");I=Z.Utils.createContainerElement("div","rulerScaleBar",
"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",p,"0px","0px","normal",null,!0);Z.RulerDisplay.appendChild(I);y=I;A=y.style;I=parseInt(Z.Utils.getResource("z230"),10);A.zIndex=(I+3).toString();I=Z.Utils.createContainerElement("div","rulerScaleBarNotchL","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px",p,"0px","0px","normal",null,!0);Z.RulerDisplay.appendChild(I);rSBNL=I;rsbnlS=rSBNL.style;p=Z.Utils.createContainerElement("div","rulerScaleBarNotchR","inline-block",
"absolute","hidden","1px","1px","0px","0px","none","0px",p,"0px","0px","normal",null,!0);Z.RulerDisplay.appendChild(p);rSBNR=p;rsbnrS=rSBNR.style;p=parseInt(Z.Utils.getResource("z194"),10);I=Z.Utils.createContainerElement("div","errorTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);L=document.createTextNode("");I.appendChild(L);Z.Utils.setTextNodeStyle(L,"black","verdana",p+"px","none","normal","normal","normal","normal",
"1em","center","none");Z.RulerDisplay.appendChild(I);H=I;U=H.style;I=Z.Utils.createContainerElement("div","scaleTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);L=document.createTextNode("");I.appendChild(L);Z.Utils.setTextNodeStyle(L,"black","verdana",p+"px","none","normal","normal","normal","normal","1em","right","none");Z.RulerDisplay.appendChild(I);q=I;T=q.style;I=Z.Utils.createContainerElement("div","unitTextBox",
"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);L=document.createTextNode("");I.appendChild(L);Z.Utils.setTextNodeStyle(L,"black","verdana",p+"px","none","normal","normal","normal","normal","1em","left","none");Z.RulerDisplay.appendChild(I);K=I;u=K.style;if(0!=Z.rulerListType){ia=1==Z.rulerListType&&0!=sa?[{text:"2.5x",value:2.5},{text:"5x",value:5},{text:"10x",value:10},{text:"20x",value:20},{text:"40x",value:40},{text:"60x",
value:60},{text:"100x",value:100}]:[{text:"10%",value:10},{text:"20%",value:20},{text:"30%",value:30},{text:"40%",value:40},{text:"50%",value:50},{text:"60%",value:60},{text:"70%",value:70},{text:"80%",value:80},{text:"90%",value:90},{text:"100%",value:100}];ta=new Z.Utils.createSelectElement("magnificationList","",ia,1,1,1,null,!0,e,"change");Z.RulerDisplay.appendChild(ta);J=ta;B=J.style;var p=100*Z.minZ,I=100*Z.maxZ,L=Math.round(p),O=Math.round(I),V="%";-1==p&&(p=Math.round(100*a.calcZoomDecimalToFitDisplay()));
1==Z.rulerListType&&0!=sa&&(p=p*sa/100,L=Math.round(p),V="x");for(;ia[0].value<=L;)ia=Z.Utils.arraySplice(ia,0,1);-1==I&&(I=Math.round(100*a.calcZoomDecimalToFitDisplay()));1==Z.rulerListType&&0!=sa&&(I=I*sa/100,O=Math.round(I),V="x");for(;ia[ia.length-1].value>=O;)ia=Z.Utils.arraySplice(ia,ia.length-1,1);ia=Z.Utils.arraySplice(ia,0,0,{text:L.toString()+V+(L==p?"":"~")+G,value:L});ia[ia.length]={text:O.toString()+V+(O==I?"":"~")+ra,value:I};Z.Utils.updateSelectElement(J,ia);J.selectedIndex=0}C=[{magnitude:Math.pow(10,
24),symbol:"Ym"},{magnitude:Math.pow(10,21),symbol:"Zm"},{magnitude:Math.pow(10,18),symbol:"Em"},{magnitude:Math.pow(10,15),symbol:"Pm"},{magnitude:Math.pow(10,12),symbol:"Tm"},{magnitude:Math.pow(10,9),symbol:"Gm"},{magnitude:Math.pow(10,6),symbol:"Mm"},{magnitude:Math.pow(10,3),symbol:"km"},{magnitude:Math.pow(10,2),symbol:"hm"},{magnitude:Math.pow(10,1),symbol:"dam"},{magnitude:Math.pow(10,0),symbol:"m"},{magnitude:Math.pow(10,-1),symbol:"dm"},{magnitude:Math.pow(10,-2),symbol:"cm"},{magnitude:Math.pow(10,
-3),symbol:"mm"},{magnitude:Math.pow(10,-6),symbol:"um"},{magnitude:Math.pow(10,-9),symbol:"nm"},{magnitude:Math.pow(10,-12),symbol:"pm"},{magnitude:Math.pow(10,-15),symbol:"fm"},{magnitude:Math.pow(10,-18),symbol:"am"},{magnitude:Math.pow(10,-21),symbol:"zm"},{magnitude:Math.pow(10,-24),symbol:"ym"},{magnitude:Math.pow(10,-24),symbol:"pixels"}];p=Z.rulerW;I=Z.rulerH;L=-1==Z.rulerL&&Z.Navigator?Z.navigatorL:Z.rulerL;O=-1==Z.rulerT&&Z.Navigator?Z.navigatorT+Z.navigatorH+1:Z.rulerT;X=0!=Z.rulerListType?
p-53-16:p-10;var V=(I-1+5)/2,M=X/2-5,S=V-10,da="pixels"==Z.units?7:0;E&&A&&rsbnlS&&rsbnrS&&H&&U&&q&&T&&K&&u&&(b(p,I,L,O),E.width=p+"px",E.height=I+"px",E.left="0px",E.top="0px",B&&(B.width="53px",B.left=p-53-3+"px",B.top=(I-20)/2+"px",B.visibility="visible"),A.width=X+"px",A.height="1px",A.left="5px",A.top=V+3+"px",rsbnlS.width="1px",rsbnlS.height="6px",rsbnlS.left="5px",rsbnlS.top=V+"px",rsbnrS.width="1px",rsbnrS.height="6px",rsbnrS.left=5+X+"px",rsbnrS.top=V+"px",U.width=X+"px",U.height="15px",
U.left="12px",U.top=S+"px",T.width=M+"px",T.height="15px",T.left=15-da+"px",T.top=S+"px",u.width=M+"px",u.height="15px",u.left=X/2+15-da+"px",u.top=S+"px");Z.ViewerDisplay.appendChild(Z.RulerDisplay);c(Z.rulerVisible);Z.Utils.addEventListener(h,"mouseover",Z.Utils.stopPropagation);f||(f=!0,Z.Utils.validateCallback("rulerInitialized"),Z.Viewer.validateViewerReady("rulerInitialized"));d(!0)})();this.getInitialized=function(){return f};this.setVisibility=function(a){c(a)};this.setSizeAndPosition=function(a,
c,d,e,f){b(a,c,d,e,f)};this.syncToViewport=function(a){d(a)}};
Z.NetConnector=function(){function a(a,c,d){var f=a.substring(0,a.indexOf("?")),h=parseFloat(a.substring(a.indexOf("?")+1,a.indexOf(",")));a=parseFloat(a.substring(a.indexOf(",")+1,a.length));h=new Z.Utils.Range(h,h+a);b(f,e,h,c,d)}function b(a,b,e,f,h,m){var q=c();if(q){var y="function"===typeof b;if(y){var p=b;b=function(){window.setTimeout(Z.Utils.createCallback(null,p,q),1)};q.onreadystatechange=function(){4==q.readyState&&(q.onreadystatechange=new Function,b())}}try{"undefined"===typeof e||null===
e?(q.open("GET",a,y),q.send(null)):"undefined"!==typeof f&&null!==f&&"ZoomifyImageFile"==Z.tileSource&&("tile"!=f&&(a=Z.Utils.cacheProofPath(a)),q.open("GET",a,!0),q.responseType="arraybuffer",Z.Utils.defineObjectProperty(q,"zType",{value:f,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(q,"zTile",{value:h,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(q,"zChunkNumber",{value:m,writable:!1,enumerable:!1,configurable:!1}),Z.browser==Z.browsers.SAFARI&&
q.setRequestHeader("If-Modified-Since","Thu, 01 Dec 1994 16:00:00 GMT"),q.setRequestHeader("Range","bytes="+e.start.toString()+"-"+e.end.toString()),q.send(null))}catch(A){d(A,a,f),q=null,console.log(A)}}else Z.Utils.showMessage(Z.Utils.getResource("z295"))}function c(){var a=null;switch(Z.xmlHttpRequestSupport){case "XMLHttpRequest":a=new XMLHttpRequest;break;case "Msxml2.XMLHTTP.6.0":a=new ActiveXObject("Msxml2.XMLHTTP.6.0");break;case "Msxml2.XMLHTTP.3.0":a=new ActiveXObject("Msxml2.XMLHTTP.3.0");
break;case "Microsoft.XMLHTTP":a=new ActiveXObject("Microsoft.XMLHTTP")}return a}function d(a,b,c){1==Z.localUse&&(Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&7<=Z.browserVersion)?Z.Utils.showMessage(Z.Utils.getResource("z288"),!0):1==Z.localUse&&"ZoomifyImageFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z290"),!0):-1!=b.toLowerCase().indexOf(".zif")?Z.Utils.showMessage(Z.Utils.getResource("z256-ZIFBYTERANGE")+
c+".",!1,y,"center"):-1!=b.indexOf("ImageProperties.xml")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEXML"),!0,null,"left"):-1!=b.toLowerCase().indexOf("reply_data")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEOFFSET"),!1,y,"center"):-1!=b.indexOf(Z.Utils.getResource("z200"))?Z.Utils.showMessage(Z.Utils.getResource("z256-TOOLBARSKINSXML"),!0,null,"left"):-1!=b.indexOf(Z.Utils.getResource("z209"))?Z.Utils.showMessage(Z.Utils.getResource("z256-SLIDESXML"),!1,E,"center"):-1!=b.indexOf(Z.Utils.getResource("z135"))?
Z.Utils.showMessage(Z.Utils.getResource("z256-HOTSPOTSXML"),!1,E,"center"):Z.Utils.showMessage(Z.Utils.getResource("z256"),!1,E,"center")}function e(a,b){if(a)if(200!==a.status&&0!==a.status&&206!==a.status){var c=a.status,d=404==c?"Not Found":a.statusText;Z.Toolbar&&!Z.Toolbar.getInitialized()?Z.Utils.showMessage(Z.Utils.getResource("z256-TOOLBARSKINSXML"),!0,null,"left"):"ZoomifyImageFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z273RANGEREQUESTS")+c+" - "+d,!0,null,"left"):Z.Utils.showMessage(Z.Utils.getResource("z273")+
c+" - "+d,!1,E,"center")}else if(c=null,c=null!==Z.annotationPath&&".json"==Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-5,Z.annotationPath.length),a.response&&a.zType&&"ZoomifyImageFile"==Z.tileSource){if(Z.Viewport)if(c=new Z.Utils.createUint8Array(a.response,0),"header"==a.zType)if("undefined"===typeof b||null===b)Z.Viewport.parseZIFHeader(c);else for(var d=0,e=Z.imageSetLength;d<e;d++)b==d&&Z["Viewport"+d.toString()].parseZIFHeader(c);else if("offset"==a.zType)if("undefined"===
typeof b||null===b)Z.Viewport.parseZIFOffsetChunk(c,a.zChunkNumber);else for(d=0,e=Z.imageSetLength;d<e;d++)b==d&&Z["Viewport"+d.toString()].parseZIFOffsetChunk(c,a.zChunkNumber);else if("byteCount"==a.zType)if("undefined"===typeof b||null===b)Z.Viewport.parseZIFByteCountChunk(c,a.zChunkNumber);else for(d=0,e=Z.imageSetLength;d<e;d++)b==d&&Z["Viewport"+d.toString()].parseZIFByteCountChunk(c,a.zChunkNumber);else if("image"==a.zType.substring(0,5))A--,Z.Viewport.parseZIFImage(c,a.zTile,a.zType);else if("navigator"==
a.zType)if("undefined"===typeof b||null===b)Z.viewportCurrent.parseZIFImage(c,a.zTile,a.zType);else for(d=0,e=Z.imageSetLength;d<e;d++)b==d&&Z["Viewport"+d.toString()].parseZIFImage(c,a.zTile,a.zType);else Z.Utils.showMessage(Z.Utils.getResource("z256-ZIFBYTES"),!1,y,"center")}else a.responseXML&&a.responseXML.documentElement&&!c?(c=a.responseXML,f(c,b)):a.responseText&&(c=a.responseText,"ZoomifyImageFolder"==Z.tileSource?(c=Z.Utils.xmlConvertTextToDoc(c),f(c,b)):"ZoomifyImageFile"==Z.tileSource&&
(c=Z.Utils.xmlConvertTextToDoc(c),f(c,b)));else Z.Utils.showMessage(Z.Utils.getResource("z272"),!1,E,"center")}function f(a,b){if(a&&a.documentElement){var c=a.documentElement.tagName;if("COPYRIGHT"==c){var c=a.documentElement.getAttribute("STATEMENTTEXT"),d=a.documentElement.getAttribute("DECLINEDTEXT");Z.Utils.stringValidate(c)?Z.Utils.showCopyright(c,d):Z.Utils.showMessage(Z.Utils.getResource("z255"),!0)}else if("IMAGE_PROPERTIES"==c||"ZIFHEADER"==c){if("ZoomifyImageFile"==Z.tileSource||"ZoomifyImageFolder"==
Z.tileSource)if("multiple"!=Z.imagePath)Z.Viewport&&Z.Viewport.z602(a);else for(c=0,d=Z.imageSetLength;c<d;c++)b==c&&Z["Viewport"+c.toString()].z602(a)}else if("SKINDATA"==c)Z.Toolbar&&Z.Toolbar.parseSkinXML(a);else if("SLIDEDATA"==c)Z.Viewport&&Z.Viewport.parseSlidesXML(a);else if("HOTSPOTDATA"==c)if("undefined"===typeof b||null===b)Z.Viewport&&Z.Viewport.parseHotspotsXML(a);else for(c=0,d=Z.imageSetLength;c<d;c++)b==c&&Z["Viewport"+c.toString()].parseHotspotsXML(a);else"ANIMATIONDATA"==c?Z.Viewer&&
Z.Viewer.parseImageSetXML(a,"animation"):Z.Utils.showMessage(Z.Utils.getResource("z296"),!0)}else Z.Utils.showMessage(Z.Utils.getResource("z293"),!0)}function h(b,c,d,e){if(A<H)return A++,"ZoomifyImageFile"==Z.tileSource&&("undefined"!==typeof e&&null!==e||"navigator"==d)?a(b,d,e):(c=Z.Utils.createCallback(null,m,c),(new D(b,c,d)).start()),!0;-1==Z.Utils.arrayIndexOfObjectValue(K,"sc",b)&&(K[K.length]={sc:b,cb:c,ct:d,t:e},T||(T=window.setInterval(function(){var a=K[0];h(a.sc,a.cb,a.ct,a.t)&&(K=Z.Utils.arraySplice(K,
0,1));0==K.length&&T&&(window.clearInterval(T),T=null)},q)));return!1}function m(a,b,c){A--;if("function"===typeof a)try{a(c)}catch(d){Z.Utils.showMessage(d.name+Z.Utils.getResource("z245")+b+" "+d.message,!0)}}function D(a,b,c){function d(c){e.onload=null;e.onabort=null;e.onerror=null;f&&window.clearTimeout(f);window.setTimeout(function(){b(a,c?e:null)},1)}var e=null,f=null;this.start=function(){e=new Image;var b=function(){d(!1)};e.onload=function(){d(!0)};e.onabort=b;e.onerror=b;f=window.setTimeout(function(){console.log(Z.Utils.getResource("z253"));
d(!1);Z.Viewport.traceDebugValues("imageRequestTimeout",c+" timeout: "+a)},U);e.src=a}}var E=parseInt(Z.Utils.getResource("z268"),10),y=parseInt(Z.Utils.getResource("z268MEDIUM"),10),A=0,H=parseInt(Z.Utils.getResource("z140"),10),U=parseFloat(Z.Utils.getResource("z139")),q=Z.Utils.getResource("DEFAULT_IMAGELOADQUEUEDELAY"),T,K=[];this.loadXML=function(a,c){"undefined"===typeof c||null===c?b(a,e,null):b(a,function(a){e(a,c)},null)};this.loadByteRange=function(a,c,d,f,h,m){c=new Z.Utils.Range(c,d);
b(a,e,c,f,h,m)};this.loadImage=function(a,b,c,d){h(a,b,c,d)}};
Z.Utils={addCrossBrowserMethods:function(){document.addEventListener?(this.disableTextInteraction=function(a){if(a){var b=a.parentNode.style;b&&(a.parentNode.unselectable="on",b.userSelect="none",b.MozUserSelect="none",b.webkitUserSelect="none",b.webkitTouchCallout="none",b.webkitTapHighlightColor="transparent")}},this.renderQuality=function(a,b){b&&a.style.setProperty("image-rendering","high"==b?"optimizeQuality":"optimizeSpeed",null)},this.setOpacity=function(a,b,c){Z.alphaSupported?a.style.opacity=
b:c&&(a.style.backgroundColor=c)}):document.attachEvent&&(this.disableTextInteraction=function(a){a&&(a.parentNode.unselectable="on",a.parentNode.onselectstart=function(){return!1})},this.renderQuality=function(a,b){b&&(a.style.msInterpolationMode="high"==b?"bicubic":"nearest-neighbor")},this.setOpacity=function(a,b,c){Z.alphaSupported?(b*=100,a.style.zoom=1,a.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+b+")",a.style.filter="alpha(opacity="+b+")",100==b&&(a.style.filter="")):c&&
(a.style.backgroundColor=c)})},addCrossBrowserEvents:function(){document.addEventListener?(this.addEventListener=function(a,b,c){a&&("mousewheel"==b&&a.addEventListener("DOMMouseScroll",c,!1),a.addEventListener(b,c,!1))},this.removeEventListener=function(a,b,c){a&&("mousewheel"==b&&a.removeEventListener("DOMMouseScroll",c,!1),a.removeEventListener(b,c,!1))},this.event=function(a){return a},this.target=function(a){return a.target},this.relatedTarget=function(a){return a.relatedTarget},this.isRightMouseButton=
function(a){var b=!1;if(2==a.which||3==a.which)b=!0;return b},this.preventDefault=function(a){a.preventDefault()},this.stopPropagation=function(a){a.stopPropagation()}):document.attachEvent&&(this.addEventListener=function(a,b,c){if(-1==this._findListener(a,b,c)){var d=function(){var b=window.event;Function.prototype.call?c.call(a,b):(a._currentListener=c,a._currentListener(b),a._currentListener=null)};a.attachEvent("on"+b,d);b={target:a,eventName:b,handler:c,handler2:d};var d=(a.document||a).parentWindow,
e="l"+this._listenerCounter++;d._allListeners||(d._allListeners={});d._allListeners[e]=b;a._listeners||(a._listeners=[]);a._listeners[a._listeners.length]=e;d._unloadListenerAdded||(d._unloadListenerAdded=!0,d.attachEvent("onunload",this._removeAllListeners))}},this.removeEventListener=function(a,b,c){if(a&&(c=this._findListener(a,b,c),-1!=c)){var d=(a.document||a).parentWindow,e=a._listeners[c];a.detachEvent("on"+b,d._allListeners[e].handler2);a._listeners=Z.Utils.arraySplice(a._listeners,c,1);delete d._allListeners[e]}},
this.event=function(a){return window.event},this.target=function(a){return a.srcElement},this.relatedTarget=function(a){var b=null;"mouseover"==a.type?b=a.fromElement:"mouseout"==a.type&&(b=a.toElement);return b},this.isRightMouseButton=function(a){var b=!1;2==a.button&&(b=!0);return b},this.preventDefault=function(a){a&&(a.returnValue=!1)},this.stopPropagation=function(a){a.cancelBubble=!0},this._findListener=function(a,b,c){var d=a._listeners;if(!d)return-1;a=(a.document||a).parentWindow;for(var e=
d.length-1;0<=e;e--){var f=a._allListeners[d[e]];if(f&&f.eventName==b&&f.handler==c)return e}return-1},this._removeAllListeners=function(){for(id in this._allListeners){var a=this._allListeners[id];a.target.detachEvent("on"+a.eventName,a.handler2);delete this._allListeners[id]}},this._listenerCounter=0)},declareGlobals:function(){Z.pageContainerID=null;Z.imagePath=null;Z.skinPath=null;Z.skinMode=null;Z.parameters=null;Z.cacheProofCounter=0;Z.timerCounter=0;Z.browsers=null;Z.browser=null;Z.browserVersion=
null;Z.scaleThreshold=null;Z.canvasSupported=null;Z.cssTransformsSupported=null;Z.cssTransformProperty=null;Z.cssTransformNoUnits=null;Z.alphaSupported=null;Z.renderQuality=null;Z.rotationSupported=null;Z.fullScreenSupported=null;Z.arrayMapSupported=null;Z.arraySpliceSupported=null;Z.float32ArraySupported=null;Z.uInt8ArraySupported=null;Z.xmlHttpRequestSupport=null;Z.definePropertySupported=null;Z.responseArraySupported=null;Z.responseArrayPrototyped=!1;Z.touchSupport=null;Z.mobileDevice=null;Z.localUse=
null;Z.zifSupported=null;Z.onReady=null;Z.onAnnotationReady=null;Z.initialX=null;Z.initialY=null;Z.initialZ=null;Z.initialZoom=null;Z.minZ=null;Z.minZoom=null;Z.maxZ=null;Z.maxZoom=null;Z.zoomSpeed=null;Z.panSpeed=null;Z.smoothPan=null;Z.smoothPanEasing=null;Z.smoothPanGlide=null;Z.autoResize=null;Z.fadeInSpeed=null;Z.toolbarVisible=null;Z.toolbarAutoShowHide=null;Z.toolbarW=null;Z.toolbarH=null;Z.toolbarPosition=null;Z.navigatorVisible=null;Z.navigatorW=null;Z.navigatorWidth=null;Z.navigatorH=null;
Z.navigatorHeight=null;Z.navigatorL=null;Z.navigatorLeft=null;Z.navigatorT=null;Z.navigatorTop=null;Z.navigatorFit=null;Z.navigatorRectangleColor=null;Z.clickZoom=null;Z.doubleClickZoom=null;Z.doubleClickDelay=null;Z.clickPan=null;Z.clickZoomAndPanBlock=!1;Z.mousePan=null;Z.keys=null;Z.constrainPan=null;Z.panBuffer=null;Z.constrainPanStrict=null;Z.tooltipsVisible=null;Z.helpVisible=0;Z.watermarkPath=null;Z.copyrightPath=null;Z.hotspots=!1;Z.hotspotPath=null;Z.hotspotFolder=null;Z.hotspotListTitle=
null;Z.hotspotsDrawOnlyInView=!0;Z.captionBoxes=!1;Z.captionsColorsDefault=!0;Z.screensaver=!1;Z.screensaverSpeed=null;Z.tour=!1;Z.tourPath=null;Z.tourListTitle=null;Z.tourPlaying=null;Z.tourStop=!1;Z.slideshow=!1;Z.slidePath=null;Z.slideListTitle=null;Z.slideshowPlaying=null;Z.slideTransitionTimeout=null;Z.slideTransitionSpeed=null;Z.slideOpacity=0;Z.audioContent=!1;Z.audioMuted=!1;Z.annotations=!1;Z.annotationPath=null;Z.annotationPanelVisible=null;Z.annotationPanelVisibleState=!1;Z.annotationFolder=
null;Z.annotationXMLText=null;Z.annotationJSONObject=null;Z.annotationsAddMultiple=null;Z.annotationsAutoSave=null;Z.saveButtonVisible=null;Z.labelClickSelect=null;Z.simplePath=!1;Z.noPost=!1;Z.noPostDefaults=!1;Z.unsavedEditsTest=!0;Z.maskVisible=null;Z.maskingSelection=!1;Z.maskFadeTimeout=null;Z.maskFadeSpeed=null;Z.maskOpacity=0;Z.maskClearOnUserAction=null;Z.externalEditPermissionFunction=null;Z.annotationSort="none";Z.saveHandlerPath=null;Z.saveImageHandlerPath=null;Z.saveImageFull=null;Z.postingXML=
!1;Z.postingImage=!1;Z.minimizeVisible=null;Z.sliderZoomVisible=null;Z.sliderVisible=null;Z.panButtonsVisible=null;Z.resetVisible=null;Z.fullViewVisible=null;Z.fullScreenVisible=null;Z.fullPageVisible=null;Z.initialFullPage=null;Z.fullPageInitial=null;Z.measureVisible=!1;Z.captionTextColor=null;Z.captionBackColor=null;Z.polygonLineColor=null;Z.polygonFillColor=null;Z.captionTextVisible=!0;Z.captionBackVisible=!0;Z.polygonFillVisible=!0;Z.polygonLineVisible=!0;Z.rotationVisible=null;Z.initialR=null;
Z.initialRotation=null;Z.virtualPointerVisible=null;Z.crosshairsVisible=null;Z.rulerVisible=null;Z.units=null;Z.unitsPerImage=null;Z.pixelsPerUnit=null;Z.sourceMagnification=null;Z.magnification=null;Z.rulerListType=null;Z.rulerW=null;Z.rulerWidth=null;Z.rulerH=null;Z.rulerHeight=null;Z.rulerL=null;Z.rulerLeft=null;Z.rulerT=null;Z.rulerTop=null;Z.coordinatesVisible=null;Z.saveImageFull=null;Z.saveImageFilename=null;Z.saveImageFormat=null;Z.saveImageCompression=null;Z.saveImageBackColor=null;Z.imageFiltersVisible=
null;Z.initialImageFilters=null;Z.progressVisible=null;Z.messagesVisible=null;Z.logoVisible=null;Z.logoLink=null;Z.logoLinkURL=null;Z.logoCustomPath=null;Z.canvas=null;Z.debug=null;Z.imageProperties=null;Z.serverIP=null;Z.serverPort=null;Z.tileHandlerPath=null;Z.tileHandlerPathFull=null;Z.tileW=null;Z.tileH=null;Z.tileType="jpg";Z.tilesPNG=null;Z.freehandVisible=null;Z.textVisible=null;Z.iconVisible=null;Z.rectangleVisible=null;Z.polygonVisible=null;Z.annotationPathProvided=!1;Z.saveHandlerProvided=
!1;Z.imageSetPathProvided=!1;Z.saveImageHandlerProvided=!1;Z.tileSource=null;Z.tileSourceMultiple=null;Z.focal=null;Z.quality=null;Z.markupMode=null;Z.editMode=null;Z.editing=null;Z.labelMode="view";Z.editModePrior=Z.editMode;Z.sliderFocus="zoom";Z.animation=!1;Z.animationPath=null;Z.animationCount=0;Z.animationAxis=null;Z.animator=null;Z.slidestack=!1;Z.slidestackPath=null;Z.imageSet=!1;Z.imageSetPath=null;Z.imageSetLength=null;Z.imageSetListPosition=null;Z.imageSetListTitle=null;Z.imageSetStart=
null;Z.imageSetLoop=null;Z.sliderImageSetVisible=null;Z.mouseWheelParmeterProvided=null;Z.mouseWheel=null;Z.imageSetHotspotPath=null;Z.hotspotFileShared=!1;Z.imageSetAnnotationPath=null;Z.annotationFileShared=!1;Z.Viewer=null;Z.ViewerDisplay=null;Z.Viewport=null;Z.Toolbar=null;Z.ToolbarDisplay=null;Z.ToolbarMinimized=!1;Z.TooltipDisplay=null;Z.Navigator=null;Z.NavigatorDisplay=null;Z.MessageDisplay=null;Z.messages=null;Z.messageDisplayList=[];Z.overlayMessage=null;Z.CoordinatesDisplay=null;Z.coordinates=
null;Z.coordinatesSave=null;Z.CopyrightDisplay=null;Z.AnnotationPanelDisplay=null;Z.imageW=null;Z.imageH=null;Z.imageCenterX=null;Z.imageCenterY=null;Z.imageX=0;Z.imageY=0;Z.imageZ=0;Z.imageR=0;Z.priorX=0;Z.priorY=0;Z.priorZ=0;Z.priorR=0;Z.preventDupCall=!1;Z.fitZ=null;Z.fillZ=null;Z.zooming="stop";Z.panningX="stop";Z.panningY="stop";Z.fullView=!1;Z.fullViewPrior=!1;Z.interactivityOff=!1;Z.useCanvas=!0;Z.specialStorageEnabled=null;Z.callbacks=[];Z.updateViewPercent=0;Z.TraceDisplay=null;Z.traces=
null;Z.mouseIsDown=!1;Z.buttonIsDown=!1;Z.keyIsDown=!1;Z.mouseWheelIsDown=!1;Z.mouseWheelCompleteDuration=null;Z.mouseWheelCompleteTimer=null;Z.mouseOutDownPoint=null;Z.viewportCurrentID=0;Z.viewportCurrent=null;Z.viewportChangeTimeout=null},detectBrowserFeatures:function(){Z.browsers={UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5};var a=Z.browsers.UNKNOWN,b=0,c=1E4,d=navigator.appName,e=navigator.appVersion,f=!1,h=!1,m=navigator.userAgent.toLowerCase();if("Microsoft Internet Explorer"==d&&window.attachEvent&&
window.ActiveXObject)b=m.indexOf("msie"),a=Z.browsers.IE,b=parseFloat(m.substring(b+5,m.indexOf(";",b))),f="undefined"!==typeof document.documentMode;else if("Netscape"==d&&-1!=m.indexOf("trident"))a=Z.browsers.IE,b=11;else if("Netscape"==d&&window.addEventListener){var D=m.indexOf("firefox"),d=m.indexOf("safari"),e=m.indexOf("chrome");0<=D?(a=Z.browsers.FIREFOX,b=parseFloat(m.substring(D+8)),c=1E4):0<=d&&(c=m.substring(0,d).lastIndexOf("/"),a=0<=e?Z.browsers.CHROME:Z.browsers.SAFARI,b=parseFloat(m.substring(c+
1,d)),c=1E4);d=new Image;d.style.getPropertyValue&&(h=d.style.getPropertyValue("image-rendering"))}else"Opera"==d&&window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera)&&(a=Z.browsers.OPERA,b=parseFloat(e));var E;if(window.XMLHttpRequest)netReq=new XMLHttpRequest,E="XMLHttpRequest";else if(window.ActiveXObject)for(d=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],e=0,D=d.length;e<D;e++)try{netReq=new ActiveXObject(d[e]);E=d[e];break}catch(y){}var d="response"in
XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||"responseArrayBuffer"in XMLHttpRequest.prototype,e=document.createElement("canvas"),e=!(!e.getContext||!e.getContext("2d")),D=!(a==Z.browsers.SAFARI&&4>b||a==Z.browsers.CHROME&&2>b),e=e&&D,D=!(a==Z.browsers.CHROME&&2>b),h=f||h?"high":null,A=(document.documentElement||{}).style||{},f=!1,H=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],U,q;for(;U=H.shift();)if("undefined"!==
typeof A[U]){f=!0;q=/webkit/i.test(U);break}A=f;H=!1;if("undefined"!==typeof document.cancelFullScreen||"undefined"!==typeof document.webkitCancelFullScreen||"undefined"!==typeof document.mozCancelFullScreen||"undefined"!==typeof document.oCancelFullScreen||"undefined"!==typeof document.msCancelFullScreen||"undefined"!==typeof document.msExitFullscreen)H=!0;var T=Array.prototype.map,K=Array.prototype.splice,u=!1;try{new Float32Array(1),u=!0}catch(J){}var B=!1;try{new Uint8Array(1),B=!0}catch(G){}var ra=
!1;if("function"==typeof Object.defineProperty)try{Object.defineProperty({},"x",{}),ra=!0}catch(sa){}var ta="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,m=-1<m.indexOf("android")||-1<m.indexOf("iphone")||-1<m.indexOf("ipad")||-1<m.indexOf("ipod"),ia;switch(window.location.protocol){case "http:":ia=!1;break;case "https:":ia=!1;break;case "file:":ia=!0;break;default:ia=null}var p=!(Z.browser==Z.browsers.IE&&
9>Z.browserVersion||Z.browser==Z.browsers.OPERA&&15>Z.browserVersion||Z.browser==Z.browsers.CHROME&&25>Z.browserVersion&&Z.browser==Z.browsers.FIREFOX&&20>Z.browserVersion&&Z.browser==Z.browsers.SAFARI&&5>Z.browserVersion);Z.browser=a;Z.browserVersion=b;Z.scaleThreshold=c;Z.xmlHttpRequestSupport=E;Z.responseArraySupported=d;Z.canvasSupported=e;Z.useCanvas=Z.canvasSupported;Z.imageFiltersVisible=!Z.useCanvas&&Z.imageFiltersVisible?!1:Z.imageFiltersVisible;Z.cssTransformsSupported=f;Z.cssTransformProperty=
U;Z.cssTransformNoUnits=q;Z.alphaSupported=D;Z.renderQuality=h;Z.rotationSupported=A;Z.fullScreenSupported=H;Z.arrayMapSupported=T;Z.arraySpliceSupported=K;Z.float32ArraySupported=u;Z.uInt8ArraySupported=B;Z.definePropertySupported=ra;Z.touchSupport=ta;Z.mobileDevice=m;Z.localUse=ia;Z.zifSupported=p},enforceCopyright:function(){this.readCookie("imageCopyright")?Z.Viewer.configureViewer():this.loadCopyrightText()},readCookie:function(a){a+="=";for(var b=document.cookie.split(";"),c=0,d=b.length;c<
d;c++){for(var e=b[c];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(a))return e.substring(a.length,e.length)}return null},loadCopyrightText:function(){(new Z.NetConnector).loadXML(Z.copyrightPath)},showCopyright:function(a,b){var c=this.getResource("z102"),d=this.getResource("z101");Z.CopyrightDisplay=this.createContainerElement("div","CopyrightDisplay","inline-block","absolute","hidden",Z.viewerW-2+"px",Z.viewerH-2+"px","0px","0px","solid","1px",c,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.CopyrightDisplay);
c=parseInt(Z.Utils.getResource("z230"),10);Z.CopyrightDisplay.style.zIndex=(c+11).toString();var e=parseFloat(Z.CopyrightDisplay.style.width)/2-220,c=parseFloat(Z.CopyrightDisplay.style.height)/2-100,f=this.createContainerElement("div","textBox","inline-block","absolute","hidden","440px","200px",e+"px",c+"px","none","0px","transparent none","0px","0px","normal",null,!0);f.id="textBox";Z.CopyrightDisplay.appendChild(f);var h=document.createTextNode(a);f.appendChild(this.createCenteredElement(h,"copyrightTextNode"));
this.setTextNodeStyle(h,"black","verdana","16px","none","normal","normal","normal","normal","1em","justify","none");var h=this.createContainerElement("div","declinedTextContainer","hidden","absolute","hidden","0px","0px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0),m=document.createTextNode(b);h.appendChild(m);f.appendChild(h);e=e+220-95;c=c+200+20;f=this.getResource("z418");f=new Z.Utils.Button("buttonAgree",f,null,null,null,null,"80px","20px",e+"px",c+"px","mousedown",
this.copyrightAgreeButtonHandler,"z332","solid","1px",d,"0px","0px");Z.CopyrightDisplay.appendChild(f.elmt);e+=110;f=this.getResource("z419");d=new Z.Utils.Button("buttonExit",f,null,null,null,null,"80px","20px",e+"px",c+"px","mousedown",this.copyrightExitButtonHandler,"z333","solid","1px",d,"0px","0px");Z.CopyrightDisplay.appendChild(d.elmt)},hideCopyright:function(){var a=document.getElementById("copyrightTextNode").firstChild,b=document.getElementById("declinedTextContainer").firstChild.nodeValue;
a.nodeValue=b;a=document.getElementById("buttonAgree");Z.Utils.removeEventListener(a,"mousedown",this.copyrightAgreeButtonHandler);Z.CopyrightDisplay.removeChild(a);a=document.getElementById("buttonExit");Z.Utils.removeEventListener(a,"mousedown",this.copyrightExitButtonHandler);Z.CopyrightDisplay.removeChild(a)},copyrightAgreeButtonHandler:function(a){Z.ViewerDisplay.removeChild(Z.CopyrightDisplay);document.cookie="imageCopyright=confirmed";Z.Viewer.configureViewer()},copyrightExitButtonHandler:function(a){Z.Utils.hideCopyright()},
parseParameters:function(a){var b=[];if("object"===typeof a)b=a;else if("string"===typeof a){a=a.split("&");for(var c=0,d=a.length;c<d;c++){var e=a[c],f=e.indexOf("=");if(0<f){var h=e.substring(0,f),e=e.substring(f+1);b[h]=e}}}return b},parametersToDelimitedString:function(a,b){var c="",d;for(d in a)c+=d+"="+a[d].toString()+b;return c=c.slice(0,-1)},setParameters:function(a){var b=this.getResource("z287"),c=this.getResource("z110"),d=this.getResource("z109"),e=this.getResource("z108"),c=c!=d?!0:!1;
c||(Z.logoLinkURL=Z.Utils.getResource("z427"));var f=this.getResource("z187"),h=this.getResource("z186"),d=this.getResource("z185"),f=f!=h?!0:!1,m=this.getResource("z215"),h=this.getResource("z214"),D=this.getResource("z213");Z.specialStorageEnabled=m!=h?!0:!1;var E=this.getResource("z107"),y=this.getResource("z106"),m=this.getResource("z105"),E=E!=y?!0:!1;Z.skinPath=this.getResource("z201");Z.skinMode=this.getResource("z199");isNaN(parseFloat(this.getResource("z143")))||(Z.initialX=parseFloat(this.getResource("z143")));
isNaN(parseFloat(this.getResource("z144")))||(Z.initialY=parseFloat(this.getResource("z144")));isNaN(parseFloat(this.getResource("z145")))||(Z.initialZ=parseFloat(this.getResource("z145")));isNaN(parseFloat(this.getResource("z163")))||(Z.minZ=parseFloat(this.getResource("z163")));isNaN(parseFloat(this.getResource("z153")))||(Z.maxZ=parseFloat(this.getResource("z153")));isNaN(parseFloat(this.getResource("z241")))||(Z.zoomSpeed=parseFloat(this.getResource("z241")));isNaN(parseFloat(this.getResource("z175")))||
(Z.panSpeed=parseFloat(this.getResource("z175")));isNaN(parseFloat(this.getResource("z111")))||(Z.fadeInSpeed=parseFloat(this.getResource("z111")));Z.navigatorVisible=parseInt(this.getResource("z171"),10);Z.navigatorW=parseInt(this.getResource("z172"),10);Z.navigatorH=parseInt(this.getResource("z167"),10);Z.navigatorL=parseInt(this.getResource("z168"),10);Z.navigatorT=parseInt(this.getResource("z170"),10);Z.navigatorFit=this.getResource("z166");Z.navigatorRectangleColor=this.getResource("z169");Z.clickZoom=
"0"!=this.getResource("z93");Z.doubleClickZoom="0"!=this.getResource("DEFAULT_DOUBLECLICKZOOM");Z.doubleClickDelay=parseFloat(this.getResource("DEFAULT_DOUBLECLICKDELAY"));Z.clickPan="0"!=this.getResource("z92");Z.mousePan="0"!=this.getResource("z164");Z.constrainPan="0"!=this.getResource("z95");Z.panBuffer=parseFloat(this.getResource("z173"));Z.constrainPanStrict="0"!=this.getResource("z95STRICT");Z.smoothPan=Z.useCanvas&&"0"!=this.getResource("DEFAULT_SMOOTHPAN");Z.smoothPanEasing=parseInt(this.getResource("DEFAULT_SMOOTHPANEASING"),
10);Z.smoothPanGlide=parseInt(this.getResource("DEFAULT_SMOOTHPANGLIDE"),10);Z.keys="0"!=this.getResource("z146");Z.canvas="0"!=this.getResource("z88");Z.debug=parseInt(this.getResource("z104"),10);Z.toolbarVisible=parseInt(this.getResource("z223"),10);Z.toolbarAutoShowHide=0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&6!=Z.toolbarVisible&&7!=Z.toolbarVisible&&8!=Z.toolbarVisible;Z.toolbarPosition=parseFloat(this.getResource("z222"));Z.logoVisible="0"!=this.getResource("z150");Z.logoCustomPath=this.getResource("z149");
Z.minimizeVisible="0"!=this.getResource("z162");Z.sliderZoomVisible="0"!=this.getResource("DEFAULT_SLIDERZOOMVISIBLE");Z.mouseWheel=parseInt(this.getResource("DEFAULT_MOUSEWHEEL"),10);Z.panButtonsVisible="0"!=this.getResource("z174");Z.resetVisible="0"!=this.getResource("DEFAULT_RESETVISIBLE");Z.tooltipsVisible="0"!=this.getResource("z224");Z.helpVisible=parseInt(this.getResource("z128"),10);Z.progressVisible="0"!=this.getResource("z184");Z.messagesVisible="0"!=this.getResource("DEFAULT_MESSAGESVISIBLE");
Z.fullViewVisible="0"!=this.getResource("z121");Z.fullScreenVisible="0"!=this.getResource("z119");Z.fullPageVisible="0"!=this.getResource("z118");Z.initialFullPage="0"!=this.getResource("z141");Z.measureVisible="0"!=this.getResource("z157");Z.rotationVisible="0"!=this.getResource("z190");Z.initialR=this.getResource("DEFAULT_INITIALR");isNaN(parseFloat(this.getResource("DEFAULT_SCREENSAVERSPEED")))||(Z.screensaverSpeed=parseFloat(this.getResource("DEFAULT_SCREENSAVERSPEED")));isNaN(parseFloat(this.getResource("DEFAULT_MASKFADESPEED")))||
(Z.maskFadeSpeed=parseFloat(this.getResource("DEFAULT_MASKFADESPEED")));Z.maskClearOnUserAction="0"!=this.getResource("DEFAULT_MASKCLEARONUSERACTION");Z.units=this.getResource("z231");Z.sourceMagnification=parseInt(this.getResource("z212"),10);Z.virtualPointerVisible="0"!=this.getResource("z233");Z.crosshairsVisible="0"!=this.getResource("z103");Z.rulerVisible=parseInt(this.getResource("z196"),10);Z.rulerListType=this.getResource("z193");Z.rulerW=parseInt(this.getResource("z197"),10);Z.rulerH=parseInt(this.getResource("z191"),
10);Z.rulerL=parseInt(this.getResource("z192"),10);Z.rulerT=parseInt(this.getResource("z195"),10);isNaN(parseFloat(this.getResource("z210")))||(Z.slideTransitionSpeed=parseFloat(this.getResource("z210")));Z.coordinatesVisible="0"!=this.getResource("z100");Z.labelClickSelect="0"!=this.getResource("DEFAULT_LABELCLICKSELECT");Z.sliderImageSetVisible="0"!=this.getResource("DEFAULT_IMAGESETSLIDERVISIBLE");if("object"===typeof a&&null!==a){Z.annotationPathProvided=void 0!==a.zHotspotPath||void 0!==a.zAnnotationPath||
void 0!==a.zAnnotationXMLText||void 0!==a.zAnnotationJSONObject;Z.saveHandlerProvided=void 0!==a.zSaveHandlerPath||void 0!==a.zNoPost&&"1"==a.zNoPost;Z.imageSetPathProvided=void 0!==a.zAnimationPath||void 0!==a.zSlidestackPath;Z.saveImageHandlerProvided=void 0!==a.zSaveImageHandlerPath;Z.mouseWheelParmeterProvided=void 0!==a.zMouseWheel;for(var A in a)if("function"!==typeof a[A]||"zOnAnnotationReady"===A||"zOnReady"===A)if("undefined"===typeof Z[Z.Utils.stringLowerCaseFirstLetter(A.substr(1))])alert(b+
" "+A);else if(pValue=a[A],c||"zNavigatorVisible"==A)switch(A){case "zOnAnnotationReady":"function"===typeof pValue&&Z.setCallback("annotationPanelInitialized",pValue);break;case "zOnReady":"function"===typeof pValue&&Z.setCallback("readyViewer",pValue);break;case "zInitialX":isNaN(parseFloat(pValue))||(Z.initialX=parseFloat(pValue));break;case "zInitialY":isNaN(parseFloat(pValue))||(Z.initialY=parseFloat(pValue));break;case "zInitialZoom":"fit"==pValue&&(pValue="-1");"fill"==pValue&&(pValue="0");
isNaN(parseFloat(pValue))||(Z.initialZ=parseFloat(pValue),Z.initialZ&&0<Z.initialZ&&100>=Z.initialZ&&(Z.initialZ/=100));break;case "zMinZoom":"fit"==pValue&&(pValue="-1");"fill"==pValue&&(pValue="0");isNaN(parseFloat(pValue))||(Z.minZ=parseFloat(pValue),Z.minZ&&0<Z.minZ&&100>=Z.minZ&&(Z.minZ/=100));break;case "zMaxZoom":isNaN(parseFloat(pValue))||(Z.maxZ=parseFloat(pValue),Z.maxZ&&-1!=Z.maxZ&&(Z.maxZ/=100));break;case "zNavigatorVisible":Z.navigatorVisible=parseInt(pValue,10);break;case "zToolbarVisible":Z.toolbarVisible=
parseInt(pValue,10);Z.toolbarAutoShowHide=0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&6!=Z.toolbarVisible&&7!=Z.toolbarVisible&&8!=Z.toolbarVisible;break;case "zLogoVisible":"0"==pValue&&(Z.logoVisible=!1);break;case "zMinimizeVisible":"0"==pValue&&(Z.minimizeVisible=!1);break;case "zSliderVisible":"0"==pValue&&(Z.sliderZoomVisible=!1);break;case "zPanButtonsVisible":"0"==pValue&&(Z.panButtonsVisible=!1);break;case "zResetVisible":"0"==pValue&&(Z.resetVisible=!1);break;case "zFullViewVisible":"1"==
pValue?(Z.fullScreenVisible=!0,Z.fullPageVisible=!1):"0"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!1);break;case "zFullScreenVisible":"0"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!1);break;case "zFullPageVisible":"1"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!0);break;case "zInitialFullPage":"1"==pValue&&(Z.initialFullPage=!0);break;case "zFullPageInitial":alert(Z.Utils.getResource("z275")+" zFullPageInitial is now zInitialFullPage");break;case "zProgressVisible":"0"==
pValue&&(Z.progressVisible=!1);break;case "zTooltipsVisible":"0"==pValue&&(Z.tooltipsVisible=!1);break;case "zHelpVisible":Z.helpVisible=parseInt(pValue,10);break;case "zNavigatorRectangleColor":Z.navigatorRectangleColor=pValue;break;case "zSkinPath":Z.skinPath=pValue;break;default:if(f)switch(A){case "zZoomSpeed":Z.zoomSpeed=parseInt(pValue,10);break;case "zPanSpeed":Z.panSpeed=parseInt(pValue,10);break;case "zFadeInSpeed":Z.fadeInSpeed=parseInt(pValue,10);break;case "zClickZoom":"0"==pValue&&(Z.clickZoom=
!1);break;case "zDoubleClickZoom":"0"==pValue&&(Z.doubleClickZoom=!1);break;case "zDoubleClickDelay":Z.doubleClickDelay=parseInt(pValue,10);break;case "zClickPan":"0"==pValue&&(Z.clickPan=!1);break;case "zMousePan":"0"==pValue&&(Z.mousePan=!1);break;case "zKeys":"0"==pValue&&(Z.keys=!1);break;case "zMessagesVisible":Z.messagesVisible=parseInt(pValue,10);break;case "zConstrainPan":Z.constrainPan="0"==pValue?!1:!0;Z.constrainPanStrict="2"==pValue?!0:!1;break;case "zPanBuffer":y=parseFloat(pValue);isNaN(y)||
(Z.panBuffer=y);break;case "zSmoothPan":"0"==pValue&&(Z.smoothPan=!1);break;case "zSmoothPanEasing":y=parseInt(pValue,10);1<=y&&5>=y&&(Z.smoothPanEasing=y);break;case "zSmoothPanGlide":y=parseInt(pValue,10);1<=y&&5>=y&&(Z.smoothPanGlide=y);break;case "zAutoResize":"0"==pValue&&(Z.autoResize=!1);break;case "zCanvas":"0"==pValue&&(Z.canvas=!1);Z.canvasSupported&&Z.canvas||(Z.useCanvas=!1);break;case "zDebug":Z.debug=parseInt(pValue,10);break;case "zImageProperties":Z.imageProperties=pValue;break;case "zNavigatorWidth":isNaN(parseInt(pValue,
10))||(Z.navigatorW=parseInt(pValue,10));break;case "zNavigatorHeight":isNaN(parseInt(pValue,10))||(Z.navigatorH=parseInt(pValue,10));break;case "zNavigatorLeft":isNaN(parseInt(pValue,10))||(Z.navigatorL=parseInt(pValue,10));break;case "zNavigatorTop":isNaN(parseInt(pValue,10))||(Z.navigatorT=parseInt(pValue,10));break;case "zNavigatorFit":isNaN(parseFloat(pValue))||(Z.navigatorFit=parseInt(pValue,10));break;case "zToolbarPosition":Z.toolbarPosition=parseInt(pValue,10);break;case "zLogoCustomPath":Z.logoCustomPath=
pValue;break;case "zRotationVisible":"1"==pValue&&(Z.rotationVisible=!0);break;case "zInitialRotation":isNaN(parseFloat(pValue))||(Z.initialR=parseInt(pValue,10));break;case "zVirtualPointerVisible":"1"==pValue&&(Z.virtualPointerVisible=!0);break;case "zCrosshairsVisible":"1"==pValue&&(Z.crosshairsVisible=!0);break;case "zMeasureVisible":Z.measureVisible="1"==pValue?!0:!1;break;case "zCaptionTextColor":Z.captionTextColor=Z.Utils.stringValidateColorValue(pValue);Z.captionsColorsDefault=!1;break;case "zCaptionBackColor":Z.captionBackColor=
Z.Utils.stringValidateColorValue(pValue);Z.captionsColorsDefault=!1;break;case "zPolygonLineColor":Z.polygonLineColor=Z.Utils.stringValidateColorValue(pValue);break;case "zPolygonFillColor":Z.polygonFillColor=Z.Utils.stringValidateColorValue(pValue);break;case "zCaptionTextVisible":"0"==pValue&&(Z.captionTextVisible=!1);break;case "zCaptionBackVisible":"0"==pValue&&(Z.captionBackVisible=!1);break;case "zPolygonLineVisible":"0"==pValue&&(Z.polygonLineVisible=!1);break;case "zPolygonFillVisible":"0"==
pValue&&(Z.polygonFillVisible=!1);break;case "zRulerVisible":Z.rulerVisible=parseInt(pValue,10);break;case "zRulerListType":this.stringValidate(pValue)&&(Z.rulerListType=pValue);break;case "zRulerWidth":isNaN(parseInt(pValue,10))||(Z.rulerW=parseInt(pValue,10));break;case "zRulerHeight":isNaN(parseInt(pValue,10))||(Z.rulerH=parseInt(pValue,10));break;case "zRulerLeft":isNaN(parseInt(pValue,10))||(Z.rulerL=parseInt(pValue,10));break;case "zRulerTop":isNaN(parseInt(pValue,10))||(Z.rulerT=parseInt(pValue,
10));break;case "zUnits":this.stringValidate(pValue)&&(Z.units=pValue);break;case "zUnitsPerImage":isNaN(parseFloat(pValue))||(Z.unitsPerImage=parseFloat(pValue));break;case "zPixelsPerUnit":isNaN(parseFloat(pValue))||(Z.pixelsPerUnit=parseFloat(pValue));break;case "zSourceMagnification":isNaN(parseInt(pValue,10))||(Z.sourceMagnification=parseInt(pValue,10));break;case "zMagnification":alert(Z.Utils.getResource("z275")+" zMagnification is now zSourceMagnification");break;case "zWatermarkPath":Z.watermarkPath=
pValue;break;case "zCopyrightPath":Z.copyrightPath=pValue;break;case "zCoordinatesVisible":"1"==pValue&&(Z.coordinatesVisible=!0);break;case "zHotspotPath":Z.hotspotPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.hotspotFolder=Z.hotspotPath;".xml"==Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-4,Z.hotspotPath.length)&&(Z.hotspotFolder=Z.hotspotFolder.substring(0,Z.hotspotFolder.lastIndexOf("/")));Z.hotspots=!0;break;case "zHotspotListTitle":Z.hotspotListTitle=pValue;break;
case "zHotspotsDrawOnlyInView":"0"==pValue&&(Z.hotspotsDrawOnlyInView=!1);break;case "zCaptionBoxes":"1"==pValue&&(Z.captionBoxes=!0);break;case "zScreensaver":"1"==pValue&&(Z.screensaver=!0,Z.tour=!0);break;case "zScreensaverSpeed":Z.screensaverSpeed=parseInt(pValue,10);break;case "zTourPath":Z.tourPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.hotspotPath=Z.tourPath;Z.hotspotFolder=Z.hotspotPath;".xml"==Z.hotspotPath.toLowerCase().substring(Z.hotspotPath.length-4,Z.hotspotPath.length)&&
(Z.hotspotFolder=Z.hotspotFolder.substring(0,Z.hotspotFolder.lastIndexOf("/")));Z.tour=!0;break;case "zTourListTitle":Z.tourListTitle=pValue;break;case "zSlidePath":Z.slidePath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.slideshow=!0;break;case "zSlideListTitle":Z.slideListTitle=pValue;break;case "zAnimationPath":Z.imageSetPath=Z.Utils.stringRemoveTrailingSlashCharacters(pValue);Z.imageSet=!0;Z.animation=!0;Z.mouseWheelParmeterProvided||(Z.mouseWheel=parseInt(this.getResource("DEFAULT_MOUSEWHEELANIMATION"),
10),Z.sliderFocus=2==Z.mouseWheel?"imageSet":"zoom");break;case "zImageSetSliderVisible":"0"==pValue&&(Z.sliderImageSetVisible=!1);break;case "zMouseWheel":Z.mouseWheel=parseInt(pValue,10);Z.sliderFocus=2==Z.mouseWheel?"imageSet":"zoom";break;case "zTilesPNG":"1"==pValue&&(Z.tileType="png");break;case "zTileW":Z.tileW=parseInt(pValue,10);break;case "zTileH":Z.tileH=parseInt(pValue,10);break;default:if(E)switch(A){case "zLabelClickSelect":"1"==pValue&&(Z.labelClickSelect=!0);break;case "zMaskVisible":"1"==
pValue&&(Z.maskVisible=!0);break;case "zMaskFadeSpeed":Z.maskFadeSpeed=parseInt(pValue,10);break;case "zMaskClearOnUserAction":"0"==pValue&&(Z.maskClearOnUserAction=!1);break;default:if(Z.specialStorageEnabled==h)alert(D+" "+A);else switch(A){case "zServerIP":Z.serverIP=pValue;break;case "zServerPort":Z.serverPort=pValue;break;case "zTileHandlerPath":Z.tileHandlerPath=pValue;break;case "zImageW":Z.imageW=parseInt(pValue,10);Z.imageCenterX=Z.imageW/2;break;case "zImageH":Z.imageH=parseInt(pValue,10);
Z.imageCenterY=Z.imageH/2;break;case "zFocal":Z.focal=parseInt(pValue,10);break;case "zQuality":Z.quality=parseInt(pValue,10)}}else alert(m+" "+A)}else alert(d+" "+A)}else alert(e+" "+A)}if(Z.Utils.stringValidate(Z.annotationPath)||Z.Utils.stringValidate(Z.saveHandlerPath)||Z.Utils.stringValidate(Z.saveImageHandlerPath))E?Z.Utils.stringValidate(Z.saveHandlerPath)&&(a=Z.saveImageHandlerPath,Z.saveHandlerPath=Z.saveHandlerPath,Z.saveImageHandlerPath=a):(Z.annotationPath="",alert(m));Z.Utils.validateImagePath()},
resetParametersXYZ:function(a){isNaN(parseFloat(this.getResource("z143")))||(Z.initialX=parseFloat(this.getResource("z143")));isNaN(parseFloat(this.getResource("z144")))||(Z.initialY=parseFloat(this.getResource("z144")));isNaN(parseFloat(this.getResource("z145")))||(Z.initialZ=parseFloat(this.getResource("z145")));isNaN(parseFloat(this.getResource("z163")))||(Z.minZ=parseFloat(this.getResource("z163")));isNaN(parseFloat(this.getResource("z153")))||(Z.maxZ=parseFloat(this.getResource("z153")));if(this.stringValidate(a))for(var b=
0,c=a.length;b<c;b++){var d=a[b],e=d.indexOf("=");if(0<e){var f=d.substring(0,e),d=d.substring(e+1);if(this.stringValidate(d))switch(f){case "zInitialX":isNaN(parseFloat(d))||(Z.initialX=parseFloat(d));break;case "zInitialY":isNaN(parseFloat(d))||(Z.initialY=parseFloat(d));break;case "zInitialZoom":"fit"==d&&(d="-1");"fill"==d&&(d="0");isNaN(parseFloat(d))||(Z.initialZ=parseFloat(d),Z.initialZ&&0<Z.initialZ&&100>=Z.initialZ&&(Z.initialZ/=100));break;case "zMinZoom":"fit"==d&&(d="-1");"fill"==d&&(d=
"0");isNaN(parseFloat(d))||(Z.minZ=parseFloat(d),Z.minZ&&0<Z.minZ&&100>=Z.minZ&&(Z.minZ/=100));break;case "zMaxZoom":isNaN(parseFloat(d))||(Z.maxZ=parseFloat(d),Z.maxZ&&-1!=Z.maxZ&&(Z.maxZ/=100))}}}},validateImagePath:function(a){a="undefined"!==typeof a&&Z.Utils.stringValidate(a)?a:Z.imagePath;if(null!==a)this.getResource("z213"),-1!=a.toLowerCase().indexOf(".zif")?Z.zifSupported?(Z.tileSource="ZoomifyImageFile",Z.Utils.validateResponseArrayFunctionality()):alert(this.getResource("z16")):-1!=a.toLowerCase().indexOf(".jpg")||
-1!=a.toLowerCase().indexOf(".png")?Z.tileSource="unconverted":Z.Utils.stringValidate(Z.tileHandlerPath)||(Z.tileSource="ZoomifyImageFolder");else if(Z.imageSet||Z.slideshow)Z.tileSourceMultiple=!0},clearImageParameters:function(){Z.imagePath=null;Z.parameters=null;Z.initialX=null;Z.initialY=null;Z.initialZ=null;Z.minZ=null;Z.maxZ=null;Z.hotspots=!1;Z.hotspotPath=null;Z.hotspotFolder=null;Z.tour=!1;Z.tourPath=null;Z.tourPlaying=null;Z.tourStop=!1;Z.annotations=!1;Z.annotationPath=null;Z.annotationPanelVisible=
null;Z.annotationFolder=null;Z.annotationJSONObject=null;Z.annotationXMLText=null;Z.annotationsAddMultiple=null;Z.annotationsAutoSave=null;Z.postingXML=!1;Z.postingImage=!1;Z.initialR=null;Z.unitsPerImage=null;Z.pixelsPerUnit=null;Z.sourceMagnification=null;Z.imageProperties=null;Z.tileW=null;Z.tileH=null;Z.tileType="jpg";Z.annotationPathProvided=!1;Z.imageSetPathProvided=!1;Z.tileSource=null;Z.tileSourceMultiple=null;Z.focal=null;Z.quality=null;Z.markupMode=null;Z.editMode=null;Z.editing=null;Z.labelMode=
"view";Z.editModePrior=Z.editMode;Z.sliderFocus="zoom";Z.animation=!1;Z.animationPath=null;Z.animationCount=0;Z.animationAxis=null;Z.animator=null;Z.slidestack=!1;Z.slidestackPath=null;Z.imageSet=!1;Z.imageSetPath=null;Z.imageSetLength=null;Z.sliderImageSetVisible=null;Z.imageSetSliderVisible=null;Z.mouseWheelParmeterProvided=null;Z.mouseWheel=null;Z.imageSetHotspotPath=null;Z.hotspotFileShared=!1;Z.imageSetAnnotationPath=null;Z.annotationFileShared=!1;Z.imageW=null;Z.imageH=null;Z.imageCenterX=null;
Z.imageCenterY=null;Z.imageX=0;Z.imageY=0;Z.imageZ=0;Z.imageR=0;Z.priorX=0;Z.priorY=0;Z.priorZ=0;Z.priorR=0;Z.fitZ=null;Z.fillZ=null;Z.zooming="stop";Z.panningX="stop";Z.panningY="stop";Z.fullView=!1;Z.fullViewPrior=!1},getResource:function(a){var b="";switch(a){case "z110":b="Enable Express parameters";break;case "z109":b="Changing This Violates License Agreement";break;case "z108":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Express, Pro, and Enterprise editions: ";
break;case "z187":b="Enable Pro parameters";break;case "z186":b="Changing This Violates License Agreement";break;case "z185":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Pro and Enterprise editions: ";break;case "z215":b="Changing this violates License Agreement";break;case "z214":b="Changing this violates License Agreement";break;case "z213":b="Support for Zoomify Image File (PFF) storage and other special storage options is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition.";
break;case "z107":b="Changing this violates License Agreement";break;case "z106":b="Changing this violates License Agreement";break;case "z105":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition: ";break;case "z125":b="0";break;case "z124":b="8192";break;case "z90":b="1024";break;case "z221":b="256";break;case "z219":b="256";break;case "z140":b="300";break;case "z139":b="60000";break;case "DEFAULT_IMAGELOADQUEUEDELAY":b="100";
break;case "z218":b="1.15";break;case "z220":b="300";break;case "z81":b="6";break;case "z78":b="3";break;case "z80":b="5";break;case "z77":b="3";break;case "z79":b="3";break;case "z76":b="2";break;case "z75":b="0";break;case "z173":b=Z.mobileDevice?"1":"1.5";Z.rotationVisible&&(b="2");break;case "z173UNCONVERTED":b=Z.mobileDevice?Z.rotationVisible?"2":"1":"10";break;case "DEFAULT_z310SIZEMAXBROWSER":b="10000";break;case "DEFAULT_z310SIZEMAXFIREFOX":b="4000";break;case "DEFAULT_z310SIZEMAXIMAGESET":b=
"1000";break;case "z74":b=Z.mobileDevice?"1":"2";break;case "z88":b="1";break;case "z230":b="2000";break;case "DEFAULT_VALIDATEVIEWRETRYLIMIT":b="2";break;case "DEFAULT_VALIDATEVIEWRETRYDELAY":b="1000";break;case "z104":b="0";break;case "z175":b="5";break;case "z176":b="10";break;case "z241":b="5";break;case "z242":b="0.02";break;case "z238":b="30";break;case "z240":b="20";break;case "z239":b="800";break;case "z93TIERSKIPTHRESHOLD":b="0.2";break;case "z122":b="10";break;case "DEFAULT_AUTORESIZESKIPDURATION":b=
"10";break;case "DEFAULT_MOUSEWHEEL":b="1";break;case "DEFAULT_MOUSEWHEELANIMATION":b="1";break;case "DEFAULT_MOUSEWHEELSLIDESTACK":b="1";break;case "z165":b="300";break;case "z111":b="5";break;case "z112":b="0.067";break;case "z146":b="1";break;case "z164":b="1";break;case "z92":b="1";break;case "z93":b="1";break;case "DEFAULT_DOUBLECLICKZOOM":b="1";break;case "DEFAULT_DOUBLECLICKDELAY":b="250";break;case "z95":b="1";break;case "z95STRICT":b="0";break;case "DEFAULT_SMOOTHPAN":b="1";break;case "DEFAULT_SMOOTHPANEASING":b=
"2";break;case "DEFAULT_SMOOTHPANGLIDE":b="2";break;case "z143":b=null;break;case "z144":b=null;break;case "z145":b=null;break;case "z163":b=null;break;case "z153":b="1";break;case "z83":b="#FBFAFA";break;case "z83NOALPHA":b="#FBFAFA";break;case "z83LIGHT":b="#FEFEFE";break;case "z82":b="0.75";break;case "z86":b="0.75";break;case "z87":b="#C0C0C0";break;case "z200":b="skinFiles.xml";break;case "z201":b="Assets/Skins/Default";break;case "z199":b="0";break;case "z171":b="2";break;case "z172":b="150";
break;case "z167":b="100";break;case "z168":b="-1";break;case "z170":b="-1";break;case "z166":b=null;break;case "z169":b="#0000FF";break;case "z223":b="4";break;case "z222":b="1";break;case "z224":b="1";break;case "z128":b="1";break;case "z150":b="1";break;case "z149":b=null;break;case "z162":b="1";break;case "DEFAULT_SLIDERZOOMVISIBLE":b="1";break;case "z205ZOOM":b="10";break;case "z174":b="1";break;case "DEFAULT_RESETVISIBLE":b="1";break;case "z121":b="1";break;case "z119":b="1";break;case "z120":b=
"white";break;case "z118":b="0";break;case "z141":b="0";break;case "z232":b="Assets/VirtualPointer/virtualPointer.png";break;case "z157":b="undefined"===typeof Z.parameters||null===Z.parameters||"undefined"!==typeof Z.parameters.zMeasureVisible&&"0"==Z.parameters.zMeasureVisible||!("undefined"!==typeof Z.parameters.zMarkupMode&&"1"==Z.parameters.zMarkupMode||"undefined"!==typeof Z.parameters.zEditMode&&"1"==Z.parameters.zEditMode)?"0":"1";break;case "DEFAULT_FULLVIEWEXITEXTERNALBUTTONCOLOR":b="\t#F8F8F8";
break;case "z190":b="0";break;case "DEFAULT_INITIALR":b="0";break;case "z184":b="1";break;case "z182":b="500";break;case "z183":b=" ";break;case "z183COLOR":b="#000000";break;case "DEFAULT_MESSAGESVISIBLE":b="1";break;case "z212":b="40";break;case "z231":b="pixels";break;case "z233":b="0";break;case "z103":b="0";break;case "z196":b="0";break;case "z193":b="2";break;case "z194":b="10";break;case "z198":b="#696969";break;case "z197":b="150";break;case "z191":b="30";break;case "z192":b="-1";break;case "z195":b=
"-1";break;case "z100":b="0";break;case "z234":b="0.6";break;case "z235":b="0.33";break;case "z237":b="512";break;case "z236":b="384";break;case "DEFAULT_SCREENSAVERSPEED":b="5";break;case "DEFAULT_MASKFADESPEED":b="5";break;case "DEFAULT_MASKFADESTEP":b="0.05";break;case "DEFAULT_MASKCLEARONUSERACTION":b="1";break;case "z102":b="#D3D3D3";break;case "z101":b="#FFFFFF";break;case "z227":b="destinations.xml";break;case "z226":b=!0;break;case "z225":b=!0;break;case "z209":b="slides.xml";break;case "DEFAULT_SLIDESHOWAUTOSTART":b=
!0;break;case "DEFAULT_SLIDESHOWAUTOLOOP":b=!0;break;case "z203":b="NAME";break;case "z204":b="200";break;case "z202":b="2";break;case "z210":b="2";break;case "z211":b="0.05";break;case "z156":b="170";break;case "z155":b="12";break;case "DEFAULT_MEASURECAPTIONBACKOPACITY":b="0.3";break;case "z154":b="11";break;case "z135":b="hotspots.xml";break;case "z130":b="6";break;case "z130CANVAS":b="12";break;case "z161":b="2";break;case "z152":b="7";break;case "z129":b="14";break;case "z160":b="3";break;case "z151":b=
"14";break;case "z115":b="1.8";break;case "z134":b=!0;break;case "DEFAULT_HOTSPOTSMINSCALE":b="0.2";break;case "DEFAULT_HOTSPOTSMAXSCALE":b="2";break;case "z132":b="NAME";break;case "z133":b="200";break;case "z131":b="2";break;case "DEFAULT_LABELCLICKSELECT":b="0";break;case "z69":b="annotations.xml";break;case "z57":b="circle.png";break;case "z57TYPE":b="icon";break;case "z177":b=2;break;case "z179":b=.3;break;case "z180":b=300;break;case "z96":b="1";break;case "z98":b="#FFFFFF";break;case "z89":b=
"#FFFFFF";break;case "DEFAULT_CAPTIONBACKCOLOR":b="#000000";break;case "z177FREEHAND":b=2;break;case "z113":b="#FFFFFF";break;case "z216":b="#999999";break;case "z97":b="10";break;case "DEFAULT_IMAGESETLISTSOURCE":b="NAME";break;case "DEFAULT_IMAGESETLISTWIDTH":b="222";break;case "DEFAULT_IMAGESETLISTPOSITION":b="2";break;case "DEFAULT_IMAGESETSLIDERVISIBLE":b="1";break;case "z205IMAGESET":b="10";break;case "DEFAULT_ANIMATIONOPTIMALMOTIONIMAGES":b="30";break;case "DEFAULT_ANIMATIONOPTIMALPOSITIONDELTA":b=
"50";break;case "DEFAULT_ANIMATIONAXIS":b="horizontal";break;case "DEFAULT_ANIMATOR":b="motion";break;case "z127":b="lightgray";break;case "z126":b="white";break;case "z159":b="lightgray";break;case "z158":b="white";break;case "z99":b="lightgray";break;case "DEFAULT_TRACEDISPLAYTEXTFONTSIZE":b="11";break;case "DEFAULT_TRACEDISPLAYTEXTPADDINGSMALL":b="2";break;case "z229":b="#D3D3D3";break;case "z228":b="#FFFFFF";break;case "DEFAULT_IMAGESETXMLFILE":b=Z.animation?"animation.xml":"slidestack.xml";break;
case "z9":b="Displaying or editing polygon hotspots requires a browser that supports the HTML5 canvas feature.";break;case "z12":b="Rotation requires a newer browser version. Please consider upgrading to the current release of your browser.";break;case "z16":b="Viewing Zoomify Images stored in the ZIF format requires a newer browser version. Please consider upgrading to the current release of your browser.";break;case "z8":b="\nClick the '?' button for help.";break;case "ALERT_LOADINGANNOTATIONS":b=
"\nLoading annotations...";break;case "z6":b="5000";break;case "z6SHORT":b="3000";break;case "ALERT_HOWTOEDITMODEVIEW":b="Click image to zoom-in.\nAlt-click to zoom-out.\nClick-drag to pan.";break;case "ALERT_HOWTOEDITMODEMEASURE":b="Click in image to measure length.\nAdditional clicks measure perimeter.\nRe-click starting point to measure area.";break;case "z3":b="Click links are disabled in edit mode\nto allow hotspot positioning by click-dragging:\n";break;case "ALERT_LOADINGIMAGESET":b=Z.animation?
"\nLoading animation images...":"\nLoading slidestack slides...";break;case "ERROR_ERROR":b="error";break;case "z268LONG":b="9000";break;case "z268":b="3000";break;case "z268MEDIUM":b="1500";break;case "z268SHORT":b="750";break;case "z287":b="Parameter unrecognized or deprecated - see the Parameters List documentation: ";break;case "z275":b="Parameter deprecated - please replace: ";break;case "z288":b="Recent versions of most browsers allow dynamic content loading (such as viewing of Zoomify Images) only from a web server.  Please change your browser settings (see READ ME FIRST file for details) or use FireFox or an earlier version of your browser for local viewing.";
break;case "z290":b="Browsers allow ZIF file viewing only from a web server.  Please use Zoomify Image folders for local viewing.";break;case "z249":b="Image failed to load: possible invalid path, missing image, or network error.";break;case "z280":b="Sorry!  Part of this view is not refreshing.  The network may be slow, or the website may be missing a file:  ";break;case "ERROR_VALIDATEVIEW":b="Sorry!  Part of this view is not refreshing. The network\nmay be slow, or the website may be missing a file.  ";
break;case "z280-ZIF":b="Sorry!  Part of this view is not refreshing.  The network may be slow, or the ZIF file may be faulty:  ";break;case "z247":b="Attempt to initiate Edit mode without providing path to hotspots or annotations XML data file.";break;case "z248":b="Hotspot media failed to load: possible invalid path, missing file, or legacy hotspot media such as library clip of Flash-based viewer.";break;case "z246":b="Media of one or more hotspots unsupported: hotspot media of type 'symbol' depend on internal Library of Flash-based viewers.";
break;case "z298":b="Attempt to initiate Edit mode without providing path to Save Handler - server side script or other resource to post XML data.";break;case "z297":b="Annotations cannot be saved: missing or incorrect save\nhandler path parameter, or missing file on server.";break;case "z256-ZIFBYTERANGE":b="Error loading image: ZIF file data request failed. Request content type: ";break;case "z256-ZIFBYTES":b="Error loading image: ZIF file invalid.";break;case "z295":b="Browser does not support XMLHttpRequest.";
break;case "z256-IMAGEXML":b="Error loading image: please make sure image path in web page matches image folder location on webserver.";break;case "z256-TOOLBARSKINSXML":b="Error loading toolbar - skin files not found: please verify that the folders 'Assets/Skins/Default' are in same folder as the web page displaying the Viewer, or add zSkinPath parameter to web page. The zSkinPath parameter may be required if using a content management system such as Drupal, Joomla, or WordPress.";break;case "z256-SLIDESXML":b=
"Error loading slides: please make sure slide path in web page matches slides folder location on webserver.";break;case "z256-HOTSPOTSXML":b="Error loading hotspots: please make sure hotspot path in web page matches hotspots folder location on webserver.";break;case "z256-CREATINGANNOTATIONSXMLFILE":b="Error finding annotations XML at location provided.\nCreating new file.";break;case "z256-ANNOTATIONSXML":b="Error loading annotations: please make sure annotation XML path in web page matches annotation folder location on webserver.";
break;case "z256":b="Error making network request:\npossible invalid path or network error.";break;case "z272":b="Error related to network security: ";break;case "z273":b="Error related to network status: ";break;case "z273RANGEREQUESTS":b="Network error. If using ZIF storage, setting MIME type on web server may be necessary. See READ ME FIRST file in ZIF Storage folder or contact Support: ";break;case "z244":b=" converting XML text to XML doc (DOMParser): ";break;case "z243":b=" converting XML doc to XML text (DOMParser): ";
break;case "z294":b="Browser does not support XML DOM.";break;case "z293":b="XML Doc invalid.";break;case "z296":b="XML invalid.";break;case "z255":b="Image XML invalid.";break;case "z252":b="Image properties XML invalid.";break;case "z250":b="Image properties invalid.";break;case "z251":b="Image properties parameter invalid.";break;case "z254":b="Image tile count does not match value in image XML. If the count is invalid display problems can result.";break;case "z245":b=" while executing callback: ";
break;case "z253":b="\nImage tile request not fulfilled within time period expected";break;case "ERROR_UNCONVERTEDIMAGEPATHINVALID":b="Unconverted JPEG or PNG image failed to load: possible invalid path, missing image, or network error.";break;case "ERROR_TRANSLATINGCANVASFORUNCONVERTEDIMAGE":b="\nTranslation of canvas failed";break;case "ERROR_SCALINGCANVASFORUNCONVERTEDIMAGE":b="\nScaling of canvas failed";break;case "ERROR_SETTINGTRANSFORMONCANVASFORUNCONVERTEDIMAGE":b="\nTransform on canvas failed";
break;case "z271":b="Navigator image failed to load: possible invalid path, missing image, or network error.";break;case "z278":b="Skin XML invalid.";break;case "z279":b="The skin XML file has one or more faulty name lines.";break;case "z291":b="Virtual pointer graphic failed to load: ";break;case "z292":b="Watermark image failed to load: ";break;case "z283":b="Unknown element style - no known method to identify.";break;case "z284":b="Unknown mouse position - no known method to calculate.";break;
case "z285":b="Unknown mouse scroll - no known method to calculate.";break;case "z286":b="Unknown window size - no known method to calculate.";break;case "z360":b="Launch Zoomify Website";break;case "z363":a="";Z.hotspots?a="\nAlt-Click: Toggle Hotspot Visibility":Z.annotations&&(a="\nAlt-Click: Toggle Label Visibility");b="Minimize Toolbar"+a;break;case "z341":a="";Z.hotspots?a="\nAlt-Click: Toggle Hotspot Visibility":Z.annotations&&(a="\nAlt-Click: Toggle Label Visibility");b="Expand Toolbar"+a;
break;case "z400":b="Zoom Out";break;case "z385":b="Zoom In And Out";break;case "z399":b="Zoom In";break;case "z370":b="Pan Left";break;case "z372":b="Pan Up";break;case "z369":b="Pan Down";break;case "z371":b="Pan Right";break;case "z378":b="Reset Initial View\nAlt-Click: Prior View";break;case "z391":b="Enter Full View";break;case "z391EXIT":b="Exit Full View";break;case "z391EXITEXTERNAL":b="Exit Full View";break;case "z342":b="Show Help";break;case "z342MARKUP":b="Show Markup Help";break;case "z342ANNOTATION":b=
"Show Annotation Help";break;case "z380":b="Rotate Clockwise 90 Degrees";break;case "z381":b="Rotate Counterwise 90 Degrees";break;case "z398":b="Click-Drag To Position";break;case "z392":b="Begin Measuring";break;case "z392EXIT":b="Stop Measuring";break;case "z394":b="Prior Destination";break;case "z393":b="Next Destination";break;case "z395":b="Start Tour";break;case "z396":b="Stop Tour";break;case "z384":b="Prior Slide";break;case "z383":b="Next Slide";break;case "z386":b="Start Slideshow";break;
case "z387":b="Stop Slideshow";break;case "z321":b="Mute Sound";break;case "z322":b="Enable Sound";break;case "TIP_IMAGESETPRIOR":b=Z.animation?"Prior Image":"Prior Slide";break;case "TIP_IMAGESETSLIDER":b=Z.animation?"Change Image":"Change Slide";break;case "TIP_IMAGESETNEXT":b=Z.animation?"Next Image":"Next Slide";break;case "z397":b="Image Navigation";break;case "z334":b="Toggle Color Palette";break;case "z337":b="Measurements";break;case "z342OK":b="Close Help Display";break;case "z362":b="Accept And Close Message";
break;case "z361":b="Decline And Close Message";break;case "z332":b="Agree To Copyright And View Images";break;case "z333":b="Exit And Do Not View Images";break;case "z382":b="Toggle Full Page View";break;case "z390":b="Toggle Viewport Display";break;case "z388":b="Toggle Viewport Backfill";break;case "z389":b="Toggle Constrain Pan";break;case "z427DISPLAY":b="www.zoomify.com";break;case "z427":b="http://www.zoomify.com";break;case "z427TARGET":b="_blank";break;case "z439":b="Navigator Bird's Eye View";
break;case "z420":b="X";break;case "z441":b=" min";break;case "z440":b=" max";break;case "z442":b="units in %s";break;case "z431":b="Length: ";break;case "z431TOTAL":b="Total length: ";break;case "z433":b="Perimeter: ";break;case "z430":b="Area: ";break;case "z434":b="\u00b2";break;case "z418":b="Agree";break;case "z419":b="Exit";break;case "UI_LISTMOUSEDOWNTEXT":b="Select an item...";break;case "z444":b="Tour Destinations";break;case "z443":b="Slides";break;case "z424":b="Hotspots";break;case "UI_IMAGESETLISTTITLE":b=
"ImageSet Slide List";break;case "UI_IMAGESETSTART":b="0";break;case "UI_IMAGESETLOOP":b="1";break;case "UI_IMAGESETSLIDER":b="1";break;case "z422":b="430";break;case "z421":b="300";break;case "z423":b="OK";break;case "z437":b="430";break;case "z436":b="84";break;case "z435":b="Cancel";break;case "z438":b="OK";break;case "z417":b="290";break;case "z415":b="200";break;case "z416":b="Mouse Coordinates\nAlt-click, select in list, right-click, Copy";break;case "UI_TRACEDISPLAYTITLE":b="Trace Values\n\n";
break;case "z445":b="This panel is enabled using the HTML parameter 'zDebug=1' (basic) or 'zDebug=2' (adds tile tracing). It can be called in JavaScript as follows:\n\n   Z.Utils.trace('value to display');  \n\nThe buttons below display or modify important state values.  Web designers new to JavaScript will also benefit from the console, trace, profiling, and other debugging features of leading browsers.";break;case "UI_TRACEDISPLAYTILESTATUSTEXT":b="Required Cached Requested Loaded Displayed Waiting";
break;case "UI_TRACEDISPLAYELAPSEDTIMETEXT":b="Seconds";break;case "UI_TRACEDISPLAYTILESPERSECONDTEXT":b="Loads / Second";break;case "z446":b="Show Globals";break;case "z449":b="Toggle Display";break;case "z447":b="Toggle Backfill";break;case "z448":b="Toggle Constrain Pan";break;case "z32":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Viewer Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>To explore this image, simply click the image to zoom, double-click to zoom out, or click-drag to pan.<br><br>The Navigator thumbnail overview can also be clicked or click-dragged to pan.<br><br>Use the Toolbar for exact navigation - if using a mouse, hold it over any button to see a helpful tip.</font></p>";
break;case "z31":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Markup Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>Markup Mode allows fast, easy addition of labels to a zoomable image.<br><br><strong>Creating A Label</strong><br><br>Click any of the buttons at the top of the Markup Panel: Freehand, Text, Rectangle, Polygon, or Measure.<br><br>Next, click or click-drag in the image:<ul><li>Freehand drawings are created by click-dragging.<li>Text labels are created with a simple click in the image.<li>Icons first require the type of icon to be chosen from the icon list. Then the icon is created by clicking the image.<li>Rectangles do not require multiple clicks - just click-drag and all four corners are automatically created and positioned.<li>Polygons require multiple clicks in the image to create corner <i>control points</i>.  Alt-click the image to create a final point, or click the first point to close the polygon.<li>Measurements are just like polygons but the caption dynamically changes to display the current length or area.<li>Control points of rectangles, polygons, and measurments can be click-dragged to modify a polygon.</ul>Use the Color button to set a color. The color selected affects freehand drawings, text captions, icon captions, and the lines and captions of rectangles, polygons, and measurements.<br><br>Use the View button to return to navigation mode.<br><br><strong>Editing Label Values</strong><br><br>The Markup Panel also displays the name and caption of the currently selected label for easy editing. Use the TAB key to implement any edits or click in the image.<br><br>Delete a label using the trash can button. The label will be removed from the image and the Markup Panel will display the prior label in the label list.<br><br>Save a label using the button with the disk icon. Or, use the label list to change the selected label - the previously selected label will be automatically saved.<br><br><i><strong>Special Tips:</strong><ul><li>Alt-click any label to display its name and caption in the Markup Panel for editing.<li>Alt-click-drag any completed label to reposition it in the image.<li>If using a mouse, hold the cursor over any button at any time to see a helpful reminder.</ul></i></font></p>";
break;case "z28":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Annotation Editing Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>The Annotation Panel provides an intuitive, visual means, to add <i>Points of Interest</i> to a zoomable image, including the option of associated <i>Labels</i> and <i>Notes</i>.<br><br><strong>Point Of Interests</strong><br><br>A Point Of Interest (POI) is a place in the image that is named and listed so that it can be navigated to easily.<br><br>To create a Point Of Interest, click the <i>Add</i> button beneath the Point Of Interest choice list at the top of the Annotation Panel to create a new Point of Interest. Or, click the <i>Edit</i> button to modify the current POI. If no Annotations have been created, a placeholder POI will be the only item in the Point Of Interest list.<br><br><i><strong>More Buttons:</strong></i><br><br>When the Add button is clicked, two different buttons will be displayed: <i>Save</i> and <i>Cancel</i>. If the Edit button is clicked, a third button will also be displayed: <i>Delete</i>.<br><br>Save a Point Of Interest using the button with the disk icon. Cancel edits to a Point Of Interest using the button with the large X icon.<br><br>Delete a Point Of Interest using the trash can button. The POI will be removed from the list and the prior POI in the list will be displayed.<br><br><i><strong>Important:</strong><ul><li>Changing the selected POI in the POI list will automatically save any edits to the current POI.<li>Clicking any of the buttons Save, Cancel, and Delete will leave the Add or Edit mode and return to Annotation Panel to its default display.<li>If using a mouse, hold the cursor over any button to see a helpful reminder.</ul></i><strong>Labels</strong><br><br>To add a new Label to the current Point Of Interest, click the Add button beneath the Label section of the Annotation Panel. Or, click the Edit button to edit the current Label. If no Labels have been created yet, the Label list will be empty.<br><br>If adding a new Label, click any of the buttons at the top of the Label section of the Annotation Panel: Freehand, Text, Rectangle, Polygon, or Measure.<br><br>Now click or click-drag in the image to create a new Label:<ul><li>Freehand drawings are created by click-dragging.<li>Text labels are created with a simple click in the image.<li>Icons first require the type of icon to be chosen from the icon list. Then the icon is created by clicking the image.<li>Rectangles do not require multiple clicks - just click-drag and all four corners are automatically created and repositioned.<li>Polygons require multiple clicks in the image to create corner <i>control points</i>.  Alt-click the image to create a final point, or click the first point to close the polygon.<li>Measurements are just like polygons except that the caption dynamically changes to display the current length or area.</ul>Use the Color button to set the color of new freehand drawings, text captions, icon captions, and the lines and captions of rectangles, polygons, and measurements.<br><br>Use the View button to return to navigation mode in the current Label.<br><br><i><strong>Important:</strong><ul><li>In Add mode, multiple clicks or click-drags will create multiple Labels - to support rapid annotation authoring.<li>In Edit mode, any clicks or click-drags will simple replace the current Label in the image.<li>Alt-click any label in the image to display its values in the Annotatoin Panel for editing. (Add or Edit mode)<li>Alt-click-drag any completed label in the image to reposition it.  (Add or Edit mode)<li>Control points of rectangles, polygons, and measurments can be click-dragged to modify a polygon.</ul></i><i><strong>More Label Values:</strong></i><br><br>The Annotation Panel also displays the name, caption, tooltip, and click-URL of of the currently selected label for easy editing. Use the TAB key to implement any edits or click in another text field or in the image. <br><br>Two choice lists are also included: the first allows the caption to be positioned relative to the Label in the image while the second determines whether the click-URL (if any) will open in the current browser window or a new browser window or a specific frame in the web page. <br><br>The Scale buttons allow the Label to be sized in the image.  The Rollover checkbox can be used to hide a Label in the image until the cursor is over it (not supported by mobile devices).<br><br>The Save, Cancel, and Delete buttons for Labels work just as they do with Points of Interest, as described above. And remember, changing the selected Label in the Label list will automatically save any edits to the current Label. Alt-clicking or alt-click-dragging a Label in the image will also change the current Label in the Label list and cause any edits to be saved (see the first two Special Tips below).<br><br><i><strong>Important:</strong><ul><li>Changing the selected Label by clicking or click-dragging it in the image will change the selected Point Of Interest if the newly selected Label is associated with a different POI - if editing is in progress the edits will be automatically saved.<li>If using a mouse, hold the cursor over any button to see a helpful reminder.</ul></i><strong>Notes</strong><br><br>To add a new Note to the current Point Of Interest, click the Add button beneath the Note section of the Annotation Panel. Or, click the Edit button to edit the current Note. If no Notes have been created yet, the Note list will be empty.<br><br>Use the name and text fields to easily add or edit the Note values. Notes can hold a virtually unlimited number of characters (spaces included). A vertical scrollbar automatically appears when a note requires more lines than fit in the note area. Notes can contain carriage returns.<br><br>The Save, Cancel, and Delete buttons for Notes work just as they do with Points of Interest, as described above. And remember, changing the selected Note in the Note list will automatically save any edits to the current Note.</font></p>";
break;case "z30":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>\\/ \\/ \\/</strong></font></p>";break;case "z29":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Annotation Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>The Annotation Panel provides an intuitive display of <i>Points of Interest</i> in a zoomable image, along with associated <i>Labels</i> and <i>Notes</i>, if any.<br><br>A Point Of Interest (POI) is a place in the image that is named and listed so that it can be navigated to easily.<br><br>A Label is a visual element in the image: a freehand drawing, text caption, rectangle or other polygon, or a measurement.<br><br>A Note is text associated with a Point Of Interest. Notes can hold a virtually unlimited number of characters (spaces included). A vertical scrollbar automatically appears when a note requires more lines than fit in the note area.</font></p>";
break;case "z50":b="Anonymous";break;case "z27":b="Whole Image";break;case "z43":b="New Point Of Interest ";break;case "z44":b=this.getResource("z50");break;case "z34":b="New Hotspot ";break;case "z33":b="Caption for hotspot ";break;case "z37":b="New Label ";break;case "z35":b="Caption for label ";break;case "CONTENT_LABELCOMMENT":b="Comment for label ";break;case "CONTENT_ANNOTATIONPLACEHOLDERCOMMENTTEXT":b="";break;case "z45":b="Polygon ";break;case "z38":b="Tooltip for label ";break;case "z36":b=
"";break;case "z39":b=this.getResource("z50");break;case "z25":b=Z.captionTextColor?Z.captionTextColor:"#FFFFFF";break;case "z22":b=Z.captionBackColor?Z.captionBackColor:"#000000";break;case "z48":b=Z.polygonLineColor?Z.polygonLineColor:"#FFFFFF";break;case "z46":b=Z.polygonFillColor?Z.polygonFillColor:"#FFFFFF";break;case "z26":b=Z.captionTextVisible?"1":"0";break;case "z23":b=Z.captionBackVisible?"1":"0";break;case "z49":b=Z.polygonLineVisible?"1":"0";break;case "z47":b=Z.polygonFillVisible?"1":
"0";break;case "z24":b="8";break;default:b="Unexpected resource request"}return b},clearDisplay:function(a){if(a)if(Z.useCanvas&&"CANVAS"==a.tagName)Z.Utils.clearCanvas(a);else for(;a.hasChildNodes();)a.removeChild(a.lastChild)},clearCanvas:function(a){a=a.getContext("2d");a.save();try{a.setTransform(1,0,0,1,0,0)}catch(b){Z.Utils.showMessage(Z.Utils.getResource("ERROR_SETTINGTRANSFORMONCANVASFORUNCONVERTEDIMAGE")),console.log("In function clearCanvas setting transform on canvas:  "+b)}a.clearRect(0,
0,a.canvas.width,a.canvas.height);a.restore()},colorCanvas:function(a,b){var c=a.getContext("2d");c.save();c.setTransform(1,0,0,1,0,0);c.fillStyle=b;c.fillRect(0,0,c.canvas.width,c.canvas.height);c.restore()},deleteDiv:function(a){for(a=document.getElementById(a);a.hasChildNodes();)a.removeChild(a.lastChild);a.parentNode.removeChild(a)},createCallback:function(a,b){for(var c=[],d=2,e=arguments.length;d<e;d++)c[c.length]=arguments[d];return function(){for(var d=c.concat([]),e=0,m=arguments.length;e<
m;e++)d[d.length]=arguments[e];return b.apply(a,d)}},validateCallback:function(a){var b=Z.callbacks.slice(0);Z.Utils.functionCallWithDelay(function(){Z.Utils.validateCallbackDelayed(a,b)},10)},validateCallbackDelayed:function(a,b){for(var c=0,d=b.length;c<d;c++){var e=b[c];if(e&&e.callbackEvent==a&&"object"===typeof e&&"function"===typeof e.callbackFunction)switch(a){case "viewZoomingGetCurrentZoom":var f=Z.Viewport.getZoom();e.callbackFunction(f);break;case "viewUpdateCompleteGetLabelIDs":f=Z.Viewport.getLabelIDsInCurrentView(!1,
!0,!0);e.callbackFunction(f);break;case "viewUpdateCompleteGetLabelInternalIDs":f=Z.Viewport.getLabelIDsInCurrentView(!0,!0,!0);e.callbackFunction(f);break;default:e.callbackFunction()}}Z.Utils.arrayClear(b)},getContainerSize:function(a,b){var c=Z.Utils.getElementStyle(a),d=parseFloat(c.width),e=parseFloat(c.height);Z.Utils.stringValidate(c.width)&&-1!=c.width.indexOf("%")&&(d=parseFloat(Z.Utils.getElementStyleProperty(a,"width")));Z.Utils.stringValidate(c.height)&&-1!=c.height.indexOf("%")&&(e=parseFloat(Z.Utils.getElementStyleProperty(a,
"height")));isNaN(d)&&(d=b.clientWidth);isNaN(e)&&(e=b.clientHeight);if(0==d||0==e)winDimensions=Z.Utils.getWindowSize(),0==d&&(a.parentNode.style.width=winDimensions.x+"px",d=a.clientWidth),0==e&&(a.parentNode.style.height=winDimensions.y+"px",e=a.clientHeight);return new Z.Utils.Point(d,e)},createContainerElement:function(a,b,c,d,e,f,h,m,D,E,y,A,H,U,q,T,K){var u=document.createElement(a);this.stringValidate(b)&&(u.id=b);b=u.style;b.display=this.stringValidate(c)?c:"inline-block";b.position=this.stringValidate(d)?
d:"static";b.overflow=this.stringValidate(e)?e:"hidden";"canvas"==a?(this.stringValidate(f)&&u.setAttribute("width",f),this.stringValidate(h)&&u.setAttribute("height",h)):(this.stringValidate(f)&&(b.width=f),this.stringValidate(h)&&(b.height=h));this.stringValidate(m)&&(b.left=m);this.stringValidate(D)&&(b.top=D);b.borderStyle=this.stringValidate(E)?E:"none";b.borderWidth=this.stringValidate(y)?y:"0px";b.borderColor="#696969";b.background=this.stringValidate(A)?A:"transparent none";b.margin=this.stringValidate(H)?
H:"0px";b.padding=this.stringValidate(U)?U:"0px";b.whiteSpace=this.stringValidate(q)?q:"normal";this.stringValidate(T)&&(b.cursor=T);"undefined"!==K&&K&&(Z.Utils.addEventListener(u,"touchstart",Z.Utils.preventDefault),Z.Utils.addEventListener(u,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(u,"contextmenu",Z.Utils.preventDefault));return u},createCenteredElement:function(a,b){var c=this.createContainerElement("div"),d=[];d[d.length]='<div style="#position:relative; display:table; height:100%; width:100%; border:none; margin:0px; padding:0px; overflow:hidden; text-align:left;">';
d[d.length]='<div style="#position:absolute; display:table-cell; #top:50%; width:100%; border:none; margin:0px; padding:0px; vertical-align:middle;">';d[d.length]='<div id="'+b+'"; style="#position:relative; width:100%; #top:-50%; border:none; margin:0px; padding:0px; text-align:center;"></div></div></div>';c.innerHTML=d.join("");for(var d=c=c.firstChild,e=c.getElementsByTagName("div");0<e.length;)d=e[0],e=d.getElementsByTagName("div");d.appendChild(a);return c},createTextElement:function(a,b,c,d,
e,f,h,m,D,E,y,A,H,U,q,T,K,u){c=Z.Utils.createContainerElement("div","textBoxFor-"+a,"inline-block","absolute","hidden",c,d,e,f,m,D,"white","0px",h,"normal");d=document.createElement("textarea");c.appendChild(d);e=d.style;d.id=a;d.value=b;d.readOnly=E;e.width="100%";e.height="100%";e.margin="0";e.border="0";this.stringValidate(y)&&(e.fontFamily=y);this.stringValidate(A)&&(e.fontSize=A);this.stringValidate(H)&&(e.resize=H);this.stringValidate(U)&&(d.columns=U);this.stringValidate(q)&&(d.rows=q);this.stringValidate(T)&&
(e.overflowX=T);this.stringValidate(K)&&(e.overflowY=K);this.stringValidate(u)&&(d.wrap=u,"off"==u&&(e.whiteSpace="nowrap"));return c},createSelectElement:function(a,b,c,d,e,f,h,m,D,E){var y=document.createElement("select");y.id=a;Z.Utils.stringValidate(b)&&"none"!=b&&(y.options[0]=new Option(b,null));a=0;for(b=c.length;a<b;a++)y.options[y.options.length]=new Option(c[a].text,c[a].value);Z.Utils.addEventListener(y,"undefined"!==typeof E&&null!==E?E:"change",D);c=y.style;c.width=d+"px";c.position=
"absolute";c.left=e+"px";c.top=f+"px";c.fontSize=null==h?"11px":h+"px";c.fontFamily="verdana";c.visibility=m;return y},updateSelectElement:function(a,b,c){if(a){var d=-1!=a.selectedIndex?a.selectedIndex:0;a.innerHTML="";for(var e=0,f=b.length;e<f;e++)a.options[a.options.length]=new Option(b[e].text,b[e].value.toString());"undefined"!==typeof c&&null!==c&&(b=parseInt(Z.Utils.arrayIndexOfObjectValue(b,"value",c),10),-1!=b&&(d=b));b=a.options.length-1;a.selectedIndex=d<=b?d:b}},getChildElementByID:function(a,
b){for(var c=null,d=0,e=a.childNodes.length;d<e&&(c=a.childNodes[d],c.id!=b)&&(c=Z.Utils.getChildElementByID(c,b),null===c);d++);return c},getElementPosition:function(a){for(var b=0,c=0,d="fixed"==this.getElementStyle(a).position,e=this.getOffsetParent(a,d);e;)b+=a.offsetLeft,c+=a.offsetTop,d&&(a=this.getPageScroll(),b+=a.x,c+=a.y),a=e,d="fixed"==this.getElementStyle(a).position,e=this.getOffsetParent(a,d);return new this.Point(b,c)},getOffsetParent:function(a,b){return b&&a!=document.body?document.body:
a.offsetParent},getElementSize:function(a){return new this.Point(a.clientWidth,a.clientHeight)},getElementStyle:function(a){if(a.currentStyle)return a.currentStyle;if(window.getComputedStyle)return window.getComputedStyle(a,"");this.showMessage(this.getResource("z283"))},getElementStyleProperty:function(a,b){if(window.getComputedStyle)return window.getComputedStyle(a,null).getPropertyValue(b);if(a.currentStyle)return a.currentStyle[b];this.showMessage(this.getResource("z283"))},isElementFluid:function(a){var b,
c,d,e,f,h=a.cloneNode(!1);d=c=!1;window.getComputedStyle?value=window.getComputedStyle(h,null).width:h.currentStyle&&(value=h.currentStyle.width);"undefined"!==typeof value&&null!==value&&""!==value?c=-1!=value.toString().indexOf("%")||"auto"==value:(h.style.margin="0",h.style.padding="0",h.style.maxWidth="none",h.style.minWidth="none",b=document.createElement("testContainer"),b.style.display="block",b.style.width="800px",b.style.padding="0",b.style.margin="0",b.appendChild(h),a.parentNode.insertBefore(b,
a),c=h.offsetWidth,b.style.width="900px",h.offsetWidth==c?(a.parentNode.removeChild(b),c=!1):(e=Math.floor(.125*c),f=Math.floor(100/900*h.offsetWidth),a.parentNode.removeChild(b),c=e==f?!0:!1));0==d&&(window.getComputedStyle?value=window.getComputedStyle(h,null).height:h.currentStyle&&(value=h.currentStyle.height),"undefined"!==typeof value&&null!==value&&""!=value?d=-1!=value.toString().indexOf("%")||"auto"==value:(h.style.margin="0",h.style.padding="0",h.style.maxHeight="none",h.style.minHeight=
"none",b=document.createElement("testContainer"),b.style.display="block",b.style.height="800px",b.style.padding="0",b.style.margin="0",b.appendChild(h),a.parentNode.insertBefore(b,a),d=h.offsetHeight,b.style.height="900px",h.offsetHeight==d?(a.parentNode.removeChild(b),d=!1):(e=Math.floor(.125*d),f=Math.floor(100/900*h.offsetHeight),a.parentNode.removeChild(b),d=e==f?!0:!1)));return c||d},getEventTargetCoords:function(a){return getElementPosition(Z.Utils.target(a))},getFirstTouch:function(a){var b=
null,c=a.touches;a=a.changedTouches;"undefined"!==typeof c?b=c[0]:"undefined"!==typeof a&&(b=a[0]);return b},getMousePosition:function(a){var b=0,c=0;"DOMMouseScroll"==a.type&&Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion?(b=a.screenX,c=a.screenY):"number"===typeof a.pageX?(b=a.pageX,c=a.pageY):"number"===typeof a.clientX?(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,c=a.clientY+document.body.scrollTop+document.documentElement.scrollTop):this.showMessage(this.getResource("z284"));
return new this.Point(b,c)},getMouseScroll:function(a){var b=0;"number"===typeof a.wheelDelta?b=a.wheelDelta:"number"===typeof a.detail?b=-1*a.detail:this.showMessage(this.getResource("z285"));return b?b/Math.abs(b):0},getPageScroll:function(){var a=0,b=0,c=document.documentElement||{},d=document.body||{};if("number"===typeof window.pageXOffset)a=window.pageXOffset,b=window.pageYOffset;else if(d.scrollLeft||d.scrollTop)a=d.scrollLeft,b=d.scrollTop;else if(c.scrollLeft||c.scrollTop)a=c.scrollLeft,
b=c.scrollTop;return new this.Point(a,b)},getScreenSize:function(){return new this.Point(screen.width,screen.height)},getWindowSize:function(){var a=0,b=0,c=document.documentElement||{},d=document.body||{};"number"===typeof window.innerWidth?(a=window.innerWidth,b=window.innerHeight):c.clientWidth||c.clientHeight?(a=c.clientWidth,b=c.clientHeight):d.clientWidth||d.clientHeight?(a=d.clientWidth,b=d.clientHeight):this.showMessage(this.getResource("z286"));return new this.Point(a,b)},Button:function(a,
b,c,d,e,f,h,m,D,E,y,A,H,U,q,T,K,u,J,B){a=Z.Utils.createContainerElement("span",a,"inline-block","absolute","hidden",h,m,D,E,U,q,T,K,u,J,B);if(Z.Utils.stringValidate(b)){var G=document.createTextNode(b);a.appendChild(Z.Utils.createCenteredElement(G));Z.Utils.setTextNodeStyle(G,"black","verdana","13px","none","normal","normal","normal","normal","1em","center","none")}else{c=Z.Utils.stringRemoveTrailingSlashCharacters(c);var ra=Z.Utils.createGraphicElement(c+"/"+d),sa=Z.Utils.createGraphicElement(c+
"/"+e),ta=Z.Utils.createGraphicElement(c+"/"+f);ra.style.width=sa.style.width=ta.style.width=h;ra.style.height=sa.style.height=ta.style.height=m;ra.style.position=sa.style.position=ta.style.position="absolute";Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion&&(ra.style.top=sa.style.top=ta.style.top="");sa.style.visibility=ta.style.visibility="hidden";ra.alt=sa.alt=ta.alt="";"undefined"!==typeof H&&Z.Utils.stringValidate(H)&&(ra.alt=Z.Utils.getResource(H));a.appendChild(ra);a.appendChild(sa);a.appendChild(ta)}Z.Utils.addEventListener(a,
"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"mouseover",Z.Utils.stopPropagation);Z.Utils.addEventListener(a,"mousedown",Z.Utils.stopPropagation);Z.Utils.addEventListener(a,"mouseup",Z.Utils.stopPropagation);Z.Utils.addEventListener(a,"mouseout",Z.Utils.stopPropagation);"undefined"!==typeof imageUp&&(Z.Utils.addEventListener(ra,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(sa,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(ta,"contextmenu",Z.Utils.preventDefault));
Z.Utils.addEventListener(a,"touchstart",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"touchend",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"touchcancel",Z.Utils.preventDefault);Z.Utils.stringValidate(b)||(Z.Utils.disableTextInteraction(G),Z.Utils.addEventListener(a,"contextmenu",Z.Utils.preventDefault));Z.tooltipsVisible&&Z.Utils.stringValidate(H)&&(a.title=Z.Utils.getResource(H));Z.Utils.setButtonHandler(a,y,A);this.elmt=a},buttonSize:function(a,b,c){var d=a.style;d.width=b+"px";d.height=
c+"px";c=a.firstChild;d=a.childNodes[1];a=a.childNodes[2];c&&d&&a&&(c.style.width=d.style.width=a.style.width=b+"px",c.style.height=d.style.height=a.style.height=b+"px")},setButtonDefaults:function(a){Z.Utils.clearButtonSettings(a);Z.Utils.setButtonState(a,"up");Z.Utils.setButtonHandler(a,"mouseover",Z.Toolbar.z457)},clearButtonSettings:function(a){var b=a.firstChild,c=a.childNodes[1],d=a.childNodes[2];b&&c&&d&&(b.style.visibility=c.style.visibility=d.style.visibility="hidden",Z.Utils.removeEventListener(b,
"mouseover",Z.Toolbar.z457),Z.Utils.removeEventListener(c,"mousedown",Z.Toolbar.z457),Z.Utils.removeEventListener(c,"mouseout",Z.Toolbar.z457),Z.Utils.removeEventListener(d,"mouseup",Z.Toolbar.z457),Z.Utils.removeEventListener(a,"touchstart",Z.Toolbar.z457),Z.Utils.removeEventListener(a,"touchend",Z.Toolbar.z457),Z.Utils.removeEventListener(a,"touchcancel",Z.Toolbar.z457));Z.Utils.removeEventListener(a,"mouseover",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mousedown",Z.Toolbar.z457);Z.Utils.removeEventListener(a,
"mouseout",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mouseup",Z.Toolbar.z457)},setButtonState:function(a,b){var c="up"==b?a.firstChild:"down"==b?a.childNodes[1]:a.childNodes[2];c&&(c.style.visibility="visible")},setButtonHandler:function(a,b,c){c="undefined"!==c?c:Z.Toolbar.z457;var d="undefined"!==b?b:"mouseover";if("mouseover"==b&&"undefined"!==typeof a.firstChild)a=a.firstChild;else if("mousedown"!=b||"undefined"===typeof a.childNodes[1])"mouseup"==b&&"undefined"!==typeof a.childNodes[2]?
a=a.childNodes[2]:"mouseout"==b&&"undefined"!==typeof a.childNodes[1]&&(a=a.childNodes[1]);Z.Utils.addEventListener(a,"mousedown"==b?"touchstart":"touchend",c);Z.Utils.addEventListener(a,d,c)},Checkbox:function(a,b,c,d,e,f,h,m,D){var E=Z.Utils.createContainerElement("div","containerFor-"+a,"inline-block","absolute","hidden",c,d,e,f,"none","0px","transparent none","0px","0px","normal"),y=document.createElement("input");E.appendChild(y);y.type="checkbox";y.id=a;y.value=b;y.width=c;y.height=d;a=E.style;
a.width=c+"px";a.height=d+"px";a.left=e+"px";a.top=f+"px";Z.Utils.addEventListener(y,h,m);Z.Utils.addEventListener(y,"touchstart",m);Z.tooltipsVisible&&Z.Utils.stringValidate(D)&&(y.title=Z.Utils.getResource(D));return E},Graphic:function(a,b,c,d,e,f,h,m){b=Z.Utils.stringRemoveTrailingSlashCharacters(b);b=Z.Utils.createGraphicElement(c?b+"/"+c:b);c=b.style;c.width=d;c.height=e;"undefined"!==typeof m&&Z.Utils.stringValidate(m)?b.alt=Z.Utils.getResource(m):b.alt="";c=Z.Utils.createContainerElement("span",
a,"inline-block","absolute","hidden",d,e,f,h,"none","0px","transparent none","0px","0px","normal");c.appendChild(b);this.elmt=c;Z.Utils.addEventListener(b,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(b,"touchstart",Z.Utils.preventDefault);Z.Utils.addEventListener(b,"contextmenu",Z.Utils.preventDefault)},createGraphicElement:function(a){var b=this.createContainerElement("img"),c=null;Z.browser==Z.browsers.IE&&7>Z.browserVersion?(c=this.createContainerElement("span",null,"inline-block"),
b.onload=function(){c.style.width=c.style.width||b.width+"px";c.style.height=c.style.height||b.height+"px";b=b.onload=null},c.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a+'", sizingMethod="scale")'):(c=b,c.src=a);return c},graphicSize:function(a,b,c){var d=a.style;d.width=b+"px";d.height=c+"px";a=a.firstChild.style;a.width=b+"px";a.height=c+"px"},Point:function(a,b){this.x="number"===typeof a?a:0;this.y="number"===typeof b?b:0},Point3D:function(a,b,c){this.x="number"===
typeof a?a:0;this.y="number"===typeof b?b:0;this.z="number"===typeof c?c:0},Trio:function(a,b,c){this.a=a;this.b=b;this.c=c},Range:function(a,b){this.start="number"===typeof a?a:0;this.end="number"===typeof b?b:0},swapZIndices:function(a,b){var c=Z.Utils.getElementStyleProperty(a,"z-index"),d=Z.Utils.getElementStyleProperty(b,"z-index");a.style.zIndex=d;b.style.zIndex=c},stringValidate:function(a){return"undefined"!==typeof a&&null!==a&&""!==a&&"null"!==a},stringReadable:function(a){return a.replace(RegExp("%20",
"g")," ")},stringLowerCaseFirstLetter:function(a){return a.charAt(0).toLowerCase()+a.slice(1)},stringUpperCaseFirstLetter:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},stringMultiply:function(a,b){var c=Math.ceil(Math.log(b)/Math.LN2),d=a;do d+=d;while(0<--c);return d.slice(0,a.length*b)},stringRemoveTrailingSlashCharacters:function(a){return"/"==a.slice(-1,a.length)?a.slice(0,a.length-1):a},stringRemoveTabAndLineWrapCharacters:function(a){a=a.replace(/\n/g,"");a=a.replace(/\r/g,"");return a=
a.replace(/\t/g,"")},stringUnescapeAmpersandCharacters:function(a){a=a.replace(/\n/g,"");a=a.replace(/&#38;/g,"&");a=a.replace(/&#038;/g,"&");return a=a.replace(/&amp;/g,"&")},setHTMLTextDefaultCaptionStyle:function(a,b,c,d,e,f,h,m,D,E,y,A,H){a=a.style;-1==b.indexOf("color=")&&(a.color=c);-1==b.indexOf("font-family=")&&(a.fontFamily=d);-1==b.indexOf("font-size=")&&(a.fontSize=e);-1==b.indexOf("font-size-adjust=")&&(a.fontSizeAdjust=f);-1==b.indexOf("font-style=")&&(a.fontStyle=h);-1==b.indexOf("font-stretch=")&&
(a.fontStretch=m);-1==b.indexOf("font-variant=")&&(a.fontVariant=D);-1==b.indexOf("font-weight=")&&(a.fontWeight=E);-1==b.indexOf("line-height=")&&(a.lineHeight=y);-1==b.indexOf("text-align=")&&(a.textAlign=A);-1==b.indexOf("text-decoration=")&&(a.textDecoration=H)},setHTMLTextStyle:function(a,b,c,d,e,f,h,m,D,E,y,A){a=a.style;a.color=b;a.fontFamily=c;a.fontSize=d;a.fontSizeAdjust=e;a.fontStyle=f;a.fontStretch=h;a.fontVariant=m;a.fontWeight=D;a.lineHeight=E;a.textAlign=y;a.textDecoration=A},setTextAreaStyle:function(a,
b,c,d,e,f,h,m,D,E,y,A,H){a=a.firstChild.style;a.color=b;a.fontFamily=c;a.fontSize=d;a.fontSizeAdjust=e;a.fontStyle=f;a.fontStretch=h;a.fontVariant=m;a.fontWeight=D;a.lineHeight=E;a.textAlign=y;a.textDecoration=A;a.padding=H},setTextNodeStyle:function(a,b,c,d,e,f,h,m,D,E,y,A){a=a.parentNode.style;a.color=b;a.fontFamily=c;a.fontSize=d;a.fontSizeAdjust=e;a.fontStyle=f;a.fontStretch=h;a.fontVariant=m;a.fontWeight=D;a.lineHeight=E;a.textAlign=y;a.textDecoration=A},stringValidateColorValue:function(a){Z.Utils.stringValidate(a)||
(a="#000000");0!=a.indexOf("#")&&(a="#"+a);return a},hexToRGB:function(a){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,c,d,e){return c+c+d+d+e+e});return(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null},xmlConvertTextToDoc:function(a){var b=null;if(window.ActiveXObject)try{b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a)}catch(c){this.showMessage(c.name+this.getResource("z244")+c.message)}else if(window.DOMParser)try{b=
(new DOMParser).parseFromString(a,"text/xml")}catch(d){this.showMessage(d.name+this.getResource("z244")+d.message)}else this.showMessage(this.getResource("z294"));return b},xmlConvertDocToText:function(a){var b=null;if(window.ActiveXObject)try{b=a.xml}catch(c){this.showMessage(c.name+this.getResource("z243")+c.message)}else if(window.DOMParser)try{b=(new XMLSerializer).serializeToString(a)}catch(d){this.showMessage(d.name+this.getResource("z243")+d.message)}else this.showMessage(this.getResource("z294"));
return b},xmlEscapeMinimal:function(a){var b=null;"undefined"!==typeof a&&null!==a&&(b=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\r?\n/g,"%0A"));return b},xmlUnescapeMinimal:function(a){var b=null;"undefined"!==typeof a&&null!==a&&(b=a.replace(/%0A/g,"\n").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&"));return b},jsonConvertObjectToXMLText:function(a){var b=
function(a,c){var d="";if(a instanceof Array)for(var m=0,D=a.length;m<D;m++)d+=b(a[m],c)+"\n";else if("object"===typeof a){m=!1;d+="<"+c;for(D in a)"object"!==typeof a[D]?d+=" "+D+'="'+a[D].toString()+'"':m=!0;d+=">";if(m)for(D in a)"#text"==D?d+=a[D]:"object"===typeof a[D]&&(d+=b(a[D],D));d+="</"+c+">"}else d+="<"+c+">"+a.toString()+"</"+c+">";return d},c="",d;for(d in a)c+=b(a[d],d);return c.replace(/\t|\n/g,"")},jsonConvertXMLTextToJSONText:function(a){var b={convertToObject:function(a){var d=
{};if(1==a.nodeType){if(a.attributes.length)for(var e=0,f=a.attributes.length;e<f;e++)d[a.attributes[e].nodeName]=(a.attributes[e].nodeValue||"").toString();if(a.firstChild){for(var e=0,f=!1,h=a.firstChild;h;h=h.nextSibling)1==h.nodeType?f=!0:3==h.nodeType&&h.nodeValue.match(/[^ \f\n\r\t\v]/)&&e++;if(f)if(2>e)for(b.reduceWhitespace(a),h=a.firstChild;h;h=h.nextSibling)3==h.nodeType?d["#text"]=b.escapeMinimal(h.nodeValue):d[h.nodeName]?d[h.nodeName]instanceof Array?d[h.nodeName][d[h.nodeName].length]=
b.convertToObject(h):d[h.nodeName]=[d[h.nodeName],b.convertToObject(h)]:d[h.nodeName]=b.convertToObject(h);else a.attributes.length?d["#text"]=b.escapeMinimal(b.innerXML(a)):d=b.escapeMinimal(b.innerXML(a));else e&&(a.attributes.length?d["#text"]=b.escapeMinimal(b.innerXML(a)):d=b.escapeMinimal(b.innerXML(a)))}a.attributes.length||a.firstChild||(d=null)}else 9==a.nodeType?d=b.convertToObject(a.documentElement):alert("This node type not supported : "+a.nodeType);return d},convertToJSONText:function(a,
d){var e=d?'"'+d+'"':"";if(a instanceof Array){for(var f=0,h=a.length;f<h;f++)a[f]=b.convertToJSONText(a[f],"","\t");e+=(d?":[":"[")+(1<a.length?"\n\t"+a.join(",\n\t")+"\n":a.join(""))+"]"}else if(null==a)e+=(d&&":")+"null";else if("object"===typeof a){f=[];for(h in a)f[f.length]=b.convertToJSONText(a[h],h,"\t");e+=(d?":{":"{")+(1<f.length?"\n\t"+f.join(",\n\t")+"\n":f.join(""))+"}"}else e="string"==typeof a?e+((d&&":")+'"'+a.toString()+'"'):e+((d&&":")+a.toString());return e},reduceWhitespace:function(a){a.normalize();
for(var d=a.firstChild;d;)if(3==d.nodeType)if(d.nodeValue.match(/[^ \f\n\r\t\v]/))d=d.nextSibling;else{var e=d.nextSibling;a.removeChild(d);d=e}else 1==d.nodeType&&b.reduceWhitespace(d),d=d.nextSibling;return a},escapeMinimal:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},innerXML:function(a){var b="";if("innerHTML"in a)b=a.innerHTML;else{var e=function(a){var b="";if(1==a.nodeType){for(var b=b+("<"+a.nodeName),c=0,d=a.attributes.length;c<
d;c++)b+=" "+a.attributes[c].nodeName+"='"+(a.attributes[c].nodeValue||"").toString()+"'";if(a.firstChild){b+=">";for(c=a.firstChild;c;c=c.nextSibling)b+=e(c);b+="</"+a.nodeName+">"}else b+="/>"}else 3==a.nodeType&&(b+=a.nodeValue);return b};for(a=a.firstChild;a;a=a.nextSibling)b+=e(a)}return b}};9==a.nodeType&&(xml=xml.documentElement);return jsonTextOut="{\n  "+b.convertToJSONText(b.convertToObject(b.reduceWhitespace(a)),a.nodeName,"\t").replace(/\t/g,"  ")+"\n}"},arrayClear:function(a){if(a)for(;0<
a.length;)a.pop()},arrayClone:function(a,b,c){c=[];switch(a){case "pois":a=0;for(var d=b.length;a<d;a++)c[c.length]={text:b[a].text,value:b[a].value,id:b[a].id,x:b[a].x,y:b[a].y,z:b[a].z};break;case "labels":a=0;for(d=b.length;a<d;a++)c[c.length]={text:b[a].text,value:b[a].value,poiID:b[a].poiID,id:b[a].id};break;case "hotspots":a=0;for(d=b.length;a<d;a++)c[c.length]={id:b[a].id,internalID:b[a].internalID,poiID:b[a].poiID,name:b[a].name,mediaType:b[a].mediaType,media:b[a].media,audio:b[a].audio,image:b[a].image,
iW:b[a].iW,iH:b[a].iH,x:b[a].x,y:b[a].y,z:b[a].z,xScale:b[a].xScale,yScale:b[a].yScale,clickURL:b[a].clickURL,urlTarget:b[a].urlTarget,rollover:b[a].rollover,caption:b[a].caption,tooltip:b[a].tooltip,user:b[a].user,date:b[a].date,textColor:b[a].textColor,backColor:b[a].backColor,lineColor:b[a].lineColor,fillColor:b[a].fillColor,textVisible:b[a].textVisible,backVisible:b[a].backVisible,lineVisible:b[a].lineVisible,fillVisible:b[a].fillVisible,captionPosition:b[a].captionPosition,saved:b[a].saved,visibility:b[a].visibility,
captionHTML:b[a].captionHTML,tooltipHTML:b[a].tooltipHTML,polyClosed:b[a].polyClosed,polygonPts:b[a].polygonPts,showFor:b[a].showFor,transition:b[a].transition,changeFor:b[a].changeFor,rotation:b[a].rotation};break;case "polygon":a=0;for(d=b.length;a<d;a++)c[c.length]={x:b[a].x,y:b[a].y};break;case "notes":a=0;for(d=b.length;a<d;a++)c[c.length]={text:b[a].text,value:b[a].value,noteText:b[a].noteText,poiID:b[a].poiID,id:b[a].id};break;case "magnifications":for(a=0,d=b.length;a<d;a++)c[c.length]={text:b[a].text,
value:b[a].value}}return c},arrayIndexOf:function(a,b,c){c?0>c&&(c=Math.max(0,a.length+c)):c=0;for(var d=a.length;c<d;c++)if(a[c]===b)return c;return-1},arrayIndexOfObjectValue:function(a,b,c,d){if("undefined"!==typeof a){d?0>d&&(d=Math.max(0,a.length+d)):d=0;for(var e=a.length;d<e;d++)if(a[d][b]===c)return d}return-1},arrayIndexOfObjectTwoValues:function(a,b,c,d,e,f){if("undefined"!==typeof a){d?0>d&&(d=Math.max(0,a.length+d)):d=0;for(var h=a.length;d<h;d++)if(a[d][b]===c&&a[d][e].toString()===f.toString())return d}return-1},
arrayIndexOfObjectValueSubstring:function(a,b,c,d,e){d?0>d&&(d=Math.max(0,a.length+d)):d=0;for(var f=a.length;d<f;d++)if(e){if(-1!=a[d][b].toLowerCase().indexOf(c))return d}else if(-1!=a[d][b].indexOf(c))return d;return-1},arraySplice:function(a,b,c){if(Z.arraySpliceSupported)if(3<arguments.length)for(var d=3,e=arguments.length;d<e;d++)a.splice(b,c,arguments[d]);else a.splice(b,c);else{0>c&&(c=0);var f=[];if(3<arguments.length)for(d=3,e=arguments.length;d<e;d++)f[f.length]=arguments[d];for(var d=
Z.Utils.arraySubarray(a,0,b),h=Z.Utils.arraySubarrayLen(a,b,c),e=Z.Utils.arraySubarray(a,b+c),f=d.concat(f,e),d=a.length=0,e=f.length;d<e;d++)a[a.length]=f[d];a=h}return a},arraySubarraySimple:function(a,b){return this.slice(a,b)},arraySortNumericAscending:function(a,b,c){a.sort(function(a,b){return a-b});return a},arraySubarray:function(a,b,c){0>b&&(b=0);if(!c||c>a.length)c=a.length;if(b==c)return[];for(var d=[];b<c;b++)d[d.length]=a[b];return d},arraySubarrayLen:function(a,b,c){if(b>=a.length||
c&&0>=c)return[];0>b&&(b=Math.abs(b)>a.length?0:a.length+b);if(!c||c+b>a.length)c=a.length-b;for(var d=[],e=b;e<b+c;e++)d[d.length]=a[e];return d},arrayToArrayOfStrings:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]="undefined"!==typeof a[c]&&"undefined"!=a[c]&&null!==a[c]?a[c].toString():"";return b},arrayUnique:function(a){for(var b=1;b<a.length;)a[b-1]==a[b]?a=Z.Utils.arraySplice(a,b,1):b++;return a},arrayUniqueByObjectValue:function(a,b){if("undefined"!==typeof a)for(var c=1;c<a.length;)a[c-
1][b]==a[c][b]?a=Z.Utils.arraySplice(a,c,1):c++;return a},playAudio:function(a,b){Z.audioMuted||("undefined"!==typeof a&&null!==a?a.play():Z.Utils.stringValidate(b)&&(new Audio(b)).play())},loadAudio:function(a){Z.Utils.stringValidate(a)&&(new Audio(a)).load()},calculatePointsDistance:function(a,b,c,d){return Math.sqrt((a-=c)*a+(b-=d)*b)},convertPixelsToUnits:function(a,b,c){var d=1;"undefined"!==typeof b&&null!==b&&0!=b?d=b:"undefined"!==typeof c&&null!==c&&0!=c&&(d=Z.imageW/c);return a/d},polygonArea:function(a,
b,c,d){if("undefined"===typeof d||null===d)d=4;a=a.slice(0);b?a[a.length]={x:a[0].x,y:a[0].y}:"undefined"!==typeof c&&null!==c&&(a[a.length]={x:c.x,y:c.y});for(var e=c=b=0,f=a.length-1;e<f;e++)b+=a[e].x*a[e+1].y,c+=a[e].y*a[e+1].x;a=Z.Utils.convertPixelsToUnits((b-c)/2,Z.pixelsPerUnit,Z.unitsPerImage);a=Z.Utils.convertPixelsToUnits(a,Z.pixelsPerUnit,Z.unitsPerImage);return a=Z.Utils.roundToFixed(Math.abs(a),d)},polygonCenter:function(a,b,c){var d=0,e=0;if("undefined"!==typeof a&&null!==a&&0<a.length){d=
a.slice(0);b?d[d.length]={x:d[0].x,y:d[0].y}:"undefined"!==typeof c&&null!==c&&(d[d.length]={x:c.x,y:c.y});a=d[0];e=a.x;b=a.y;var f=a.x;c=a.y;for(var h=1,m=d.length;h<m;h++)a=d[h],e=Math.min(e,a.x),b=Math.min(b,a.y),f=Math.max(f,a.x),c=Math.max(c,a.y);d=e+(f-e)/2;e=b+(c-b)/2}return new Z.Utils.Point(d,e)},polygonDimensions:function(a,b){var c=0,d=0;if("undefined"!==typeof a&&null!==a&&0<a.length){c=a.slice(0);"undefined"!==typeof b&&null!==b&&(c[c.length]={x:b.x+.1*(c[c.length-1].x-b.x),y:b.y+.1*
(c[c.length-1].y-b.y)});for(var e=c[0].x,d=c[0].y,f=c[0].x,h=c[0].y,m=1,D=c.length;m<D;m++)c[m].x<e&&(e=c[m].x),c[m].x>f&&(f=c[m].x),c[m].y<d&&(d=c[m].y),c[m].y>h&&(h=c[m].y);c=f-e;d=h-d}return new Z.Utils.Point(c,d)},polygonPerimeter:function(a,b,c,d){if("undefined"===typeof d||null===d)d=5;a=a.slice(0);b?a[a.length]={x:a[0].x,y:a[0].y}:"undefined"!==typeof c&&null!==c&&(a[a.length]={x:c.x,y:c.y});c=b=0;for(var e=a.length-1;c<e;c++)b+=Z.Utils.calculatePointsDistance(a[c].x,a[c].y,a[c+1].x,a[c+1].y);
b=Z.Utils.convertPixelsToUnits(b,Z.pixelsPerUnit,Z.unitsPerImage);return b=Z.Utils.roundToFixed(Math.abs(b),d)},fullScreenView:function(a,b,c){if("undefined"===typeof c||null===c)c=!1;b?(b=document.documentElement,b.requestFullScreen?(a.requestFullScreen(),Z.Utils.addEventListener(document,"fullscreenchange",Z.Viewport.fullScreenEscapeHandler)):b.mozRequestFullScreen?(a.mozRequestFullScreen(),Z.Utils.addEventListener(document,"mozfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):b.webkitRequestFullScreen?
(a.webkitRequestFullScreen(),Z.Utils.addEventListener(document,"webkitfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):b.msRequestFullscreen&&(a.msRequestFullscreen(),Z.Utils.addEventListener(document,"MSFullscreenChange",Z.Viewport.fullScreenEscapeHandler))):document.cancelFullScreen?(c||document.cancelFullScreen(),Z.Utils.removeEventListener(document,"fullscreenchange",Z.Viewport.fullScreenEscapeHandler)):document.msExitFullscreen?(c||document.msExitFullscreen(),Z.Utils.removeEventListener(document,
"MSFullscreenChange",Z.Viewport.fullScreenEscapeHandler)):document.mozCancelFullScreen?(c||document.mozCancelFullScreen(),Z.Utils.removeEventListener(document,"mozfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):document.webkitCancelFullScreen&&(c||document.webkitCancelFullScreen(),Z.Utils.removeEventListener(document,"webkitfullscreenchange",Z.Viewport.fullScreenEscapeHandler))},rotatePoint:function(a,b,c){var d=Math.PI/180*-c;c=a*Math.cos(d)-b*Math.sin(d);a=a*Math.sin(d)+b*Math.cos(d);return new Z.Utils.Point(c,
a)},rotateElement:function(a,b,c){if(b!=Z.imageR||c)b="rotate("+b.toString()+"deg)",a.transform=b,a.msTransform=b,a.mozTransform=b,a.webkitTransform=b,a.oTransform=b},getDisplayPositionRotated:function(a,b){if("undefined"===typeof b||null===b)b=Z.imageR;0>b&&(b+=360);var c=parseFloat(a.width)/2,d=parseFloat(a.height)/2,e=Z.Utils.rotatePoint,f=new Z.Utils.Point(0,0);0!=b&&(90==b?f=e(-c,d,-b):180==b?f=e(c,d,-b):270==b&&(f=e(c,-d,-b)),f.x+=c,f.y+=d);return new Z.Utils.Point(f.x,f.y)},translateElement:function(a,
b,c){b="translate("+b.toString()+"px,"+c.toString()+"px)";a.transform=b;a.msTransform=b;a.mozTransform=b;a.webkitTransform=b;a.oTransform=b},intValue:function(a,b){return(a[b]+(a[b+1]<<8)|a[b+2]<<16)+16777216*a[b+3]},longValue:function(a,b){var c=(a[b]+(a[b+1]<<8)|a[b+2]<<16)+16777216*a[b+3];0!=a[b+4]&&(c+=4294967296*a[b+4]);return c},shortValue:function(a,b){return a[b]+(a[b+1]<<8)},createUint8Array:function(a,b){return Z.uInt8ArraySupported?new Uint8Array(a,b):new Z.Utils.TypedArray(a,b)},TypedArray:function(a){var b;
if("number"===typeof a){b=Array(a);for(var c=0;c<a;++c)b[c]=0}else b=a.slice(0);b.subarray=Z.Utils.arraySubarraySimple;b.buffer=b;b.byteLength=b.length;b.set=Z.Utils.setSimple;"object"===typeof a&&a.buffer&&(b.buffer=a.buffer);return b},setSimple:function(a,b){2>arguments.length&&(b=0);for(var c=0,d=a.length;c<d;++c,++b)this[b]=a[c]&255},encodeBase64:function(a){var b,c,d,e,f=0,h=0,m="",m=[];if(!a)return a;do b=a[f++],c=a[f++],d=a[f++],e=b<<16|c<<8|d,b=e>>18&63,c=e>>12&63,d=e>>6&63,e&=63,m[h++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e);while(f<a.length);m=m.join("");a=a.length%3;return(a?m.slice(0,a-3):m)+"===".slice(a||3)},validateResponseArrayFunctionality:function(){"ZoomifyImageFile"!=Z.tileSource||Z.responseArraySupported||Z.responseArrayPrototyped||(Z.Utils.defineObjectProperty(XMLHttpRequest.prototype,
"response",{get:function(){return(new VBArray(this.responseBody)).toArray()}}),Z.responseArrayPrototyped=!0)},defineObjectProperty:function(a,b,c){Z.definePropertySupported?Object.defineProperty(a,b,c):(delete a[b],"get"in c&&a.__defineGetter__(b,c.get),"set"in c&&a.__defineSetter__(b,c.set),"value"in c&&(a.__defineSetter__(b,function(a){this.__defineGetter__(b,function(){return a});return a}),a[b]=c.value))},createImageElementFromBytes:function(a,b){function c(a){d.onload=null;d.onabort=null;d.onerror=
null;e&&window.clearTimeout(e);window.setTimeout(function(){b(d)},1)}var d=new Image,e=null,f=parseFloat(this.getResource("z139")),h=function(){c(!1)};d.onload=function(){c(!0)};d.onabort=h;d.onerror=h;e=window.setTimeout(function(){console.log(Z.Utils.getResource("z253"));c(!1)},f);d.src=a},getCurrentUTCDateAsString:function(){var a=new Date,b=(10>a.getUTCMonth()+1?"0":"")+(a.getUTCMonth()+1),c=(10>a.getUTCDate()?"0":"")+a.getUTCDate(),d=(10>a.getUTCHours()?"0":"")+a.getUTCHours(),e=(10>a.getUTCMinutes()?
"0":"")+a.getUTCMinutes(),f=(10>a.getUTCSeconds()?"0":"")+a.getUTCSeconds();return a.getUTCFullYear()+b+c+d+e+f},cacheProofPath:function(a){a+="?t"+(new Date).getTime().toString()+"n"+Z.cacheProofCounter.toString();Z.cacheProofCounter+=1;return a},easing:function(a,b,c,d){b-=a;return 1>(c/=d/2)?b/2*c*c*c*c*c+a:b/2*((c-=2)*c*c*c*c+2)+a},functionCallWithDelay:function(a,b){window.setTimeout(a,b)},nodeIsInViewer:function(a){for(var b=!1;0==b;)if(a)a.id?"ViewerDisplay"==a.id?b=!0:a=a.parentNode:a=a.parentNode;
else break;return b},roundToFixed:function(a,b){var c=Math.round(a).toString().length,c=b-c,c=Math.pow(10,0>c?0:c);return a=Math.round(a*c)/c},getRandomInt:function(a,b){return Math.floor(Math.random()*(b-a+1))+a},getSign:function(a){return a?0>a?-1:1:0},drawCrosshairs:function(a,b,c){var d=Z.Utils.createContainerElement("div","viewportCenterLineVertical","inline-block","absolute","visible","1px",c+"px",b/2+"px","0px","solid","1px","transparent none","0px","0px","normal",null,!0);b=Z.Utils.createContainerElement("div",
"viewportCenterLineHorizontal","inline-block","absolute","visible",b+"px","1px","0px",c/2+"px","solid","1px","transparent none","0px","0px","normal",null,!0);a.appendChild(b);a.appendChild(d)},configureHelpDisplay:function(){var a=80,b=80,c=parseInt(this.getResource("z422"),10),d=parseInt(this.getResource("z421"),10);c>=Z.viewerW&&(c=Z.viewerW-a,a-=40);d>=Z.viewerH&&(d=Z.viewerH-b,b-=40);var a=Z.viewerW-c-a,e=Z.viewerH-d-b,f=this.getResource("z127"),b=this.getResource("z126");Z.HelpDisplay=this.createContainerElement("div",
"HelpDisplay","inline-block","absolute","hidden",c+"px",d+"px",a+"px",e+"px","solid","1px",f,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.HelpDisplay);a=Z.Utils.createContainerElement("div","helpTextBox","inline-block","absolute",null,c-50+"px",d-74+"px","4px","4px","solid","1px","white","0px","20px",null);a.style.overflowY="auto";Z.HelpDisplay.appendChild(a);Z.help=document.getElementById("helpTextBox");a=parseInt(Z.Utils.getResource("z230"),10);Z.HelpDisplay.style.zIndex=(a+9).toString();
d=d-18-5;c-=66;a=this.getResource("z423");c=new Z.Utils.Button("buttonHelpOk",a,null,null,null,null,"56px","18px",c+"px",d+"px","mousedown",this.helpOkButtonHandler,"z342OK","solid","1px",b,"0px","0px");Z.HelpDisplay.appendChild(c.elmt)},helpOkButtonHandler:function(a){Z.Utils.hideHelp();return!0},showHelp:function(a){Z.HelpDisplay||Z.Utils.configureHelpDisplay();Z.help&&(Z.help.innerHTML=unescape(a),Z.HelpDisplay.style.display="inline-block",document.getElementById("buttonHelpOk").style.display=
"inline-block")},hideHelp:function(){Z.HelpDisplay.style.display="none"},configureMessageDisplay:function(){var a=parseInt(this.getResource("z437"),10),b=parseInt(this.getResource("z436"),10),c=Z.viewerH-b-40,d=this.getResource("z159"),e=this.getResource("z158");Z.MessageDisplay=this.createContainerElement("div","MessageDisplay","inline-block","absolute","hidden",a+"px",b+"px","40px",c+"px","solid","1px",d,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.MessageDisplay);c=parseInt(Z.Utils.getResource("z230"),
10);Z.MessageDisplay.style.zIndex=(c+10).toString();c=Z.Utils.createTextElement("messageBox","",a-18+"px",b-40+"px","4px","4px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.MessageDisplay.appendChild(c);Z.messages=document.getElementById("messageBox");b=b-18-5;a-=66;c=this.getResource("z438");e=new Z.Utils.Button("buttonMessageOk",c,null,null,null,null,"56px","18px",a+"px",b+"px","mousedown",this.messageOkButtonHandler,"z362","solid","1px",e,"0px","0px");Z.MessageDisplay.appendChild(e.elmt)},
messageOkButtonHandler:function(a){Z.Utils.hideMessage();Z.Viewport&&Z.coordinatesVisible&&Z.Viewport.setCoordinatesDisplayVisibility(!1);return!0},messageCancelButtonHandler:function(a){Z.Utils.hideMessage();return!1},showMessage:function(a,b,c,d,e){if(Z.messagesVisible){Z.MessageDisplay||Z.Utils.configureMessageDisplay();Z.MessageDisplay.messageTimer&&window.clearTimeout(MessageDisplay.messageTimer);var f=!0;e&&(-1!=Z.Utils.arrayIndexOf(Z.messageDisplayList,a)?f=!1:Z.messageDisplayList[Z.messageDisplayList.length]=
a);if(f&&(Z.messages&&(Z.messages.value=a),Z.MessageDisplay.style.display="inline-block","undefined"!==typeof d&&null!==d&&(a=document.getElementById("textBoxFor-messageBox"))&&(a.firstChild.style.textAlign=d),d=document.getElementById("buttonMessageOk"),a=parseInt(this.getResource("z436"),10),"undefined"!==typeof b&&null!==b&&b?(d.style.display="inline-block",Z.MessageDisplay.style.height=a+"px"):(d.style.display="none",Z.MessageDisplay.style.height=a-22+"px"),"undefined"!==typeof c&&null!==c&&!isNaN(c))){"undefined"!==
typeof Z.MessageDisplay.messageTimer&&null!==Z.MessageDisplay.messageTimer&&window.clearTimeout(Z.MessageDisplay.messageTimer);if("undefined"===typeof c||null===c)c=3E3;Z.MessageDisplay.messageTimer=window.setTimeout(Z.Utils.hideMessageTimerHandler,c)}}},getMessage:function(){var a="";Z.messages&&Z.Utils.stringValidate(Z.messages.value)&&(a=Z.messages.value);return a},hideMessage:function(){Z.MessageDisplay&&(Z.MessageDisplay.style.display="none")},hideMessageTimerHandler:function(){Z.MessageDisplay.messageTimer&&
(window.clearTimeout(Z.MessageDisplay.messageTimer),Z.MessageDisplay.messageTimer=null);Z.Utils.hideMessage()},uploadProgress:function(a){var b=Z.saveImageMessage;a.lengthComputable?(a=Math.round(100*a.loaded/a.total),b+=a.toString()+"%"):b+=Z.Utils.getResource("ALERT_IMAGESAVEUNABLETOCOMPUTEPROGRESS");Z.Utils.showMessage(b,!1,"none","center")},configureCoordinatesDisplay:function(){var a=parseInt(this.getResource("z417"),10),b=parseInt(this.getResource("z415"),10),c=Z.viewerW-a-20,d=Z.viewerH-b-
30,e=this.getResource("z99");Z.CoordinatesDisplay=this.createContainerElement("div","CoordinatesDisplay","inline-block","absolute","hidden",a+"px",b+"px",c+"px",d+"px","solid","1px",e,"0px","0px","normal");Z.ViewerDisplay.appendChild(Z.CoordinatesDisplay);c=parseInt(Z.Utils.getResource("z230"),10);Z.CoordinatesDisplay.style.zIndex=(c+8).toString();c=Z.Utils.getResource("z416");c=Z.Utils.createTextElement("coordsLabelBox",c,a-18+"px","28px","4px","4px","4px","solid","1px",!0,"verdana","12px","none",
null,1,"auto","auto",null);Z.CoordinatesDisplay.appendChild(c);if(c=document.getElementById("textBoxFor-coordsLabelBox"))c.firstChild.style.textAlign="center";c=Z.Utils.createTextElement("coordsDisplayBox","",a-18+"px","18px","4px","46px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.CoordinatesDisplay.appendChild(c);Z.coordinates=document.getElementById("coordsDisplayBox");if(c=document.getElementById("textBoxFor-coordsDisplayBox"))c.firstChild.style.textAlign="center";
a=Z.Utils.createTextElement("coordsSaveBox","",a-18+"px",b-92+"px","4px","78px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.CoordinatesDisplay.appendChild(a);Z.coordinatesSave=document.getElementById("coordsSaveBox");if(a=document.getElementById("textBoxFor-coordsSaveBox"))a.firstChild.style.textAlign="center"},showCoordinates:function(a){Z.CoordinatesDisplay||Z.Utils.configureCoordinatesDisplay();Z.coordinates&&(Z.coordinates.value=a)},saveCoordinates:function(a){Z.CoordinatesDisplay||
Z.Utils.configureCoordinatesDisplay();Z.coordinatesSave&&(Z.coordinatesSave.value+=a+"\n")},configureTraceDisplay:function(){if("undefined"!==typeof Z.Viewport&&null!==Z.Viewport){var a=Z.viewerH-330,b=this.getResource("z229");Z.TraceDisplay=this.createContainerElement("div","TraceDisplay","inline-block","absolute","hidden","280px","280px","10px",a+"px","solid","1px",b,"0px","10px","normal");Z.ViewerDisplay.appendChild(Z.TraceDisplay);a=parseInt(Z.Utils.getResource("z230"),10);Z.TraceDisplay.style.zIndex=
(a+12).toString();a=Z.Utils.getResource("UI_TRACEDISPLAYTITLE");a=Z.Utils.createTextElement("debugTraces",a,"265px","155px","10px","10px","5px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.TraceDisplay.appendChild(a);Z.traces=document.getElementById("debugTraces");var a=parseInt(Z.Utils.getResource("DEFAULT_TRACEDISPLAYTEXTFONTSIZE"),10),b=parseInt(Z.Utils.getResource("DEFAULT_TRACEDISPLAYTEXTPADDINGSMALL"),10),c=textH=16,d=a-2,e=Z.Utils.createContainerElement("div","labelTileStatusTextBox",
"inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0),f=document.createTextNode(Z.Utils.getResource("UI_TRACEDISPLAYTILESTATUSTEXT"));e.appendChild(f);Z.TraceDisplay.appendChild(e);if(e=document.getElementById("labelTileStatusTextBox"))f=e.style,f.width="275px",f.height=c+"px",f.left="10px",f.top="183px",Z.Utils.setTextNodeStyle(e,"black","verdana",d+"px","none","normal","normal","normal","normal","1em","center","none");e=17;f=Z.Utils.createTextElement("tilesRequiredTextElement",
"","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(f);if(f=document.getElementById("textBoxFor-tilesRequiredTextElement")){var h=f.style;h.width="37px";h.height=textH+"px";h.left=e+"px";h.top="198px";Z.Utils.setTextAreaStyle(f,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px");e+=45}f=Z.Utils.createTextElement("tilesCachedTextElement","","1px","1px","1px","1px","0px","solid",
"1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(f);if(f=document.getElementById("textBoxFor-tilesCachedTextElement"))h=f.style,h.width="37px",h.height=textH+"px",h.left=e+"px",h.top="198px",Z.Utils.setTextAreaStyle(f,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px"),e+=45;f=Z.Utils.createTextElement("tilesRequestedTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden",
"hidden","off");Z.TraceDisplay.appendChild(f);if(f=document.getElementById("textBoxFor-tilesRequestedTextElement"))h=f.style,h.width="37px",h.height=textH+"px",h.left=e+"px",h.top="198px",Z.Utils.setTextAreaStyle(f,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px"),e+=45;f=Z.Utils.createTextElement("tilesLoadedTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(f);
if(f=document.getElementById("textBoxFor-tilesLoadedTextElement"))h=f.style,h.width="37px",h.height=textH+"px",h.left=e+"px",h.top="198px",Z.Utils.setTextAreaStyle(f,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px"),e+=45;f=Z.Utils.createTextElement("tilesDisplayedTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(f);if(f=document.getElementById("textBoxFor-tilesDisplayedTextElement"))h=
f.style,h.width="37px",h.height=textH+"px",h.left=e+"px",h.top="198px",Z.Utils.setTextAreaStyle(f,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px"),e+=45;f=Z.Utils.createTextElement("tilesWaitingTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(f);if(f=document.getElementById("textBoxFor-tilesWaitingTextElement"))h=f.style,h.width="37px",h.height=textH+"px",
h.left=e+"px",h.top="198px",Z.Utils.setTextAreaStyle(f,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px");e=Z.Utils.createContainerElement("div","labelElapsedTimeTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);f=document.createTextNode(Z.Utils.getResource("UI_TRACEDISPLAYELAPSEDTIMETEXT"));e.appendChild(f);Z.TraceDisplay.appendChild(e);if(e=document.getElementById("labelElapsedTimeTextBox"))f=
e.style,f.width="85px",f.height=c+"px",f.left="15px",f.top="224px",Z.Utils.setTextNodeStyle(e,"black","verdana",d+"px","none","normal","normal","normal","normal","1em","left","none");e=Z.Utils.createTextElement("tilesTimeElapsedTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(e);if(e=document.getElementById("textBoxFor-tilesTimeElapsedTextElement"))f=e.style,f.width="50px",f.height=textH+"px",f.left="67.5px",
f.top="220px",Z.Utils.setTextAreaStyle(e,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px");e=Z.Utils.createContainerElement("div","labelTilesPerSecondTextBox","inline-block","absolute","hidden","1px","1px","0px","0px","none","0px","transparent none","0px","0px","nowrap",null,!0);f=document.createTextNode(Z.Utils.getResource("UI_TRACEDISPLAYTILESPERSECONDTEXT"));e.appendChild(f);Z.TraceDisplay.appendChild(e);if(e=document.getElementById("labelTilesPerSecondTextBox"))f=
e.style,f.width="85px",f.height=c+"px",f.left="130px",f.top="224px",Z.Utils.setTextNodeStyle(e,"black","verdana",d+"px","none","normal","normal","normal","normal","1em","left","none");c=Z.Utils.createTextElement("tilesPerSecondTextElement","","1px","1px","1px","1px","0px","solid","1px",!1,"verdana","1px","none",null,1,"hidden","hidden","off");Z.TraceDisplay.appendChild(c);if(c=document.getElementById("textBoxFor-tilesPerSecondTextElement"))d=c.style,d.width="50px",d.height=textH+"px",d.left="215px",
d.top="220px",Z.Utils.setTextAreaStyle(c,"black","verdana",a+"px","none","normal","normal","normal","normal","1em","center","none",b+"px");a=58;b=10;c=this.getResource("z228");d=this.getResource("z446");d=new this.Button("buttonShowGlobals",d,null,null,null,null,a+"px","42px",b+"px","249px","mousedown",this.showGlobals,"z382","solid","1px",c,"0px","0px");Z.TraceDisplay.appendChild(d.elmt);b+=a+10;d=this.getResource("z449");d=new this.Button("buttonToggleDisplay",d,null,null,null,null,a+"px","42px",
b+"px","249px","mousedown",Z.Viewport.toggleDisplay,"z390","solid","1px",c,"0px","0px");Z.TraceDisplay.appendChild(d.elmt);b+=a+10;d=this.getResource("z447");d=new this.Button("buttonToggleBackfill",d,null,null,null,null,a+"px","42px",b+"px","249px","mousedown",Z.Viewport.toggleBackfill,"z388","solid","1px",c,"0px","0px");Z.TraceDisplay.appendChild(d.elmt);b+=a+10;a+=12;d=this.getResource("z448");a=new this.Button("buttonToggleConstrainPan",d,null,null,null,null,a+"px","42px",b+"px","249px","mousedown",
Z.Viewport.toggleConstrainPan,"z389","solid","1px",c,"0px","0px");Z.TraceDisplay.appendChild(a.elmt)}else window.setTimeout(function(){Z.Utils.configureTraceDisplay()},100)},showTraces:function(){Z.TraceDisplay?Z.TraceDisplay.style.display="inline-block":Z.Utils.configureTraceDisplay()},hideTraces:function(){Z.TraceDisplay.style.display="none"},trace:function(a,b,c){b=b?"\n":"";c=c?"\n\n":"\n";Z.TraceDisplay||Z.Utils.configureTraceDisplay();Z.traces&&(Z.traces.value+=b+a+c,2==Z.debug&&(Z.traces.scrollTop=
Z.traces.scrollHeight))},traceTileStatus:function(a,b,c,d,e,f){if(!(h&&m&&D&&E&&y&&A))var h=document.getElementById("tilesRequiredTextElement"),m=document.getElementById("tilesCachedTextElement"),D=document.getElementById("tilesRequestedTextElement"),E=document.getElementById("tilesLoadedTextElement"),y=document.getElementById("tilesDisplayedTextElement"),A=document.getElementById("tilesWaitingTextElement");h&&m&&D&&E&&y&&A&&("undefined"!==typeof a&&null!==a&&(h.value=a.toString()),"undefined"!==
typeof b&&null!==b&&(m.value=b.toString()),"undefined"!==typeof c&&null!==c&&(D.value=c.toString()),"undefined"!==typeof d&&null!==d&&(E.value=d.toString()),"undefined"!==typeof e&&null!==e&&(y.value=e.toString()),"undefined"!==typeof f&&null!==f&&(A.value=f.toString()))},traceTileSpeed:function(a,b){if(!c||!d)var c=document.getElementById("tilesTimeElapsedTextElement"),d=document.getElementById("tilesPerSecondTextElement");c&&d&&("undefined"!==typeof a&&null!==a&&(c.value=a.toString()),"undefined"!==
typeof b&&null!==b&&(d.value=Math.round(b).toString()))},showGlobals:function(){var a;a="\n                            ZOOMIFY IMAGE VIEWER - CURRENT VALUES\n";a+="\n";a+="VIEW:    ";a+="Z.imageX="+Z.imageX+",   ";a+="Z.imageY="+Z.imageY+",   ";a+="Z.imageZ="+Z.imageZ+",   ";a+="Z.imageR="+Z.imageR+",   ";a+="Z.priorX="+Z.priorX+",   ";a+="Z.priorY="+Z.priorY+",   ";a+="Z.priorZ="+Z.priorZ+",   ";a+="Z.priorR="+Z.priorR+",   ";a+="\n";a+="IMAGE & SKIN:    ";a+="Z.imagePath="+Z.imagePath+",   ";a+=
"Z.skinPath="+Z.skinPath+",   ";a+="Z.skinMode="+Z.skinMode+",   ";a+="Z.imageW="+Z.imageW+",   ";a+="Z.imageH="+Z.imageH+",   ";a+="tierCount="+Z.Viewport.getTierCount()+",   ";a+="z320="+Z.Viewport.getTileW()+",   ";a+="z319="+Z.Viewport.getTileH()+"\n";a+="\n";a+="PAGE & BROWSER:    ";a+="Z.pageContainer="+Z.pageContainer+",   ";a+="Z.browser="+Z.browser+",   ";a+="Z.browserVersion="+Z.browserVersion+",   ";a+="Z.canvasSupported="+Z.canvasSupported+",   ";a+="Z.cssTransformsSupported="+Z.cssTransformsSupported+
",   ";a+="Z.cssTransformProperty="+Z.cssTransformProperty+",   ";a+="Z.cssTransformNoUnits="+Z.cssTransformNoUnits+",   ";a+="Z.alphaSupported="+Z.alphaSupported+",   ";a+="Z.renderQuality="+Z.renderQuality+",   ";a+="Z.rotationSupported="+Z.rotationSupported+",   ";a+="Z.fullScreenSupported="+Z.fullScreenSupported+",   ";a+="Z.float32ArraySupported="+Z.float32ArraySupported+",   ";a+="Z.uInt8ArraySupported="+Z.uInt8ArraySupported+",   ";a+="Z.xmlHttpRequestSupport="+Z.xmlHttpRequestSupport+",   ";
a+="Z.definePropertySupported="+Z.definePropertySupported+",   ";a+="Z.responseArraySupported="+Z.responseArraySupported+",   ";a+="Z.responseArrayPrototyped="+Z.responseArrayPrototyped+",   ";a+="Z.mobileDevice="+Z.mobileDevice+",   ";a+="Z.zifSupported="+Z.zifSupported+",   ";a+="Z.localUse="+Z.localUse+"\n";a+="\n";a+="VIEWER OPTIONS & DEFAULTS:    ";a+="Z.initialX="+Z.initialX+",   ";a+="Z.initialY="+Z.initialY+",   ";a+="Z.initialZ="+Z.initialZ+",   ";a+="Z.minZ="+Z.minZ+",   ";a+="Z.maxZ="+
Z.maxZ+",   ";a+="Z.fitZ="+Z.fitZ+",   ";a+="Z.zoomSpeed="+Z.zoomSpeed+",   ";a+="Z.panSpeed="+Z.panSpeed+",   ";a+="Z.fadeInSpeed="+Z.fadeInSpeed+",   ";a+="Z.toolbarVisible="+Z.toolbarVisible+",   ";a+="Z.toolbarW="+Z.toolbarW+",   ";a+="Z.toolbarCurrentW="+Z.toolbarCurrentW+",   ";a+="Z.toolbarH="+Z.toolbarH+",   ";a+="Z.toolbarPosition="+Z.toolbarPosition+",   ";a+="Z.tooltipsVisible="+Z.tooltipsVisible+",   ";a+="Z.helpVisible="+Z.helpVisible+",   ";a+="Z.navigatorVisible="+Z.navigatorVisible+
",   ";a+="Z.navigatorW="+Z.navigatorW+",   ";a+="Z.navigatorH="+Z.navigatorH+",   ";a+="Z.navigatorL="+Z.navigatorL+",   ";a+="Z.navigatorT="+Z.navigatorT+",   ";a+="Z.navigatorFit="+Z.navigatorFit+",   ";a+="Z.clickZoom="+Z.clickZoom+",   ";a+="Z.clickPan="+Z.clickPan+",   ";a+="Z.mousePan="+Z.mousePan+",   ";a+="Z.keys="+Z.keys+",   ";a+="Z.constrainPan="+Z.constrainPan+",   ";a+="Z.constrainPanStrict="+Z.constrainPanStrict+",   ";a+="Z.smoothPan="+Z.smoothPan+",   ";a+="Z.smoothPanEasing="+Z.smoothPanEasing+
",   ";a+="Watermark alpha = "+Z.Utils.getResource("z234")+",   ";a+="Z.watermarkPath="+Z.watermarkPath+",   ";a+="Z.copyrightPath="+Z.copyrightPath+",   ";a+="Z.hotspotPath="+Z.hotspotPath+",   ";a+="Z.tourPath="+Z.tourPath+",   ";a+="Z.slidePath="+Z.slidePath+",   ";a+="Z.slideTransitionSpeed="+Z.slideTransitionSpeed+",   ";a+="Z.audioContent="+Z.audioContent+",   ";a+="Z.audioMuted="+Z.audioMuted+",   ";a+="Z.annotationPath="+Z.annotationPath+",   ";a+="Z.saveHandlerPath="+Z.saveHandlerPath+",   ";
a+="Z.minimizeVisible="+Z.minimizeVisible+",   ";a+="Z.sliderZoomVisible="+Z.sliderZoomVisible+",   ";a+="Z.panButtonsVisible="+Z.panButtonsVisible+",   ";a+="Z.resetVisible="+Z.resetVisible+",   ";a+="Z.fullScreenVisible="+Z.fullScreenVisible+",   ";a+="Z.fullPageVisible="+Z.fullPageVisible+",   ";a+="Z.initialFullPage="+Z.initialFullPage+",   ";a+="Z.measureVisible="+Z.measureVisible+",   ";a+="Z.captionTextColor="+Z.captionTextColor+",   ";a+="Z.captionBackColor="+Z.captionBackColor+",   ";a+=
"Z.polygonLineColor="+Z.polygonLineColor+",   ";a+="Z.polygonFillColor="+Z.polygonFillColor+",   ";a+="Z.captionTextVisible="+Z.captionTextVisible+",   ";a+="Z.captionBackVisible="+Z.captionBackVisible+",   ";a+="Z.polygonFillVisible="+Z.polygonFillVisible+",   ";a+="Z.polygonLineVisible="+Z.polygonLineVisible+",   ";a+="Z.rotationVisible="+Z.rotationVisible+",   ";a+="Z.initialRotation="+Z.initialRotation+",   ";a+="Z.virtualPointerVisible="+Z.virtualPointerVisible+",   ";a+="Z.crosshairsVisible="+
Z.crosshairsVisible+",   ";a+="Z.rulerVisible="+Z.rulerVisible+",   ";a+="Z.units="+Z.units+",   ";a+="Z.unitsPerImage="+Z.unitsPerImage+",   ";a+="Z.pixelsPerUnit="+Z.pixelsPerUnit+",   ";a+="Z.sourceMagnification="+Z.sourceMagnification+",   ";a+="Z.rulerListType="+Z.rulerListType+",   ";a+="Z.rulerW="+Z.rulerW+",   ";a+="Z.rulerH="+Z.rulerH+",   ";a+="Z.rulerL="+Z.rulerL+",   ";a+="Z.rulerT="+Z.rulerT+",   ";a+="Z.coordinatesVisible="+Z.coordinatesVisible+",   ";a+="Z.progressVisible="+Z.progressVisible+
",   ";a+="Z.logoVisible="+Z.logoVisible+",   ";a+="Z.logoLinkURL="+Z.logoLinkURL+",   ";a+="Z.logoCustomPath="+Z.logoCustomPath+",   ";a+="Z.canvas="+Z.canvas+",   ";a+="Z.debug="+Z.debug+",   ";a+="Z.imageProperties="+Z.imageProperties+",   ";a+="Z.serverIP="+Z.serverIP+",   ";a+="Z.serverPort="+Z.serverPort+",   ";a+="Z.tileSource="+Z.tileSource+",   ";a+="Z.tileType="+Z.tileType+",   ";a+="\n";a+="INTERNAL VALUES:    ";a+="\n";a+="displayW="+Z.Viewport.getDisplayW()+",   ";a+="displayH="+Z.Viewport.getDisplayH()+
",   ";a+="tierCurrent="+Z.Viewport.getTierCurrent()+",   ";a+="tierBackfill="+Z.Viewport.getTierBackfill()+",   ";a+="tierBackfillDynamic="+Z.Viewport.getTierBackfillDynamic()+",   ";a+="tierBackfillOversize="+Z.Viewport.getTierBackfillOversize()+",   ";a+="tierScale="+Z.Viewport.getTierScale()+",   ";a+="z315="+Z.Viewport.getTiersScaleUpMax()+",   ";a+="z314="+Z.Viewport.getTiersScaleDownMax()+",   ";a+="z316="+Z.Viewport.getTilesCacheMax()+",   ";a+="Z.useCanvas="+Z.useCanvas+"\n";a+="Z.editMode="+
Z.editMode+"\n";a+="Z.labelMode="+Z.labelMode+"\n";a+="Z.editing="+Z.editing+"\n";a+="\n";a+="INTERNAL LISTS:    ";a+="tierWs="+Z.Viewport.getTierWs()+",   ";a+="tierHs="+Z.Viewport.getTierHs()+",   ";a+="tierTileCounts="+Z.Viewport.getTierTileCounts()+",   ";a+="tilesLoadingNames="+Z.Viewport.getTilesLoadingNames()+"\n";a+="\n";alert(a)}};